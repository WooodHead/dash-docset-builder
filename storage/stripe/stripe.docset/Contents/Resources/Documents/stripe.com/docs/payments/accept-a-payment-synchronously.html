<!DOCTYPE html>
<html lang="en" id="">
  <head>
    
    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8">
    <meta name="msvalidate.01" content="4C77784AFD61498FA0764E14D1631D53">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Accept a synchronous card payment | Stripe Payments</title>

    <meta name="description" content="Online payment processing for internet businesses. Stripe is a suite of payment APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="../../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../../img/v3/home/social.png">

    
<link rel="canonical" href="payment-intents/web-manual.html">


    <meta property="og:title" content="Accept a synchronous card payment | Stripe Payments">
    <meta property="og:url" content="https://stripe.com/docs/payments/accept-a-payment-synchronously">
    <meta property="og:description" content="Online payment processing for internet businesses. Stripe is a suite of payment APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="https://stripe.com/img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="https://stripe.com/img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Accept a synchronous card payment | Stripe Payments">
    <meta name="twitter:description" content="Online payment processing for internet businesses. Stripe is a suite of payment APIs that powers commerce for businesses of all sizes.">

    <script type="application/json" id="sentry-config">{&quot;enabled&quot;:true,&quot;dsn&quot;:&quot;https://8ca50a25374f408699e0eda3eb47e7f9@errors.stripe.com/101&quot;,&quot;release&quot;:&quot;970ae5326b92ec34ae0e47dd75d5bbbe608bcdf4&quot;,&quot;environment&quot;:&quot;development&quot;,&quot;project&quot;:&quot;site&quot;}</script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sentry-97c4b87de47130a60661.min.js"></script>



    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/compiled/js/../css/sprockets-css-v3/shared/navigation_ie10-20060247f192805b273d.min.css&quot;}</script>

    <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Corporation",
    "name": "Stripe",
    "url": "https://stripe.com/",
    "logo": "https://stripe.com/img/about/logos/logos/blue.png",
    "contactPoint" : [
      {
        "@type" : "ContactPoint",
        "url": "https://stripe.com/contact",
        "email": "info@stripe.com",
        "contactType": "customer support"
      }
    ],
    "sameAs": [
      "https://www.facebook.com/StripeHQ/",
      "https://twitter.com/stripe",
      "https://www.linkedin.com/company/stripe"
    ]
  }
</script>

    <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Country",
    "address": {
      "addressCountry": "US"
    }
  }
</script>

      <link rel="preload" href="../../fonts/stripe-icons.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../../fonts/camphor-ss/300-light.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../../fonts/camphor-ss/400-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../../fonts/camphor-ss/500-medium.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../../fonts/camphor-ss/600-bold.woff2" as="font" type="font/woff2" crossorigin>


<script type="text/javascript" nonce="wM5eO51ffgXxVmJ8avNXaA==">        !function(){if('PerformanceLongTaskTiming' in window){var g=window.__tti={e:[]};
        g.o=new PerformanceObserver(function(l){g.e=g.e.concat(l.getEntries())});
        g.o.observe({entryTypes:['longtask']})}}();
</script>
      <meta name="stripe-asset-root" content="https://b.stripecdn.com/mkt/assets">
<link rel="preconnect" href="https://b.stripecdn.com" crossorigin>
<link rel="dns-prefetch" href="https://b.stripecdn.com">

            <link rel="preload" href="../../../b.stripecdn.com/mkt/assets/Sohne-5994f5a0.woff2" as="font" crossorigin>
          

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/fonts-2d33d6.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/global-915871.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/White-91e563.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Light-94422c.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Dark-e92765.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Transparent-3d0008.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Legacy-bf2a92.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/LegacyLight-fb73d4.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/LegacyDark-aa8d83.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Chroma-91bf03.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/CottonCandy-e09cce.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Holly-1664a6.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/LemonLime-cae047.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Overcast-429acc.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Pomegranate-88d023.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Slate-2b436b.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Sunburst-c24337.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Sunset-65e114.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Twilight-0bab55.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Wintergreen-a53616.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Layout-424af2.css">
            

    



    <meta content="1" name="csrf-token">
      <meta content="stripe.com" name="stripe-domain">

      <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-sail-2d674e24598277783349.min.css">
    <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/default-a983e753e40dfd33838e.min.css">
    <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/shared/common-498b69b0c8172690999c.min.css">
    <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/base-732c92df090a16aa2d70.min.css">
    
    <link rel="stylesheet" href="../../assets/compiled/css/docsApps-36c8d73a60d2da272c59.min.css">
      <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/demo_common.css-b36189475f614bf0f9fb.min.css">
  <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/take_a_payment.css-dbce764851f776c399e3.min.css">
  <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/shared/prism_light-433b626453a5d1ab161c.min.css">

      <meta name="robots" content="noarchive">



  </head>
  <body class="">
    
      <div id="docs">
        <div id="sidebar">
            
  <div class="logo">
    <a href="../recipes/switching-to-stripe.html" title="Stripe docs">
      <div class="site"></div>
      <span class="extension docs">
        
      </span>
    </a>
</div>


<div class="nav-border"></div>


<nav class="new-sidebar section-selected">
  <div class="new-sidebar-viewport">
    <div class="section-list">
        <h1 class="home">
          <a class="item-link  " href="../recipes/switching-to-stripe.html" data-section-rel="/docs">
            Home
          </a>
        </h1>
        <h1 class="payments">
          <a class="section-link  " href="../payments.html" data-section-rel="/docs/payments" title="A complete payments platform engineered for growth">
            Payments
          </a>
        </h1>
        <h1 class="subscriptions">
          <a class="section-link  " href="../billing/quickstart.html" data-section-rel="/docs/billing" title="Build and scale your recurring business model">
            Billing
          </a>
        </h1>
        <h1 class="connect">
          <a class="section-link  " href="../connect.html" data-section-rel="/docs/connect" title="Everything platforms need to get sellers paid">
            Connect
          </a>
        </h1>
        <h1 class="checkout">
          <a class="section-link  " href="../checkout.html" data-section-rel="/docs/payments/checkout" title="The fastest way to get started with Stripe">
            Checkout
          </a>
        </h1>
        <h1 class="sigma">
          <a class="section-link  " href="../sigma.html" data-section-rel="/docs/sigma" title="Your business data at your fingertips">
            Sigma
          </a>
        </h1>
        <h1 class="atlas">
          <a class="section-link  " href="../atlas.html" data-section-rel="/docs/atlas" title="Turn your idea into a startup">
            Atlas
          </a>
        </h1>
        <h1 class="radar">
          <a class="section-link  " href="../radar.html" data-section-rel="/docs/radar" title="Fight fraud with machine learning">
            Radar
          </a>
        </h1>
        <h1 class="issuing">
          <a class="section-link  " href="../issuing.html" data-section-rel="/docs/issuing" title="Create, distribute, and manage cards">
            Issuing
          </a>
        </h1>
        <h1 class="terminal">
          <a class="section-link  " href="../terminal.html" data-section-rel="/docs/terminal" title="The programmable point of sale">
            Terminal
          </a>
        </h1>
        <h1 class="capital">
          <a class="section-link  " href="../capital/faqs.html" data-section-rel="/docs/capital/faqs" title="Financing for your business">
            Capital
          </a>
        </h1>
        <h1 class="corporatecard">
          <a class="section-link  " href="../corporate-card.html" data-section-rel="/docs/corporate-card" title="The Stripe Corporate Card">
            Corporate Card
          </a>
        </h1>
        <h1 class="identity">
          <a class="section-link  " href="../identity.html" data-section-rel="/docs/identity" title="Verify your users online">
            Identity
          </a>
        </h1>
        <h1 class="dashboard">
          <a class="section-link  " href="../dashboard.html" data-section-rel="/docs/dashboard" title="Dashboard">
            Dashboard
          </a>
        </h1>
        <h1 class="account">
          <a class="section-link  " href="../account.html" data-section-rel="/docs/account" title="How to activate and secure your Stripe account">
            Account
          </a>
        </h1>
        <h1 class="api">
          <a class="section-link  " href="../development.html" data-section-rel="/docs/development" title="Start developing your Stripe integration">
            Development
          </a>
        </h1>
        <h1 class="reporting">
          <a class="section-link  " href="../dashboard/reporting.html" data-section-rel="/docs/reports/financial-reports" title="Generate reports of your Stripe financial information">
            Reports
          </a>
        </h1>
        <h1 class="partners">
          <a class="section-link  " href="../partners.html" data-section-rel="/docs/partners">
            Partners
          </a>
        </h1>
        <h1 class="references">
          <a class="item-link  external" href="../api/index.html" data-section-rel="/docs/api" target="_blank">
            API Reference
          </a>
        </h1>
    </div>
      <div class="section " data-section-id="/docs">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header home">
          <a class="">
            Home
          </a>
        </h1>
        
      </div>
      <div class="section expanded" data-section-id="/docs/payments">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header payments">
          <a class="">
            Payments
          </a>
        </h1>
        <ul class="expanded always-expanded">
    <li class="sidebar-item ">
      <a href="../payments.html" class=" " title="Overview" aria-label="Overview">
        Overview
      </a>
    </li>
    <li class="category ">Card payments
    </li>
    <li class="sidebar-item ">
      <a href="cards/overview.html" class=" " aria-label="Learn the steps of a card payment" title="Learn the steps of a card payment">
        How cards work
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="payment-intents/quickstart.html" class=" " aria-label="Collect payments with Stripe" title="Collect payments with Stripe">
        Accept a payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="cards/reusing-cards.html" class=" " title="More payment scenarios" aria-label="More payment scenarios">
        More payment scenarios
      </a>
      <ul class="expanded ">
    <li class="sidebar-item ">
      <a href="save-and-reuse.html" class=" " aria-label="Save card details without a payment" title="Save card details without a payment">
        Set up later payments
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="cards/saving-cards.html" class=" " aria-label="Save card details during payment" title="Save card details during payment">
        Save a card during payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="capture-later.html" class=" " aria-label="Authorize a charge now, capture funds later" title="Authorize a charge now, capture funds later">
        Place a hold on a card
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="payment-intents/web-manual.html" class="selected " aria-label="Accepting payments synchronously" title="Accepting payments synchronously">
        Finalize payments server-side
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="3d-secure.html" class=" " aria-label="Support 3D Secure authentication and more" title="Support 3D Secure authentication and more">
        3D Secure authentication
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="without-card-authentication.html" class=" " title="U.S. and Canadian cards" aria-label="U.S. and Canadian cards">
        U.S. and Canadian cards
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="save-card-without-authentication.html" class=" " aria-label="Save cards with your basic integration" title="Save cards with your basic integration">
        Save cards without authentication
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="payment-intents/upgrade-to-handle-actions.html" class=" " aria-label="Upgrade your basic integration to handle global payments" title="Upgrade your basic integration to handle global payments">
        Upgrade to handle authentication
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="after-the-payment.html" class=" " title="After the payment" aria-label="After the payment">
        After the payment
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../payouts.html" class=" " title="Payouts" aria-label="Payouts">
        Payouts
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../currencies.html" class=" " title="Currencies" aria-label="Currencies">
        Currencies
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../currencies/conversions.html" class=" " title="Currency conversions" aria-label="Currency conversions">
        Currency conversions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payouts/instant-payouts-banks.html" class=" " title="Bank support for Instant Payouts" aria-label="Bank support for Instant Payouts">
        Bank support for Instant Payouts
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../declines.html" class=" " aria-label="Understanding declines and failed payments" title="Understanding declines and failed payments">
        Declines
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../declines/codes.html" class=" " title="Decline codes" aria-label="Decline codes">
        Decline codes
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../receipts.html" class=" " title="Email receipts" aria-label="Email receipts">
        Email receipts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="cards/refunds.html" class=" " title="Refunds" aria-label="Refunds">
        Refunds
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="handling-payment-events.html" class=" " aria-label="Use webhooks to respond to offline payment events" title="Use webhooks to respond to offline payment events">
        Handle webhook events
      </a>
    </li>
</ul>

    </li>
    <li class="category ">Add payment methods
    </li>
    <li class="sidebar-item ">
      <a href="digital-wallets.html" class=" " title="Digital wallets" aria-label="Digital wallets">
        Digital wallets
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../sources/alipay.html" class=" " aria-label="Alipay payments with Sources" title="Alipay payments with Sources">
        Alipay
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../sources/alipay/ios.html" class=" " aria-label="Using Alipay in the iOS SDK" title="Using Alipay in the iOS SDK">
        iOS
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/alipay/android.html" class=" " aria-label="Using Alipay in the Android SDK" title="Using Alipay in the Android SDK">
        Android
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../amex-express-checkout.html" class=" " aria-label="Using Amex Express Checkout" title="Using Amex Express Checkout">
        Amex Express Checkout
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../apple-pay.html" class=" " title="Apple Pay" aria-label="Apple Pay">
        Apple Pay
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../apple-pay/best-practices.html" class=" " aria-label="Best practices with Apple Pay" title="Best practices with Apple Pay">
        Best practices
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../google-pay.html" class=" " title="Google Pay" aria-label="Google Pay">
        Google Pay
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../microsoft-pay.html" class=" " title="Microsoft Pay" aria-label="Microsoft Pay">
        Microsoft Pay
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../masterpass.html" class=" " aria-label="Using Masterpass" title="Using Masterpass">
        Masterpass
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../stripe-js/elements/payment-request-button.html" class=" " aria-label="Use a button to collect stored payment details" title="Use a button to collect stored payment details">
        Payment Request Button
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../secure-remote-commerce.html" class=" " aria-label="Using Secure Remote Commerce" title="Using Secure Remote Commerce">
        Secure Remote Commerce
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../visa-checkout.html" class=" " aria-label="Using Visa Checkout" title="Using Visa Checkout">
        Visa Checkout
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/wechat-pay.html" class=" " aria-label="WeChat Pay Payments with Sources (Public Beta)" title="WeChat Pay Payments with Sources (Public Beta)">
        WeChat Pay
      </a>
      <ul class=" ">
</ul>

    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="ach-bank-transfers.html" class=" " title="Bank debits and transfers" aria-label="Bank debits and transfers">
        Bank debits and transfers
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../ach.html" class=" " aria-label="ACH guide" title="ACH guide">
        ACH
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/ach-credit-transfer.html" class=" " aria-label="ACH Credit Transfer payments with Sources (Public Beta)" title="ACH Credit Transfer payments with Sources (Public Beta)">
        ACH Credit Transfer
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="https://stripe.com/docs/payments/au-becs-debit" class=" " aria-label="BECS Direct Debit payments in Australia" title="BECS Direct Debit payments in Australia">
        BECS Direct Debit in Australia
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="https://stripe.com/docs/payments/au-becs-debit/accept-a-payment" class=" " aria-label="Learn how to accept BECS Direct Debit payments in Australia" title="Learn how to accept BECS Direct Debit payments in Australia">
        Accept a payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="https://stripe.com/docs/payments/au-becs-debit/set-up-payment" class=" " aria-label="Save payment method details for future BECS Direct Debit payments in Australia" title="Save payment method details for future BECS Direct Debit payments in Australia">
        Save bank details
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="sepa-debit.html" class=" " aria-label="SEPA Direct Debit payments" title="SEPA Direct Debit payments">
        SEPA Direct Debit
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="sepa-debit/accept-a-payment.html" class=" " aria-label="Learn how to accept SEPA Direct Debit payments" title="Learn how to accept SEPA Direct Debit payments">
        Accept a payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="sepa-debit-setup-intents.html" class=" " aria-label="Save payment method details for future SEPA Direct Debit payments" title="Save payment method details for future SEPA Direct Debit payments">
        Save bank details
      </a>
    </li>
</ul>

    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="local-payment-methods.html" class=" " title="Other payment methods" aria-label="Other payment methods">
        Other payment methods
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../bancontact.html" class=" " aria-label="Bancontact payments with Sources" title="Bancontact payments with Sources">
        Bancontact
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../sources/bancontact/recurring.html" class=" " aria-label="Recurring Bancontact payments with Sources" title="Recurring Bancontact payments with Sources">
        Recurring payments
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../sources/eps.html" class=" " aria-label="EPS payments with Sources (Public Beta)" title="EPS payments with Sources (Public Beta)">
        EPS
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="fpx.html" class=" " aria-label="FPX payments with Payment Methods" title="FPX payments with Payment Methods">
        FPX
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="fpx/accept-a-payment.html" class=" " aria-label="Learn how to accept FPX payments" title="Learn how to accept FPX payments">
        Accept a payment
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../sources/giropay.html" class=" " aria-label="giropay payments with Sources" title="giropay payments with Sources">
        giropay
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../ideal.html" class=" " aria-label="iDEAL payments" title="iDEAL payments">
        iDEAL
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="ideal/accept-a-payment.html" class=" " aria-label="Learn how to accept iDEAL payments" title="Learn how to accept iDEAL payments">
        Accept a payment
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../sources/klarna.html" class=" " aria-label="Klarna payments with Sources (Public Beta)" title="Klarna payments with Sources (Public Beta)">
        Klarna
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../mobile/ios/klarna.html" class=" " aria-label="Klarna payments on iOS" title="Klarna payments on iOS">
        iOS
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../mobile/android/klarna.html" class=" " aria-label="Klarna payments on Android" title="Klarna payments on Android">
        Android
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../sources/multibanco.html" class=" " aria-label="Multibanco payments with Sources (Public Beta)" title="Multibanco payments with Sources (Public Beta)">
        Multibanco
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/p24.html" class=" " aria-label="Przelewy24 payments with Sources (Public Beta)" title="Przelewy24 payments with Sources (Public Beta)">
        Przelewy24
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sofort.html" class=" " aria-label="SOFORT payments with Sources" title="SOFORT payments with Sources">
        SOFORT
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item separator">
      <a href="../testing.html" class=" " title="Testing" aria-label="Testing">
        Testing
      </a>
    </li>
    <li class="category ">About the APIs
    </li>
    <li class="sidebar-item ">
      <a href="payment-intents/creating-payment-intents.html" class=" " aria-label="About the Payment Intents API" title="About the Payment Intents API">
        Payment Intents
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="intents.html" class=" " aria-label="The lifecycle of a Payment or Setup Intent" title="The lifecycle of a Payment or Setup Intent">
        How intents work
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="payment-intents/verifying-status.html" class=" " aria-label="Verifying the status of a Payment Intent" title="Verifying the status of a Payment Intent">
        Payment status updates
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="payment-intents/migration/charges.html" class=" " aria-label="Understanding the payments APIs" title="Understanding the payments APIs">
        Compare to Charges
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="setup-intents.html" class=" " aria-label="About the Setup Intents API" title="About the Setup Intents API">
        Setup Intents
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="payment-methods.html" class=" " aria-label="About the Payment Methods API" title="About the Payment Methods API">
        Payment Methods
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="legacy-apis.html" class=" " aria-label="Our older APIs" title="Our older APIs">
        Older APIs
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../charges.html" class=" " aria-label="Use the Charges API" title="Use the Charges API">
        Charges
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="payment-intents/migration.html" class=" " title="Migrate to the new APIs" aria-label="Migrate to the new APIs">
        Migrate to the new APIs
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="accept-a-payment-charges.html" class=" " aria-label="Collect payments with Stripe" title="Collect payments with Stripe">
        Accept a card payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../saving-cards.html" class=" " aria-label="Save cards to charge later" title="Save cards to charge later">
        Save a card
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../charges/placing-a-hold.html" class=" " title="Place a hold on a card" aria-label="Place a hold on a card">
        Place a hold on a card
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="charges-api/connect.html" class=" " aria-label="Stripe Connect and the Charges API" title="Stripe Connect and the Charges API">
        Charges with Connect
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../sources/bitcoin.html" class=" " aria-label="About the Sources API" title="About the Sources API">
        Sources
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="payment-methods/transitioning.html" class=" " title="Transition to the new APIs" aria-label="Transition to the new APIs">
        Transition to the new APIs
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/cards.html" class=" " title="Card Sources" aria-label="Card Sources">
        Card Sources
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/customers.html" class=" " title="Sources and customers" aria-label="Sources and customers">
        Sources and customers
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/connect.html" class=" " aria-label="Connect platforms using the Sources API" title="Connect platforms using the Sources API">
        Connect platforms
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/best-practices.html" class=" " aria-label="Best practices using Sources" title="Best practices using Sources">
        Best practices
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../mobile/ios/sources.html" class=" " aria-label="Getting started with Sources in the iOS SDK" title="Getting started with Sources in the iOS SDK">
        iOS
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../mobile/android/sources.html" class=" " aria-label="Getting started with Sources in the Android SDK" title="Getting started with Sources in the Android SDK">
        Android
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../orders.html" class=" " title="Orders" aria-label="Orders">
        Orders
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../orders/guide.html" class=" " title="How to use orders" aria-label="How to use orders">
        How to use orders
      </a>
    </li>
</ul>

    </li>
</ul>

    </li>
    <li class="category ">Regulation Support
    </li>
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication/doineed.html" class=" " title="Am I affected by SCA?" aria-label="Am I affected by SCA?">
        Am I affected by SCA?
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication.html" class=" " title="SCA readiness" aria-label="SCA readiness">
        SCA readiness
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication/migration.html" class=" " aria-label="Update your integration to prepare for SCA" title="Update your integration to prepare for SCA">
        Update your integration
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication/plugins.html" class=" " aria-label="Update your Stripe plugin to prepare for SCA" title="Update your Stripe plugin to prepare for SCA">
        Plugins
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication/grandfathered-agreements.html" class=" " aria-label="Learn which payment flows are grandfathered in" title="Learn which payment flows are grandfathered in">
        SCA grandfathering
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication/faqs.html" class=" " aria-label="Get answers to common questions about SCA enforcement" title="Get answers to common questions about SCA enforcement">
        Frequently asked questions
      </a>
    </li>
</ul>

    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/billing">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header subscriptions">
          <a class="">
            Billing
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../billing/quickstart.html" class=" " aria-label="Stripe Billing overview" title="Stripe Billing overview">
        Overview
      </a>
    </li>
    <li class="category ">Start with a use case
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/fixed-price.html" class=" " aria-label="Learn how to offer multiple pricing options to your customers and charge them a fixed amount each month" title="Learn how to offer multiple pricing options to your customers and charge them a fixed amount each month">
        Fixed-price subscriptions with Elements
      </a>
    </li>
    <li class="category ">Manage subscriptions
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions.html" class=" " aria-label="Learn more about the lifecycles of Stripe Billing&rsquo;s subscriptions and invoices" title="Learn more about the lifecycles of Stripe Billing&rsquo;s subscriptions and invoices">
        How subscriptions work
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/model.html" class=" " title="How to model subscriptions" aria-label="How to model subscriptions">
        How to model subscriptions
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/examples.html" class=" " aria-label="Billing examples" title="Billing examples">
        Examples
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/payment.html" class=" " aria-label="Implementing a subscription signup and payment flow" title="Implementing a subscription signup and payment flow">
        Signup and payment flow
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/products-and-plans.html" class=" " aria-label="Managing products and prices" title="Managing products and prices">
        Products and Prices
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/self-serve-portal.html" class=" " aria-label="Learn about the self-serve portal" title="Learn about the self-serve portal">
        Self-serve portal
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/integrating-self-serve-portal.html" class=" " title="Integrating the self-serve portal" aria-label="Integrating the self-serve portal">
        Integrating the self-serve portal
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../billing/webhooks.html" class=" " aria-label="Using webhooks with subscriptions" title="Using webhooks with subscriptions">
        Subscription webhooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../subscriptions/changing.html" class=" " aria-label="Change subscriptions" title="Change subscriptions">
        Change subscriptions
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/upgrade-downgrade.html" class=" " aria-label="Upgrading and downgrading plans" title="Upgrading and downgrading plans">
        Upgrade and downgrade
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/canceling.html" class=" " aria-label="Cancel subscriptions" title="Cancel subscriptions">
        Cancel
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/pause.html" class=" " aria-label="Pause payment collection on subscriptions" title="Pause payment collection on subscriptions">
        Pause payment collection
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/pending-updates.html" class=" " aria-label="Learn how to handle payment failures when updating a subscription" title="Learn how to handle payment failures when updating a subscription">
        Pending updates
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/customer.html" class=" " title="Customers" aria-label="Customers">
        Customers
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/customer/balance.html" class=" " title="Customer Balance" aria-label="Customer Balance">
        Customer Balance
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/migration/strong-customer-authentication.html" class=" " title="Strong Customer Authentication (SCA)" aria-label="Strong Customer Authentication (SCA)">
        Strong Customer Authentication (SCA)
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/migration/taxes.html" class=" " title="Improved tax support" aria-label="Improved tax support">
        Improved tax support
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/migration/invoice-states.html" class=" " title="Invoices API updates" aria-label="Invoices API updates">
        Invoices API updates
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/migration/migrating-prices.html" class=" " title="Migrating to Prices" aria-label="Migrating to Prices">
        Migrating to Prices
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../billing/subscriptions/advanced.html" class=" " title="Advanced features" aria-label="Advanced features">
        Advanced features
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/taxes.html" class=" " title="Adding taxes" aria-label="Adding taxes">
        Adding taxes
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/discounts.html" class=" " title="Applying discounts" aria-label="Applying discounts">
        Applying discounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/backdating.html" class=" " title="Backdating subscriptions" aria-label="Backdating subscriptions">
        Backdating subscriptions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/billing-cycle.html" class=" " title="Billing cycles" aria-label="Billing cycles">
        Billing cycles
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/decimal-amounts.html" class=" " title="Decimal amounts" aria-label="Decimal amounts">
        Decimal amounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/metered-billing.html" class=" " title="Metered billing" aria-label="Metered billing">
        Metered billing
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/metered-billing/thresholds.html" class=" " title="Billing thresholds" aria-label="Billing thresholds">
        Billing thresholds
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/multiple.html" class=" " title="Multiple subscriptions" aria-label="Multiple subscriptions">
        Multiple subscriptions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/prorations.html" class=" " title="Prorations" aria-label="Prorations">
        Prorations
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/quantities.html" class=" " title="Setting quantities" aria-label="Setting quantities">
        Setting quantities
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/connect.html" class=" " title="Subscriptions with Connect" aria-label="Subscriptions with Connect">
        Subscriptions with Connect
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/subscriptions/multiplan.html" class=" " title="Subscriptions with multiple plans" aria-label="Subscriptions with multiple plans">
        Subscriptions with multiple plans
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/subscription-schedules.html" class=" " title="Subscription schedules" aria-label="Subscription schedules">
        Subscription schedules
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/subscription-schedules/use-cases.html" class=" " title="Use cases" aria-label="Use cases">
        Use cases
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/tiers.html" class=" " title="Tiered pricing" aria-label="Tiered pricing">
        Tiered pricing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/quantity-transformation.html" class=" " title="Quantity transformation" aria-label="Quantity transformation">
        Quantity transformation
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/trials.html" class=" " title="Using trial periods" aria-label="Using trial periods">
        Using trial periods
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../subscriptions/testing.html" class=" " aria-label="Testing Billing" title="Testing Billing">
        Testing
      </a>
    </li>
    <li class="category ">Add payment methods
    </li>
    <li class="sidebar-item ">
      <a href="https://stripe.com/docs/billing/subscriptions/au-becs-debit" class=" " title="BECS Direct Debit in Australia" aria-label="BECS Direct Debit in Australia">
        BECS Direct Debit in Australia
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/sepa-debit.html" class=" " title="SEPA Direct Debit in the EU" aria-label="SEPA Direct Debit in the EU">
        SEPA Direct Debit in the EU
      </a>
    </li>
    <li class="category ">Invoice customers
    </li>
    <li class="sidebar-item ">
      <a href="../billing/invoices/workflow.html" class=" " title="How invoices work" aria-label="How invoices work">
        How invoices work
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/invoices/one-off.html" class=" " aria-label="Create an invoice and bill a customer" title="Create an invoice and bill a customer">
        Create an invoice
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/invoices/customizing.html" class=" " title="Customize invoices" aria-label="Customize invoices">
        Customize invoices
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../subscriptions/invoices.html" class=" " title="Subscription invoices" aria-label="Subscription invoices">
        Subscription invoices
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/paying.html" class=" " title="Charging automatically" aria-label="Charging automatically">
        Charging automatically
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/sending.html" class=" " title="Sending invoices to customers" aria-label="Sending invoices to customers">
        Sending invoices to customers
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/tax-rates.html" class=" " title="Tax rates on invoices" aria-label="Tax rates on invoices">
        Tax rates on invoices
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/reconciliation.html" class=" " title="Automated reconciliation" aria-label="Automated reconciliation">
        Automated reconciliation
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/credit-notes.html" class=" " title="Credit notes" aria-label="Credit notes">
        Credit notes
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/paper-check-payment.html" class=" " title="Pay by mailed check" aria-label="Pay by mailed check">
        Pay by mailed check
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/automatic-collection.html" class=" " title="Automatic collection and dunning" aria-label="Automatic collection and dunning">
        Automatic collection and dunning
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/taxes/tax-ids.html" class=" " title="Customer tax IDs" aria-label="Customer tax IDs">
        Customer tax IDs
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/taxes/tax-rates.html" class=" " title="Tax rates" aria-label="Tax rates">
        Tax rates
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/invoices/hosted.html" class=" " title="Hosted invoice pages" aria-label="Hosted invoice pages">
        Hosted invoice pages
      </a>
    </li>
    <li class="category ">Revenue recognition
    </li>
    <li class="sidebar-item ">
      <a href="../billing/revenue-recognition.html" class=" " title="Overview" aria-label="Overview">
        Overview
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/connect">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header connect">
          <a class="">
            Connect
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../connect.html" class=" " aria-label="Connect overview" title="Connect overview">
        Overview
      </a>
    </li>
    <li class="category ">Guides
    </li>
    <li class="sidebar-item ">
      <a href="../connect/collect-then-transfer-guide/payments.html" class=" " title="Collect payments then pay out" aria-label="Collect payments then pay out">
        Collect payments then pay out
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/enable-payment-acceptance-guide.html" class=" " title="Enable other businesses to accept payments directly" aria-label="Enable other businesses to accept payments directly">
        Enable other businesses to accept payments directly
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/add-and-pay-out-guide.html" class=" " title="Pay out money" aria-label="Pay out money">
        Pay out money
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/explore-connect-guide.html" class=" " title="Explore Connect" aria-label="Explore Connect">
        Explore Connect
      </a>
    </li>
    <li class="category ">Capabilities
    </li>
    <li class="sidebar-item ">
      <a href="../connect/capabilities-overview.html" class=" " aria-label="Capabilities overview" title="Capabilities overview">
        Overview
      </a>
    </li>
    <li class="category ">Account types
    </li>
    <li class="sidebar-item ">
      <a href="../connect/accounts.html" class=" " aria-label="Connect account types" title="Connect account types">
        Accounts overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/standard-accounts.html" class=" " aria-label="Using Connect with Standard accounts" title="Using Connect with Standard accounts">
        Standard
      </a>
      <ul class=" ">
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../connect/express-accounts.html" class=" " aria-label="Using Connect with Express accounts" title="Using Connect with Express accounts">
        Express
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/custom-accounts.html" class=" " aria-label="Using Connect with Custom accounts" title="Using Connect with Custom accounts">
        Custom
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../connect/connect-onboarding.html" class=" " aria-label="Overview of Connect onboarding for Custom accounts" title="Overview of Connect onboarding for Custom accounts">
        Onboarding accounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/updating-accounts.html" class=" " aria-label="Updating accounts and Services Agreement Acceptance" title="Updating accounts and Services Agreement Acceptance">
        Updating accounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/identity-verification.html" class=" " aria-label="Identity verification for Custom accounts" title="Identity verification for Custom accounts">
        Identity verification
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/identity-verification-api.html" class=" " aria-label="Handling verification with the API for Custom accounts" title="Handling verification with the API for Custom accounts">
        Handling verification with the API
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/required-verification-information.html" class=" " aria-label="Required verification information" title="Required verification information">
        Required info
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/account-tokens.html" class=" " aria-label="Using tokens" title="Using tokens">
        Using tokens
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/setting-mcc.html" class=" " aria-label="Setting merchant category codes" title="Setting merchant category codes">
        Setting MCCs
      </a>
    </li>
</ul>

    </li>
    <li class="category ">Processing Payments
    </li>
    <li class="sidebar-item ">
      <a href="../connect/charges.html" class=" " title="Creating charges" aria-label="Creating charges">
        Creating charges
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../connect/direct-charges.html" class=" " aria-label="Creating direct charges" title="Creating direct charges">
        Direct charges
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/destination-charges.html" class=" " aria-label="Creating Destination Charges on Your Platform" title="Creating Destination Charges on Your Platform">
        Destination charges
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/charges-transfers.html" class=" " aria-label="Creating separate charges and transfers (Public Beta)" title="Creating separate charges and transfers (Public Beta)">
        Separate charges and transfers
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/statement-descriptors.html" class=" " aria-label="Setting Statement Descriptors with Connect" title="Setting Statement Descriptors with Connect">
        Statement descriptors
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../connect/top-ups.html" class=" " aria-label="Topping up your platform account" title="Topping up your platform account">
        Top-ups
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/account-debits.html" class=" " aria-label="Debiting Express and Custom accounts (Public Beta)" title="Debiting Express and Custom accounts (Public Beta)">
        Account debits
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/subscriptions.html" class=" " title="Creating subscriptions" aria-label="Creating subscriptions">
        Creating subscriptions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/currencies.html" class=" " aria-label="Working with multiple currencies" title="Working with multiple currencies">
        Multiple currencies
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/account-balances.html" class=" " aria-label="Understanding Connect account balances" title="Understanding Connect account balances">
        Account balances
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/payouts.html" class=" " aria-label="Setting bank and debit card payouts" title="Setting bank and debit card payouts">
        Payouts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/cloning-saved-payment-methods.html" class=" " aria-label="Reusing customers" payment information across connected accounts title="Reusing customers">
        Cloning saved payment methods
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../connect/best-practices.html" class=" " aria-label="Best practices for platforms with Express or Custom accounts" title="Best practices for platforms with Express or Custom accounts">
        Best practices
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/dashboard.html" class=" " aria-label="Managing connected accounts with the Dashboard" title="Managing connected accounts with the Dashboard">
        Dashboard account management
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../connect/dashboard/viewing-all-accounts.html" class=" " aria-label="Viewing all accounts" title="Viewing all accounts">
        Viewing all accounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/dashboard/managing-individual-accounts.html" class=" " aria-label="Managing individual accounts" title="Managing individual accounts">
        Managing individual accounts
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../connect/authentication.html" class=" " aria-label="Authenticating and making API calls as a connected account" title="Authenticating and making API calls as a connected account">
        Making API calls for connected accounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/oauth-reference.html" class=" " aria-label="Connect OAuth reference" title="Connect OAuth reference">
        OAuth reference
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/webhooks.html" class=" " aria-label="Connect webhooks" title="Connect webhooks">
        Webhooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../connect/testing.html" class=" " aria-label="Testing with Connect" title="Testing with Connect">
        Testing
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/payments/checkout">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header checkout">
          <a class="">
            Checkout
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../checkout.html" class=" " title="Overview" aria-label="Overview">
        Overview
      </a>
    </li>
    <li class="category ">One-time payments
    </li>
    <li class="sidebar-item ">
      <a href="checkout/accept-a-payment.html" class=" " title="Accept a payment" aria-label="Accept a payment">
        Accept a payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="checkout/payment-methods.html" class=" " title="Payment method details" aria-label="Payment method details">
        Payment method details
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="checkout/collecting.html" class=" " title="Set up future payments" aria-label="Set up future payments">
        Set up future payments
      </a>
    </li>
    <li class="category ">Subscriptions
    </li>
    <li class="sidebar-item ">
      <a href="checkout/subscriptions.html" class=" " title="Set up a subscription" aria-label="Set up a subscription">
        Set up a subscription
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="checkout/subscriptions/update-payment-details.html" class=" " title="Update payment details" aria-label="Update payment details">
        Update payment details
      </a>
    </li>
    <li class="category ">Go Live
    </li>
    <li class="sidebar-item ">
      <a href="checkout/customization.html" class=" " title="Customize your integration" aria-label="Customize your integration">
        Customize your integration
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="checkout/live.html" class=" " title="Integration checklist" aria-label="Integration checklist">
        Integration checklist
      </a>
    </li>
    <li class="category ">Client-only Integration
    </li>
    <li class="sidebar-item ">
      <a href="checkout/client.html" class=" " title="One-time payments" aria-label="One-time payments">
        One-time payments
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="checkout/client-subscription.html" class=" " title="Subscriptions" aria-label="Subscriptions">
        Subscriptions
      </a>
    </li>
    <li class="category ">Upgrade your integration
    </li>
    <li class="sidebar-item ">
      <a href="checkout/migration.html" class=" " title="Migrate from legacy Checkout" aria-label="Migrate from legacy Checkout">
        Migrate from legacy Checkout
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="checkout/migrating-prices.html" class=" " title="Migrate to use Prices" aria-label="Migrate to use Prices">
        Migrate to use Prices
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/sigma">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header sigma">
          <a class="">
            Sigma
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../sigma.html" class=" " aria-label="Stripe Sigma overview" title="Stripe Sigma overview">
        Overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sigma/transactions.html" class=" " aria-label="Querying transactions" title="Querying transactions">
        Transactions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sigma/billing.html" class=" " aria-label="Querying Billing" title="Querying Billing">
        Billing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sigma/connect.html" class=" " aria-label="Stripe Sigma for Connect platforms" title="Stripe Sigma for Connect platforms">
        Connect
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sigma/scheduled-queries.html" class=" " title="Scheduled queries" aria-label="Scheduled queries">
        Scheduled queries
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/atlas">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header atlas">
          <a class="">
            Atlas
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../atlas.html" class=" " aria-label="Stripe Atlas overview" title="Stripe Atlas overview">
        Overview
      </a>
    </li>
    <li class="category ">Company formation
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/company-types.html" class=" " aria-label="Stripe Atlas company types" title="Stripe Atlas company types">
        Company types
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/application.html" class=" " aria-label="Stripe Atlas application process" title="Stripe Atlas application process">
        Stripe Atlas application
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/issuing-stock.html" class=" " aria-label="Issuing stock to founders using Stripe Atlas" title="Issuing stock to founders using Stripe Atlas">
        Issuing stock to founders
      </a>
    </li>
    <li class="category ">Post company formation
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html" class=" " aria-label="Stripe Atlas next steps" title="Stripe Atlas next steps">
        Next steps
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#payments" class=" " aria-label="Stripe payments account" title="Stripe payments account">
        Stripe payments
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#bank-account" class=" " aria-label="Business bank account" title="Business bank account">
        Business bank account
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#the-atlas-forum" class=" " aria-label="Stripe Atlas Community" title="Stripe Atlas Community">
        Stripe Atlas Community
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#additional-resources" class=" " aria-label="Additional Stripe Atlas resources" title="Additional Stripe Atlas resources">
        Additional resources
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#partner-benefits" class=" " aria-label="Stripe Atlas partner benefits" title="Stripe Atlas partner benefits">
        Partner benefits
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#agent" class=" " aria-label="Stripe Atlas Registered Agent service" title="Stripe Atlas Registered Agent service">
        Registered Agent service
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#legal" class=" " aria-label="Legal resources" title="Legal resources">
        Legal
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#bookkeeping" class=" " aria-label="Bookkeeping resources" title="Bookkeeping resources">
        Bookkeeping
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#taxes" class=" " aria-label="Taxes resources" title="Taxes resources">
        Taxes
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/radar">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header radar">
          <a class="">
            Radar
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../radar.html" class=" " aria-label="Stripe Radar overview" title="Stripe Radar overview">
        Overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../radar/risk-evaluation.html" class=" " title="Risk evaluation" aria-label="Risk evaluation">
        Risk evaluation
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../radar/risk-settings.html" class=" " title="Risk settings" aria-label="Risk settings">
        Risk settings
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../radar/reviews.html" class=" " title="Reviews" aria-label="Reviews">
        Reviews
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../radar/reviews/auth-and-capture.html" class=" " aria-label="Reviewing uncaptured payments" title="Reviewing uncaptured payments">
        Uncaptured payments
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../radar/lists.html" class=" " title="Lists" aria-label="Lists">
        Lists
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../radar/rules.html" class=" " title="Rules" aria-label="Rules">
        Rules
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../radar/rules/reference.html" class=" " aria-label="Rules Reference" title="Rules Reference">
        Reference
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../radar/testing.html" class=" " aria-label="Testing Stripe Radar" title="Testing Stripe Radar">
        Testing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../radar/checklist.html" class=" " aria-label="Radar integration checklist" title="Radar integration checklist">
        Checklist
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../disputes.html" class=" " title="Disputes and fraud" aria-label="Disputes and fraud">
        Disputes and fraud
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../disputes/how-disputes-work.html" class=" " title="How disputes work" aria-label="How disputes work">
        How disputes work
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/responding.html" class=" " title="Responding to disputes" aria-label="Responding to disputes">
        Responding to disputes
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../disputes/api.html" class=" " title="Using the API" aria-label="Using the API">
        Using the API
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/categories.html" class=" " title="Categories" aria-label="Categories">
        Categories
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../disputes/withdrawing.html" class=" " title="Dispute withdrawals" aria-label="Dispute withdrawals">
        Dispute withdrawals
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/prevention.html" class=" " title="Fraud prevention" aria-label="Fraud prevention">
        Fraud prevention
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../disputes/prevention/identifying-fraud.html" class=" " title="Identifying fraud" aria-label="Identifying fraud">
        Identifying fraud
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/prevention/fraud-types.html" class=" " title="Types of fraud" aria-label="Types of fraud">
        Types of fraud
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/prevention/verification.html" class=" " title="Verification checks" aria-label="Verification checks">
        Verification checks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/prevention/best-practices.html" class=" " title="Best practices" aria-label="Best practices">
        Best practices
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/prevention/advanced-fraud-detection.html" class=" " title="Advanced fraud detection" aria-label="Advanced fraud detection">
        Advanced fraud detection
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../disputes/measuring.html" class=" " title="Measuring disputes" aria-label="Measuring disputes">
        Measuring disputes
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/connect.html" class=" " title="Disputes on Connect" aria-label="Disputes on Connect">
        Disputes on Connect
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/monitoring-programs.html" class=" " title="Monitoring programs" aria-label="Monitoring programs">
        Monitoring programs
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../disputes/monitoring-programs/faqs.html" class=" " title="FAQs" aria-label="FAQs">
        FAQs
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../disputes/match.html" class=" " title="High risk merchant lists" aria-label="High risk merchant lists">
        High risk merchant lists
      </a>
    </li>
</ul>

    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/issuing">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header issuing">
          <a class="">
            Issuing
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../issuing.html" class=" " aria-label="Issuing overview (Invite only)" title="Issuing overview (Invite only)">
        Overview
      </a>
    </li>
    <li class="category ">Getting started
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/cards.html" class=" " title="Creating cards" aria-label="Creating cards">
        Creating cards
      </a>
    </li>
    <li class="category ">Cards
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/cards/virtual.html" class=" " title="Virtual cards" aria-label="Virtual cards">
        Virtual cards
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/cards/physical.html" class=" " title="Physical cards" aria-label="Physical cards">
        Physical cards
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/cards/digital-wallets.html" class=" " title="Digital wallets" aria-label="Digital wallets">
        Digital wallets
      </a>
    </li>
    <li class="category ">Controls
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/controls/spending-controls.html" class=" " title="Spending controls" aria-label="Spending controls">
        Spending controls
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/controls/real-time-authorizations.html" class=" " title="Real-time authorizations" aria-label="Real-time authorizations">
        Real-time authorizations
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/controls/fraud-protection.html" class=" " title="Fraud protection" aria-label="Fraud protection">
        Fraud protection
      </a>
    </li>
    <li class="category ">Funding
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/funding/balance.html" class=" " title="Balance" aria-label="Balance">
        Balance
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/funding/connect.html" class=" " title="Connect" aria-label="Connect">
        Connect
      </a>
    </li>
    <li class="category ">Purchases
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/purchases/authorizations.html" class=" " title="Authorizations" aria-label="Authorizations">
        Authorizations
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/transactions.html" class=" " title="Transactions" aria-label="Transactions">
        Transactions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/purchases/disputes.html" class=" " title="Disputes" aria-label="Disputes">
        Disputes
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../issuing/testing.html" class=" " aria-label="Testing Stripe Issuing" title="Testing Stripe Issuing">
        Testing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/categories.html" class=" " title="Merchant categories" aria-label="Merchant categories">
        Merchant categories
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/terminal">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header terminal">
          <a class="">
            Terminal
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../terminal.html" class=" " aria-label="Stripe Terminal overview" title="Stripe Terminal overview">
        Overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/example-applications.html" class=" " aria-label="Example applications" title="Example applications">
        Example applications
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/designing-integration.html" class=" " aria-label="Learn which SDK and reader works best for you" title="Learn which SDK and reader works best for you">
        Designing an integration
      </a>
    </li>
    <li class="category ">Getting started
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/sdk/js.html" class=" " aria-label="Getting started with the JavaScript SDK" title="Getting started with the JavaScript SDK">
        JavaScript
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../terminal/js-api-reference.html" class=" " aria-label="API reference for the JavaScript SDK" title="API reference for the JavaScript SDK">
        JavaScript API reference
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../terminal/sdk/ios.html" class=" " aria-label="Getting started with the iOS SDK" title="Getting started with the iOS SDK">
        iOS
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/sdk/android.html" class=" " aria-label="Getting started with the Android SDK" title="Getting started with the Android SDK">
        Android
      </a>
    </li>
    <li class="category ">Readers
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers.html" class=" " aria-label="See reader types and learn how to set them up" title="See reader types and learn how to set them up">
        Reader setup
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../terminal/readers/bbpos-chipper2xbt.html" class=" " aria-label="The mobile POS reader" title="The mobile POS reader">
        BBPOS Chipper 2X BT
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers/verifone-p400.html" class=" " aria-label="The countertop, internet-enabled reader" title="The countertop, internet-enabled reader">
        Verifone P400
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers/connecting.html" class=" " aria-label="How to connect your app to a reader" title="How to connect your app to a reader">
        Connecting to a reader
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../terminal/readers/connecting/bbpos-chipper2xbt.html" class=" " aria-label="The mobile POS reader" title="The mobile POS reader">
        BBPOS Chipper 2X BT
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers/connecting/verifone-p400.html" class=" " aria-label="The countertop, internet-enabled reader" title="The countertop, internet-enabled reader">
        Verifone P400
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers/fleet-management.html" class=" " aria-label="Managing readers across several locations" title="Managing readers across several locations">
        Fleet management
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers/placing-orders.html" class=" " aria-label="Order readers from the Dashboard" title="Order readers from the Dashboard">
        Placing orders
      </a>
    </li>
    <li class="category ">Transactions
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/payments.html" class=" " aria-label="Collecting payments with Terminal" title="Collecting payments with Terminal">
        Collecting payments
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/payments/connect.html" class=" " aria-label="Using Terminal with Connect" title="Using Terminal with Connect">
        Connect platforms
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/payments/saving-cards.html" class=" " aria-label="Using Terminal with online payments" title="Using Terminal with online payments">
        Saving cards
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/payments/refunds.html" class=" " aria-label="Using Terminal to issue refunds" title="Using Terminal to issue refunds">
        Refunds
      </a>
    </li>
    <li class="category ">Checkout experience
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/checkout/cart-display.html" class=" " aria-label="Displaying cart details" title="Displaying cart details">
        Cart display
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/checkout/receipts.html" class=" " aria-label="Providing receipts with Terminal" title="Providing receipts with Terminal">
        Receipts
      </a>
    </li>
    <li class="category ">Global
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/canada.html" class=" " aria-label="Learn about collecting payments with Stripe Terminal in Canada" title="Learn about collecting payments with Stripe Terminal in Canada">
        Canada
      </a>
    </li>
    <li class="category ">Beta
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/beta-migration-guide.html" class=" " aria-label="Learn how to migrate from the Stripe Terminal beta" title="Learn how to migrate from the Stripe Terminal beta">
        Beta migration guide
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../terminal/testing.html" class=" " aria-label="Testing Stripe Terminal" title="Testing Stripe Terminal">
        Testing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/checklist.html" class=" " aria-label="Terminal integration checklist" title="Terminal integration checklist">
        Checklist
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/capital/faqs">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header capital">
          <a class="">
            Capital
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../capital/faqs.html" class=" " aria-label="Frequently asked questions" title="Frequently asked questions">
        Frequently asked questions
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/corporate-card">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header corporatecard">
          <a class="">
            Corporate Card
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../corporate-card.html" class=" " aria-label="Stripe Corporate Card Overview (Invite only)" title="Stripe Corporate Card Overview (Invite only)">
        Overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/applying.html" class=" " aria-label="Applying for Corporate Card" title="Applying for Corporate Card">
        Applying for Corporate Card
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/new-cards.html" class=" " aria-label="Creating new cards" title="Creating new cards">
        Creating new cards
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/rewards-and-benefits.html" class=" " aria-label="Rewards and benefits" title="Rewards and benefits">
        Rewards and benefits
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/dashboard.html" class=" " aria-label="Understanding the dashboard" title="Understanding the dashboard">
        Understanding the dashboard
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/card-management.html" class=" " aria-label="Card management" title="Card management">
        Card management
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/faqs.html" class=" " aria-label="Frequently asked questions" title="Frequently asked questions">
        Frequently asked questions
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/identity">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header identity">
          <a class="">
            Identity
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../identity.html" class=" " title="Overview" aria-label="Overview">
        Overview
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/dashboard">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header dashboard">
          <a class="">
            Dashboard
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../dashboard.html" class=" " aria-label="Dashboard overview" title="Dashboard overview">
        Overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../dashboard/search.html" class=" " aria-label="Performing searches in the Dashboard" title="Performing searches in the Dashboard">
        Search
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../dashboard/teams.html" class=" " aria-label="Teams and user roles" title="Teams and user roles">
        Teams
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../dashboard/sso.html" class=" " aria-label="Single sign-on" title="Single sign-on">
        Single sign-on
      </a>
      <ul class=" ">
</ul>

    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/account">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header account">
          <a class="">
            Account
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../account.html" class=" " aria-label="Managing your account" title="Managing your account">
        Your account
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../multiple-accounts.html" class=" " title="Multiple accounts" aria-label="Multiple accounts">
        Multiple accounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../statement-descriptors.html" class=" " title="Statement descriptors" aria-label="Statement descriptors">
        Statement descriptors
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../checklist.html" class=" " aria-label="Account checklist" title="Account checklist">
        Checklist
      </a>
    </li>
    <li class="category ">Customer emails
    </li>
    <li class="sidebar-item ">
      <a href="../email-domain.html" class=" " aria-label="Configure your sending domain for customer emails" title="Configure your sending domain for customer emails">
        Email domain
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/development">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header api">
          <a class="">
            Development
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../development.html" class=" " aria-label="Development quickstart" title="Development quickstart">
        Quickstart
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../security.html" class=" " aria-label="Integration security guide" title="Integration security guide">
        Security
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../security/data-migrations.html" class=" " aria-label="Data migrations at Stripe" title="Data migrations at Stripe">
        Data migrations
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../webhooks.html" class=" " title="Webhooks" aria-label="Webhooks">
        Webhooks
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../webhooks/build.html" class=" " aria-label="Build a webhook endpoint" title="Build a webhook endpoint">
        Build webhooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../webhooks/test.html" class=" " aria-label="Test a webhook endpoint" title="Test a webhook endpoint">
        Test webhooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../webhooks/signatures.html" class=" " aria-label="Check the webhook signatures" title="Check the webhook signatures">
        Check signatures
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../webhooks/best-practices.html" class=" " aria-label="Best practices for using webhooks" title="Best practices for using webhooks">
        Best practices
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../webhooks/go-live.html" class=" " aria-label="Take webhooks live" title="Take webhooks live">
        Go live
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../file-upload.html" class=" " title="File uploads" aria-label="File uploads">
        File uploads
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../error-handling.html" class=" " title="Error handling" aria-label="Error handling">
        Error handling
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../error-codes.html" class=" " title="Error codes" aria-label="Error codes">
        Error codes
      </a>
    </li>
    <li class="category ">API
    </li>
    <li class="sidebar-item ">
      <a href="../keys.html" class=" " aria-label="API keys" title="API keys">
        Keys
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../libraries.html" class=" " aria-label="API libraries" title="API libraries">
        Libraries
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../upgrades.html" class=" " aria-label="API upgrades" title="API upgrades">
        Upgrades
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../rate-limits.html" class=" " aria-label="Rate limits" title="Rate limits">
        Rate limits
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../card-testing.html" class=" " aria-label="Card testing" title="Card testing">
        Card testing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../ips.html" class=" " aria-label="Domains and IP addresses" title="Domains and IP addresses">
        Domains and IP addresses
      </a>
    </li>
    <li class="category ">Building With Stripe
    </li>
    <li class="sidebar-item ">
      <a href="../stripe-js.html" class=" " aria-label="Our UI components and how to use them" title="Our UI components and how to use them">
        Stripe's UI libraries
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../stripe-js/react.html" class=" " aria-label="React Stripe.js reference" title="React Stripe.js reference">
        React Stripe.js
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../mobile/ios/standard.html" class=" " aria-label="Use our basic iOS integration" title="Use our basic iOS integration">
        Prebuilt iOS UI
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../mobile/android/standard.html" class=" " aria-label="Use our basic Android integration" title="Use our basic Android integration">
        Prebuilt Android UI
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../stripe-cli.html" class=" " title="Stripe CLI" aria-label="Stripe CLI">
        Stripe CLI
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../stripe-cli/webhooks.html" class=" " aria-label="Listen to webhooks with the Stripe CLI" title="Listen to webhooks with the Stripe CLI">
        Listen to webhooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../stripe-cli/test/index.html" class=" " aria-label="Test and monitor your integration with the Stripe CLI" title="Test and monitor your integration with the Stripe CLI">
        Test and monitor your integration
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../stripe-cli/configure.html" class=" " aria-label="Configure the Stripe CLI" title="Configure the Stripe CLI">
        Configure
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../cli.html" class=" " aria-label="Stripe CLI reference" title="Stripe CLI reference">
        Reference
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../building-extensions.html" class=" " aria-label="Building extensions" title="Building extensions">
        Extensions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins.html" class=" " aria-label="Use a Stripe plugin in your website platform" title="Use a Stripe plugin in your website platform">
        Plugins
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../building-plugins.html" class=" " title="Building plugins" aria-label="Building plugins">
        Building plugins
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/wordpress.html" class=" " aria-label="Stripe plugin for WordPress" title="Stripe plugin for WordPress">
        WordPress
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/drupal.html" class=" " aria-label="Stripe plugin for Drupal" title="Stripe plugin for Drupal">
        Drupal
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/magento.html" class=" " aria-label="Magento 2 Plugin" title="Magento 2 Plugin">
        Magento
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../plugins/magento/install.html" class=" " aria-label="Installing the Magento 2 plugin" title="Installing the Magento 2 plugin">
        Installation
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/magento/configuration.html" class=" " aria-label="Configuring the Magento 2 plugin" title="Configuring the Magento 2 plugin">
        Configuration
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/magento/subscriptions.html" class=" " aria-label="Using subscriptions with the Magento 2 plugin" title="Using subscriptions with the Magento 2 plugin">
        Using subscriptions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../magento/admin.html" class=" " aria-label="Using the Magento Admin Panel" title="Using the Magento Admin Panel">
        Using the Admin Panel
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../magento/troubleshooting.html" class=" " aria-label="Troubleshooting the Magento 2 plugin" title="Troubleshooting the Magento 2 plugin">
        Troubleshooting
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../plugins/salesforce-commerce-cloud.html" class=" " aria-label="Stripe plugin for Salesforce Commerce Cloud" title="Stripe plugin for Salesforce Commerce Cloud">
        Salesforce Commerce Cloud
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/joomla.html" class=" " aria-label="Stripe plugin for Joomla" title="Stripe plugin for Joomla">
        Joomla
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl.html" class=" " aria-label="Mirakl Connector" title="Mirakl Connector">
        Mirakl
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/configuration.html" class=" " aria-label="Configure the Mirakl Connector" title="Configure the Mirakl Connector">
        Configuration
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/install.html" class=" " aria-label="Install the Mirakl Connector" title="Install the Mirakl Connector">
        Installation
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/onboarding-sellers.html" class=" " aria-label="Onboard your Mirakl Sellers" title="Onboard your Mirakl Sellers">
        Onboarding sellers
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/payments.html" class=" " aria-label="Accept payments for your Mirakl Orders" title="Accept payments for your Mirakl Orders">
        Payments
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/payouts.html" class=" " aria-label="Pay your Mirakl Sellers out" title="Pay your Mirakl Sellers out">
        Payouts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/reference.html" class=" " aria-label="Mirakl Connector reference" title="Mirakl Connector reference">
        Reference
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="https://stripe.com/partners/apps-and-extensions/collection/e-commerce" class=" external" target="blank" aria-label="Full list of Stripe partners" title="Full list of Stripe partners">
        No coding required
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="https://github.com/stripe-samples" class=" external" aria-label="Sample integrations built by Stripe" title="Sample integrations built by Stripe">
        Samples
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../development/checklist.html" class=" " aria-label="Development checklist" title="Development checklist">
        Checklist
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../checklist/website.html" class=" " aria-label="Website checklist" title="Website checklist">
        Website checklist
      </a>
    </li>
</ul>

    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/reports/financial-reports">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header reporting">
          <a class="">
            Reports
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../dashboard/reporting.html" class=" " title="Financial reports" aria-label="Financial reports">
        Financial reports
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../reports/financial-reports/report-schemas.html" class=" " title="Report schemas" aria-label="Report schemas">
        Report schemas
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../reports/financial-reports/api.html" class=" " title="Report API" aria-label="Report API">
        Report API
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../reports/quickbooks.html" class=" " aria-label="Export account activity to QuickBooks" title="Export account activity to QuickBooks">
        QuickBooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../reports/custom-reports.html" class=" " title="Custom reports" aria-label="Custom reports">
        Custom reports
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../reports/balance-transaction-types.html" class=" " title="Balance transaction types" aria-label="Balance transaction types">
        Balance transaction types
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../reporting/reporting-categories.html" class=" " title="Reporting categories" aria-label="Reporting categories">
        Reporting categories
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../reports/netsuite-connector.html" class=" " title="Stripe Connector for NetSuite" aria-label="Stripe Connector for NetSuite">
        Stripe Connector for NetSuite
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/partners">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header partners">
          <a class="">
            Partners
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../partners.html" class=" " aria-label="Understanding the Stripe Partner Program" title="Understanding the Stripe Partner Program">
        Partner Program basics
      </a>
    </li>
    <li class="category ">Verified Partner
    </li>
    <li class="sidebar-item ">
      <a href="../partners/requirements.html" class=" " aria-label="Verified partner requirements" title="Verified partner requirements">
        Verified partner requirements
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../partners/apps-and-extensions.html" class=" " aria-label="Partner gallery listing" title="Partner gallery listing">
        Partner gallery listing
      </a>
    </li>
    <li class="category ">Verification
    </li>
    <li class="sidebar-item ">
      <a href="../partners/verification.html" class=" " aria-label="Learn About the Stripe Service Partner Verification Program" title="Learn About the Stripe Service Partner Verification Program">
        Service Partner Verification
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/api">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header references">
          <a class="external">
            API Reference
          </a>
        </h1>
        
      </div>
  </div>
</nav>


  <div class="countries-container">
          <h1 class="country-selected">
  <a href="javascript:void(0);" class="item-country-selected">United States</a>
  <div class="popup available-country-list">
    <ul class="optionList">
      <li>
        <a class="" href="https://stripe.com/country?country=AU&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--au"></div>
          <div>
            <span class="country-name">
              Australia
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=AT&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--at"></div>
          <div>
            <span class="country-name">
              Austria
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=BE&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--be"></div>
          <div>
            <span class="country-name">
              Belgium
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=BG&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--bg"></div>
          <div>
            <span class="country-name">
              Bulgaria
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=CA&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--ca"></div>
          <div>
            <span class="country-name">
              Canada
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=CY&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--cy"></div>
          <div>
            <span class="country-name">
              Cyprus
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=CZ&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--cz"></div>
          <div>
            <span class="country-name">
              Czech Republic
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=DK&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--dk"></div>
          <div>
            <span class="country-name">
              Denmark
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=EE&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--ee"></div>
          <div>
            <span class="country-name">
              Estonia
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=FI&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--fi"></div>
          <div>
            <span class="country-name">
              Finland
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=FR&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--fr"></div>
          <div>
            <span class="country-name">
              France
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=DE&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--de"></div>
          <div>
            <span class="country-name">
              Germany
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=GR&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--gr"></div>
          <div>
            <span class="country-name">
              Greece
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=HK&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--hk"></div>
          <div>
            <span class="country-name">
              Hong Kong
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=IN&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--in"></div>
          <div>
            <span class="country-name">
              India
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=IE&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--ie"></div>
          <div>
            <span class="country-name">
              Ireland
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=IT&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--it"></div>
          <div>
            <span class="country-name">
              Italy
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=JP&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--jp"></div>
          <div>
            <span class="country-name">
              Japan
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=LV&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--lv"></div>
          <div>
            <span class="country-name">
              Latvia
            </span>
          </div>
        </a>
      </li>
    </ul>
    <ul class="optionList">
      <li>
        <a class="" href="https://stripe.com/country?country=LT&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--lt"></div>
          <div>
            <span class="country-name">
              Lithuania
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=LU&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--lu"></div>
          <div>
            <span class="country-name">
              Luxembourg
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=MY&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--my"></div>
          <div>
            <span class="country-name">
              Malaysia
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=MT&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--mt"></div>
          <div>
            <span class="country-name">
              Malta
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=MX&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--mx"></div>
          <div>
            <span class="country-name">
              Mexico
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=NL&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--nl"></div>
          <div>
            <span class="country-name">
              Netherlands
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=NZ&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--nz"></div>
          <div>
            <span class="country-name">
              New Zealand
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=NO&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--no"></div>
          <div>
            <span class="country-name">
              Norway
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=PL&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--pl"></div>
          <div>
            <span class="country-name">
              Poland
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=PT&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--pt"></div>
          <div>
            <span class="country-name">
              Portugal
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=RO&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--ro"></div>
          <div>
            <span class="country-name">
              Romania
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=SG&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--sg"></div>
          <div>
            <span class="country-name">
              Singapore
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=SK&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--sk"></div>
          <div>
            <span class="country-name">
              Slovakia
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=SI&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--si"></div>
          <div>
            <span class="country-name">
              Slovenia
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=ES&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--es"></div>
          <div>
            <span class="country-name">
              Spain
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=SE&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--se"></div>
          <div>
            <span class="country-name">
              Sweden
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=CH&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--ch"></div>
          <div>
            <span class="country-name">
              Switzerland
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class="" href="https://stripe.com/country?country=GB&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--gb"></div>
          <div>
            <span class="country-name">
              United Kingdom
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=" selected" href="https://stripe.com/country?country=US&amp;redirect=/docs/payments/accept-a-payment-synchronously" rel="nofollow">
          <div class="common-FlagIcon common-FlagIcon--us"></div>
          <div>
            <span class="country-name">
              United States
            </span>
          </div>
        </a>
      </li>
    </ul>
  </div>
</h1>

        <h1 class="language js-language-selector">
  <a href="javascript:void(0);" class="item-language">English</a>
  <div class="popup language-list">
    <ul class="optionList">
        <li>
          <a data-language="de" href="payment-intents/web-manual.html#" rel="nofollow"><span>Deutsch</span>
          </a>
        </li>
        <li>
          <a data-language="en" href="payment-intents/web-manual.html#" rel="nofollow" class="selected"><span>English</span>
          </a>
        </li>
        <li>
          <a data-language="es" href="payment-intents/web-manual.html#" rel="nofollow"><span>Espa&ntilde;ol (Espa&ntilde;a)</span>
          </a>
        </li>
        <li>
          <a data-language="fr" href="payment-intents/web-manual.html#" rel="nofollow"><span>Fran&ccedil;ais</span>
          </a>
        </li>
        <li>
          <a data-language="it" href="payment-intents/web-manual.html#" rel="nofollow"><span>Italiano</span>
          </a>
        </li>
        <li>
          <a data-language="ja" href="payment-intents/web-manual.html#" rel="nofollow"><span>&#26085;&#26412;&#35486;</span>
          </a>
        </li>
        <li>
          <a data-language="zh-CN" href="payment-intents/web-manual.html#" rel="nofollow"><span>&#31616;&#20307;&#20013;&#25991;</span>
          </a>
        </li>
    </ul>
  </div>
</h1>

    
  <h1 class="account"><a id="docs-sidebar-dashboard-link" href="https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fstripe.com%2Fdocs%2Fpayments%2Faccept-a-payment-synchronously">Sign In &rarr;</a></h1>

  </div>


        </div>
        <div id="content-wrapper" tabindex="0" class=" ">
          <div class="overlay"></div>
            <div class="search-results">
              <ul class="results"></ul>
            </div>
            <form class="search">
              <input type="search" placeholder="Search documentation...">
              <div class="search-after">
                <span class="search-text"></span>
                <span class="search-after-text--no-results">&mdash; No Results</span>
              </div>
            </form>
          


          <div class="article-container">
            <article id="content">
                
  <header>
  <h1 id="finalize-payments-on-the-server-span-classoptional-tagpayment-intents-apispan">Finalize payments on the server <span class="optional tag">Payment Intents API</span></h1>

  <p>Learn how to confirm a payment on your server and handle card authentication requests.</p>



<div class="tabs tabs-regular platform-tabs animated persists syncs" data-save-url="true" data-group="platform">
    
      <nav class="nav-tabs">
      
        <a>Web</a>
        <a>iOS</a>
        <a>Android</a>
  </nav>
  <div class="tabs-content">
    <div class="tabs-tab" id="web"><h2 id="web-overview">Overview</h2>

<aside class="note">
  <h3 id="migrating">Migrating?</h3>

  <p>If you&rsquo;re migrating an existing Stripe integration from the Charges API, follow the <a href="payment-intents/migration.html">migration guide</a>.</p>
</aside>

<p>For a wider range of support and future proofing, we strongly recommend our <a href="payment-intents/quickstart.html">standard integration</a> for asynchronous payments.</p>

<p>This guide lets you wait for the returned response from the client and finalize a payment on the server, without using webhooks or processing offline events. While it may seem simpler, this integration is difficult to scale as your business grows.</p>

<h5 id="limitations">Limitations</h5>

<ul>
  <li><strong>Only supports cards</strong>: You&rsquo;ll have to write more code to support ACH and popular regional payment methods separately.</li>
  <li><strong>Double-charge risk</strong>: By synchronously creating a new PaymentIntent each time your customer attempts to pay, you risk accidentally double-charging your customer. Be sure to follow <a href="../error-handling.html#safely-retrying-requests-with-idempotency">best practices</a>.</li>
  <li><strong>Extra trip to client</strong>: If your customer has a card with 3D Secure or is subject to regulations like Strong Customer Authentication, this integration requires an extra trip to the client to authenticate.</li>
</ul>

<p>If you don&rsquo;t mind these limitations, feel free to integrate. Otherwise, use the <a href="payment-intents/quickstart.html">standard integration</a>.</p>

<div id="take-a-payment-demo" class="accept-a-card-payment">
  <div class="sr-sample ">
    <div class="sr-header completed hidden"><h3>Payment completed</h3><div><button class="sr-pill" id="restart-btn">Restart demo</button></div></div>
    <div class="sr-header sample"><h4>What you're building</h4>
        <div>
          <button class="sr-pill" id="github-btn">Clone from GitHub</button>
          <button class="sr-pill" id="cli-btn">Clone with CLI</button>
        </div>
    </div>
    <div class="sr-root ">
      <div class="sr-main">
        <div class="sr-payment-form">
          <div class="sr-combo-inputs-row">
            <div class="sr-input sr-card-element" id="card-element"></div>
          </div>
          <div class="sr-field-error" id="card-errors" role="alert"></div>
          <button class="submit" id="submit">
            <div class="spinner hidden" id="spinner"></div>
            <span id="button-text">Pay Now</span><span id="order-amount"></span>
          </button>
          <button class="sr-pill fill-card" disabled><i></i><span>Prefill card details</span></button>
        </div>
        <div class="sr-result hidden">
          <p>
            Success! Here's the <code>PaymentIntent</code> that was returned by the Stripe API.
            The <code>status</code> of <code>succeeded</code> indicates that the payment was completed successfully.
          </p>
          <pre class="language-javascript"><code class="language-javascript"></code></pre>
        </div>
      </div>
    </div>
  </div>
  <div class="sr-clone cli hidden">
    <button class="close-sample-btn"></button>
    <p>Install the <a href="../stripe-cli.html#install">Stripe CLI</a>, then run the following in your terminal:</p>
    <div class="sr-terminal"><div>$</div>
      <div>stripe samples create accept-a-card-payment</div>
    </div>
    <p class="sr-subtext">Contains examples in PHP, Node.js, Ruby, Java, Python. The sample will be configured with your Stripe test key if you have set up the CLI with your Stripe account</p>
      <p class="sr-subtext">Select the <strong>without-webhooks</strong> integration type when prompted by the CLI.</p>
  </div>
  <div class="sr-clone github hidden">
    <button class="close-sample-btn"></button>
    <p>We have a set of samples on <a href="https://github.com/stripe-samples">GitHub</a> to help you get started.</p>
    <div class="sr-terminal"><div>$</div>
      <div>git clone https://github.com/stripe-samples/accept-a-card-payment</div>
    </div>
    <p class="sr-subtext">Contains examples in PHP, Node.js, Ruby, Java, Python.</p>
      <p class="sr-subtext">Open the <strong>without-webhooks</strong> directory after cloning to see this integration.</p>
  </div>
</div>



<div class="expando" aria-expanded="true">
  <a id="web-setup" href="payment-intents/web-manual.html#web-setup" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Set up Stripe">
        <span class="expando-left-text">1</span>
      Set up Stripe
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>First, you need a Stripe account. <a href="https://dashboard.stripe.com/register">Register now</a>.</p>

<p>Use our official libraries for access to the Stripe API from your application:</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="java">Java</a>
<a data-language="node">Node</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="ruby">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Available as a gem
sudo gem install stripe</code></div></pre>
<nav class="nav-filename icon-file">
<span>
Gemfile
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-ruby not-numbered"><div class="file-content-wrapper"><code># If you use bundler, you can add this line to your Gemfile
gem 'stripe'</code></div></pre>

</div>
  
<div class="code" data-language="python">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install through pip
pip install --upgrade stripe</code></div></pre>
<nav class="nav-filename icon-false">
<span>
PyPI
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Or find the Stripe package on http://pypi.python.org/pypi/stripe/</code></div></pre>

</div>
  
<div class="code" data-language="php">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install the PHP library via Composer
composer require stripe/stripe-php</code></div></pre>
<nav class="nav-filename icon-false">
<span>
Source
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Or download the source directly: https://github.com/stripe/stripe-php/releases</code></div></pre>

</div>
  
<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
build.gradle
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-java not-numbered"><div class="file-content-wrapper"><code>/*
 For Gradle, add the following dependency to your build.gradle and replace {VERSION} with
 the version number you want to use from
 - https://mvnrepository.com/artifact/com.stripe/stripe-java or
 - https://github.com/stripe/stripe-java/releases/latest
*/
implementation "com.stripe:stripe-java:{VERSION}"</code></div></pre>
<nav class="nav-filename icon-file">
<span>
pom.xml
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-xml not-numbered"><div class="file-content-wrapper"><code>&lt;!--
  For Maven, add the following dependency to your POM and replace {VERSION} with the
  version number you want to use from
  - https://mvnrepository.com/artifact/com.stripe/stripe-java or
  - https://github.com/stripe/stripe-java/releases/latest
--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.stripe&lt;/groupId&gt;
  &lt;artifactId&gt;stripe-java&lt;/artifactId&gt;
  &lt;version&gt;{VERSION}&lt;/version&gt;
&lt;/dependency&gt;</code></div></pre>
<nav class="nav-filename icon-false">
<span>
Other environments
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># For other environments, manually install the following JARs:
# - The Stripe JAR from https://github.com/stripe/stripe-java/releases/latest
# - Google Gson from https://github.com/google/gson</code></div></pre>

</div>
  
<div class="code" data-language="node">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install via npm
npm install --save stripe</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install stripe-go
go get -u github.com/stripe/stripe-go</code></div></pre>
<nav class="nav-filename icon-file">
<span>
app.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-go not-numbered"><div class="file-content-wrapper"><code>// Then import the package
import (
  "github.com/stripe/stripe-go/v71"
)</code></div></pre>

</div>
  
<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install via dotnet
dotnet add package Stripe.net
dotnet restore</code></div></pre>
<nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Or install via NuGet
PM&gt; Install-Package Stripe.net</code></div></pre>

</div>


</div>
</div>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="web-collect-card-details" href="payment-intents/web-manual.html#web-collect-card-details" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Collect card details">
        <span class="expando-left-text">2</span>
      Collect card details
        <span class="tag optional">Client-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    
<p>Collect card information on the client with Stripe.js and Stripe Elements. Elements is a set of prebuilt UI components for collecting and validating card number, ZIP code, and expiration date.</p>
<p>A Stripe Element contains an iframe that securely sends the payment information to Stripe over a HTTPS connection. The checkout page address must also start with https:// rather than http:// for your integration to work.</p>

<p>You can test your integration without using HTTPS. <a href="../security.html#tls">Enable it</a> when you&rsquo;re ready to accept live payments. </p>


<div class="tabs tabs-regular  animated persists syncs" data-group="html-or-react">
    
      <nav class="nav-tabs">
      
        <a>HTML + JS</a>
        <a>React</a>
  </nav>
  <div class="tabs-content">
    
<div class="tabs-tab" id="html"><p>Include the <a href="../stripe-js/reference.html">Stripe.js</a> script in the head of every page on your site. Elements is automatically available as a feature of Stripe.js.</p>

<div class="code" data-language="html">
  <pre class="language-html numbered"><div class="file-content-wrapper"><code>&lt;script src="https://js.stripe.com/v3/"&gt;&lt;/script&gt;
</code></div></pre>

</div>

<p>Including the script on every page of your site lets you take advantage of Stripe&rsquo;s <a href="../radar.html">advanced fraud functionality</a> and ability to detect anomalous browsing behavior.</p>

<h3 id="build-the-payment-form">Build the payment form</h3>

<p>To securely collect card details from your customers, Elements creates UI components for you that are hosted by Stripe. They are then placed into your payment form as an iframe. To determine where to insert these components, create empty DOM elements (containers) with unique IDs within your payment form.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="html">HTML</a>
<a data-language="css">CSS</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="html">
  <nav class="nav-filename icon-file">
<span>
index.html
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-html numbered"><div class="file-content-wrapper"><code>&lt;form id='payment-form'&gt;
  &lt;label&gt;
    Card details
    &lt;!-- placeholder for Elements --&gt;
    &lt;div id="card-element"&gt;&lt;/div&gt;
  &lt;/label&gt;
  &lt;button type="submit"&gt;Submit Payment&lt;/button&gt;
&lt;/form&gt;
</code></div></pre>

</div>
<div class="code" data-language="css">
  <nav class="nav-filename icon-file">
<span>
CardStyles.css
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-css numbered"><div class="file-content-wrapper"><code>/**
* Shows how you can use CSS to style your Element's container.
* These classes are added to your Stripe Element by default.
* You can override these classNames by using the options passed
* to the `card` elemenent.
* https://stripe.com/docs/js/elements_object/create_element?type=card#elements_create-options-classes
*/

.StripeElement {
  height: 40px;
  padding: 10px 12px;
  width: 100%;
  color: #32325d;
  background-color: white;
  border: 1px solid transparent;
  border-radius: 4px;

  box-shadow: 0 1px 3px 0 #e6ebf1;
  -webkit-transition: box-shadow 150ms ease;
  transition: box-shadow 150ms ease;
}

.StripeElement--focus {
  box-shadow: 0 1px 3px 0 #cfd7df;
}

.StripeElement--invalid {
  border-color: #fa755a;
}

.StripeElement--webkit-autofill {
  background-color: #fefde5 !important;
}
</code></div></pre>

</div>

</div>
</div>

<p>Next, create an instance of the <a href="../stripe-js/reference.html#stripe-function">Stripe object</a>, providing your publishable <a href="../keys.html">API key</a> as the first parameter. Afterwards, create an instance of the <a href="../stripe-js/reference.html#stripe-elements">Elements object</a> and use it to <a href="../stripe-js/reference.html#element-mount">mount</a> a Card element in the relevant placeholder in the page.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="javascript">JavaScript</a>
<a data-language="javascript_esnext">JavaScript (ESNext)</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="javascript">
  <nav class="nav-filename icon-file">
<span>
script.js
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/client/web/script.js#L30-L50" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered"><div class="file-content-wrapper"><code>var stripe = Stripe('pk_test_TYooMQauvdEDq54NiTphI7jx');

var elements = stripe.elements();

// Set up Stripe.js and Elements to use in checkout form
var style = {
  base: {
    color: "#32325d",
    fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
    fontSmoothing: "antialiased",
    fontSize: "16px",
    "::placeholder": {
      color: "#aab7c4"
    }
  },
  invalid: {
    color: "#fa755a",
    iconColor: "#fa755a"
  },
};

var cardElement = elements.create('card', {style: style});
cardElement.mount('#card-element');</code></div></pre>

</div>
<div class="code" data-language="javascript_esnext">
  <nav class="nav-filename icon-file">
<span>
script.js
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/client/web/script.js#L30-L50" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered"><div class="file-content-wrapper"><code>const stripe = Stripe('pk_test_TYooMQauvdEDq54NiTphI7jx');

const elements = stripe.elements();

// Set up Stripe.js and Elements to use in checkout form
const style = {
  base: {
    color: "#32325d",
    fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
    fontSmoothing: "antialiased",
    fontSize: "16px",
    "::placeholder": {
      color: "#aab7c4"
    }
  },
  invalid: {
    color: "#fa755a",
    iconColor: "#fa755a"
  },
};

const cardElement = elements.create('card', {style});
cardElement.mount('#card-element');</code></div></pre>

</div>

</div>
</div>

<p>The <code>card</code> Element simplifies the form and minimizes the number of fields required by inserting a single, flexible input field that securely collects all necessary card details.</p>

<p>Otherwise, combine <code>cardNumber</code>, <code>cardExpiry</code>, and <code>cardCvc</code> Elements for a flexible, multi-input card form.</p>

<aside class="important info">
  <p>Always collect a postal code to increase card acceptance rates and reduce fraud.</p>

  <p>The single input <code>card</code> Element automatically collects and sends the customer&rsquo;s postal code to Stripe.
If you build your payment form with multi-input card Elements (<code>cardNumber</code>, <code>cardExpiry</code>, <code>cardCvc</code>), add a separate input field for the customer&rsquo;s postal code. </p>
</aside>

<h3 id="create-a-paymentmethod">Create a PaymentMethod</h3>

<p>Finally, use <a href="../js/payment_intents/create_payment_method.html">stripe.createPaymentMethod</a> on your client to collect the card details and create a <a href="../api/payment_methods.html">PaymentMethod</a> when the user clicks the submit button.</p>


<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="javascript">JavaScript</a>
<a data-language="javascript_esnext">JavaScript (ESNext)</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="javascript">
  <nav class="nav-filename icon-file">
<span>
script.js
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/client/web/script.js#L93-L100" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered"><div class="file-content-wrapper"><code>var form = document.getElementById('payment-form');

form.addEventListener('submit', function(event) {
  // We don't want to let default form submission happen here,
  // which would refresh the page.
  event.preventDefault();

  stripe.createPaymentMethod({
    type: 'card',
    card: cardElement,
    billing_details: {
      // Include any additional collected billing details.
      name: 'Jenny Rosen',
    },
  }).then(stripePaymentMethodHandler);
});
</code></div></pre>

</div>
<div class="code" data-language="javascript_esnext">
  <nav class="nav-filename icon-file">
<span>
script.js
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/client/web/script.js#L93-L100" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered"><div class="file-content-wrapper"><code>const form = document.getElementById('payment-form');

form.addEventListener('submit', async (event) =&gt; {
  // We don't want to let default form submission happen here,
  // which would refresh the page.
  event.preventDefault();

  const result = await stripe.createPaymentMethod({
    type: 'card',
    card: cardElement,
    billing_details: {
      // Include any additional collected billing details.
      name: 'Jenny Rosen',
    },
  })

  stripePaymentMethodHandler(result);
});
</code></div></pre>

</div>

</div>
</div></div><div class="tabs-tab" id="react">

<div class="tabs tabs-regular  animated">
    
      <nav class="nav-tabs">
      
        <a>npm</a>
        <a>umd</a>
  </nav>
  <div class="tabs-content">
    <div class="tabs-tab" id="npm"><p>Install React Stripe.js and the Stripe.js loader from the <a href="https://www.npmjs.com/package/@stripe/react-stripe-js">npm public registry</a>.</p><div class="code" data-language="html">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-html numbered"><div class="file-content-wrapper"><code>npm install --save @stripe/react-stripe-js @stripe/stripe-js</code></div></pre>

</div>
</div><div class="tabs-tab" id="umd"><p>We also provide a UMD build for sites that are not using npm or modules.</p>

<p>Include the Stripe.js script which exports a global <code>Stripe</code> function and the UMD build of React Stripe.js which exports a global <code>ReactStripe</code> object. Always load the Stripe.js script directly from <strong>js.stripe.com</strong> to remain PCI compliant. Do not include the script in a bundle or host a copy of it yourself.</p><div class="code" data-language="html">
  <pre class="language-html numbered"><div class="file-content-wrapper"><code>&lt;!-- Stripe.js --&gt;
&lt;script src="https://js.stripe.com/v3/"&gt;&lt;/script&gt;

&lt;!-- React Stripe.js development build --&gt;
&lt;script src="https://unpkg.com/@stripe/react-stripe-js@latest/dist/react-stripe.umd.js"&gt;&lt;/script&gt;

&lt;!-- When you are ready to deploy your site to production, remove the
     above development script, and include the following production build. --&gt;
&lt;script src="https://unpkg.com/@stripe/react-stripe-js@latest/dist/react-stripe.umd.min.js"&gt;&lt;/script&gt;</code></div></pre>

</div>
</div>
  </div>
</div>

<aside class="important neutral">
<p>If you are looking for a quick way to try out React Stripe.js without needing to scaffold a new project, start with this <a href="https://codesandbox.io/s/react-stripe-official-q1loc?fontsize=14&amp;hidenavigation=1&amp;theme=dark">demo in CodeSandbox</a>.</p></aside>




<h3 id="add-stripejs-and-elements-to-your-page">Add Stripe.js and Elements to your page</h3>

<p>To use Element components, wrap the root of your React app in an <a href="../stripe-js/react.html#elements-provider">Elements provider</a>. Call <code>loadStripe</code> with your publishable key and pass the returned <code>Promise</code> to the <code>Elements</code> provider.</p>
<div class="code" data-language="jsx">
  <nav class="nav-filename icon-file">
<span>
index.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-jsx numbered"><div class="file-content-wrapper"><code>import React from 'react';
import ReactDOM from 'react-dom';
import {Elements} from '@stripe/react-stripe-js';
import {loadStripe} from '@stripe/stripe-js';

import CheckoutForm from './CheckoutForm';

// Make sure to call `loadStripe` outside of a component&rsquo;s render to avoid
// recreating the `Stripe` object on every render.
const stripePromise = loadStripe("pk_test_TYooMQauvdEDq54NiTphI7jx");

function App() {
  return (
    &lt;Elements stripe={stripePromise}&gt;
      &lt;CheckoutForm /&gt;
    &lt;/Elements&gt;
  );
};

ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));
</code></div></pre>

</div>


<h3 id="add-and-configure-a-cardelement-component">Add and configure a <code>CardElement</code> component</h3>

<p>Use individual Element components, such as <code>CardElement</code>, to
build your form.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="jsx">JSX</a>
<a data-language="css">CSS</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="jsx">
  <nav class="nav-filename icon-file">
<span>
CardSection.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-jsx numbered"><div class="file-content-wrapper"><code>/**
* Use the CSS tab above to style your Element's container.
*/
import React from 'react';
import {CardElement} from '@stripe/react-stripe-js';
import './CardSectionStyles.css'

const CARD_ELEMENT_OPTIONS = {
  style: {
    base: {
      color: "#32325d",
      fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
      fontSmoothing: "antialiased",
      fontSize: "16px",
      "::placeholder": {
        color: "#aab7c4",
      },
    },
    invalid: {
      color: "#fa755a",
      iconColor: "#fa755a",
    },
  },
};

function CardSection() {
  return (
    &lt;label&gt;
      Card details
      &lt;CardElement options={CARD_ELEMENT_OPTIONS} /&gt;
    &lt;/label&gt;
  );
};

export default CardSection;
</code></div></pre>

</div>
<div class="code" data-language="css">
  <nav class="nav-filename icon-file">
<span>
CardSectionStyles.css
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-css numbered"><div class="file-content-wrapper"><code>/**
* Shows how you can use CSS to style your Element's container.
* These classes are added to your Stripe Element by default.
* You can override these classNames by using the options passed
* to the CardElement component.
* https://stripe.com/docs/js/elements_object/create_element?type=card#elements_create-options-classes
*/

.StripeElement {
  height: 40px;
  padding: 10px 12px;
  width: 100%;
  color: #32325d;
  background-color: white;
  border: 1px solid transparent;
  border-radius: 4px;

  box-shadow: 0 1px 3px 0 #e6ebf1;
  -webkit-transition: box-shadow 150ms ease;
  transition: box-shadow 150ms ease;
}

.StripeElement--focus {
  box-shadow: 0 1px 3px 0 #cfd7df;
}

.StripeElement--invalid {
  border-color: #fa755a;
}

.StripeElement--webkit-autofill {
  background-color: #fefde5 !important;
}
</code></div></pre>

</div>

</div>
</div>

<p>Elements are completely customizable. You can <a href="../js/elements_object/create_element%3Ftype=card.html#elements_create-options">style Elements</a> to match the look and feel of your site,
providing a seamless checkout experience for your customers.
It&rsquo;s also possible to style various input states, for example when the Element has focus.</p>

<p>The <code>CardElement</code> simplifies the form and minimizes the number of required fields by inserting a single, flexible input field that securely collects all necessary card and billing details.
Otherwise, combine <code>CardNumberElement</code>, <code>CardExpiryElement</code>, and <code>CardCvcElement</code> elements for a flexible, multi-input card form.</p>

<aside class="important info">
  <p>Always collect a postal code to increase card acceptance rates and reduce fraud.</p>

  <p>The single input <code>CardElement</code> automatically collects and sends the customer&rsquo;s postal code to Stripe.
If you build your payment form with multi-input card Elements, add a separate <code>&lt;input&gt;</code> field for the customer&rsquo;s postal code.</p>
</aside>
<h3 id="create-a-paymentmethod">Create a PaymentMethod</h3>
<p>In your payment form&rsquo;s submit handler, use <a href="../js/payment_intents/create_payment_method.html">stripe.createPaymentMethod</a> to collect the card details and create a <a href="../api/payment_methods.html">PaymentMethod</a>.</p>
<p>To call <code>stripe.createPaymentMethod</code> from your payment form component, use the <a href="../stripe-js/react.html#usestripe-hook">useStripe</a> and <a href="../stripe-js/react.html#useelements-hook">useElements</a> hooks.</p>

<p>If you prefer traditional class components over hooks, you can instead use an <a href="../stripe-js/react.html#elements-consumer">ElementsConsumer</a>.</p>

<div class="tabs tabs-regular  animated persists">
    
      <nav class="nav-tabs">
      
        <a>Hooks</a>
        <a>Class Components</a>
  </nav>
  <div class="tabs-content">
    <div class="tabs-tab" id="hooks"><div class="code" data-language="jsx">
  <nav class="nav-filename icon-file">
<span>
CheckoutForm.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-jsx numbered highlighted-line" data-highlight-lines="21,22,23,24,25,26,27"><div class="file-content-wrapper"><code>import React from 'react';
import {useStripe, useElements, CardElement} from '@stripe/react-stripe-js';

import CardSection from './CardSection';

export default function CheckoutForm() {
  const stripe = useStripe();
  const elements = useElements();

  const handleSubmit = async (event) =&gt; {
    // We don't want to let default form submission happen here,
    // which would refresh the page.
    event.preventDefault();

    if (!stripe || !elements) {
      // Stripe.js has not yet loaded.
      // Make sure to disable form submission until Stripe.js has loaded.
      return;
    }

    const result = await stripe.createPaymentMethod({
      type: 'card',
      card: elements.getElement(CardElement),
      billing_details: {
        // Include any additional collected billing details.
        name: 'Jenny Rosen',
      },
    });

    stripePaymentMethodHandler(result);
  };

  return (
    &lt;form onSubmit={this.handleSubmit}&gt;
      &lt;CardSection /&gt;
      &lt;button type="submit" disabled={!stripe}&gt;
        Submit Payment
      &lt;/button&gt;
    &lt;/form&gt;
  );
}
</code></div></pre>

</div>
</div><div class="tabs-tab" id="class-components"><div class="code" data-language="jsx">
  <nav class="nav-filename icon-file">
<span>
CheckoutForm.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-jsx numbered highlighted-line" data-highlight-lines="20,21,22,23,24,25,26"><div class="file-content-wrapper"><code>import React from 'react';
import {ElementsConsumer, CardElement} from '@stripe/react-stripe-js';

import CardSection from './CardSection';

class CheckoutForm extends React.Component {
  handleSubmit = async (event) =&gt; {
    // We don't want to let default form submission happen here,
    // which would refresh the page.
    event.preventDefault();

    const {stripe, elements} = this.props

    if (!stripe || !elements) {
      // Stripe.js has not yet loaded.
      // Make  sure to disable form submission until Stripe.js has loaded.
      return;
    }

    const result = await stripe.createPaymentMethod({
      type: 'card',
      card: elements.getElement(CardElement),
      billing_details: {
        // Include any additional collected billing details.
        name: 'Jenny Rosen',
      },
    });

    stripePaymentMethodHandler(result);
  };

  render() {
    const {stripe} = this.props;

    return (
      &lt;form onSubmit={this.handleSubmit}&gt;
        &lt;CardSection /&gt;
        &lt;button type="submit" disabled={!stripe}&gt;
          Submit Payment
        &lt;/button&gt;
      &lt;/form&gt;
    );
  }
}

export default function InjectedCheckoutForm() {
  return (
    &lt;ElementsConsumer&gt;
      {({stripe, elements}) =&gt; (
        &lt;CheckoutForm  stripe={stripe} elements={elements} /&gt;
      )}
    &lt;/ElementsConsumer&gt;
  );
}
</code></div></pre>

</div>
</div>
  </div>
</div>

</div>
  </div>
</div>

  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="web-send-to-server" href="payment-intents/web-manual.html#web-send-to-server" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Submit the PaymentMethod to your server">
        <span class="expando-left-text">3</span>
      Submit the PaymentMethod to your server
        <span class="tag optional">Client-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>If the PaymentMethod was created successfully, send its ID to your server.</p><div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="javascript">JavaScript</a>
<a data-language="javascript_esnext">JavaScript (ESNext)</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="javascript">
  <nav class="nav-filename icon-file">
<span>
script.js
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/client/web/script.js#L59-L85" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered"><div class="file-content-wrapper"><code>function stripePaymentMethodHandler(result) {
  if (result.error) {
    // Show error in payment form
  } else {
    // Otherwise send paymentMethod.id to your server (see Step 4)
    fetch('/pay', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        payment_method_id: result.paymentMethod.id,
      })
    }).then(function(result) {
      // Handle server response (see Step 4)
      result.json().then(function(json) {
        handleServerResponse(json);
      })
    });
  }
}
</code></div></pre>

</div>
<div class="code" data-language="javascript_esnext">
  <nav class="nav-filename icon-file">
<span>
script.js
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/client/web/script.js#L59-L85" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered"><div class="file-content-wrapper"><code>const stripePaymentMethodHandler = async (result) =&gt; {
  if (result.error) {
    // Show error in payment form
  } else {
    // Otherwise send paymentMethod.id to your server (see Step 4)
    const res = await fetch('/pay', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        payment_method_id: result.paymentMethod.id,
      }),
    })
    const paymentResponse = await res.json();

    // Handle server response (see Step 4)
    handleServerResponse(paymentResponse);
  }
}
</code></div></pre>

</div>

</div>
</div>

  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="web-create-payment-intent" href="payment-intents/web-manual.html#web-create-payment-intent" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Create a PaymentIntent">
        <span class="expando-left-text">4</span>
      Create a PaymentIntent
        <span class="tag optional">Server-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>Set up an endpoint on your server to receive the request. This endpoint will also be used in <a href="payment-intents/web-manual.html#confirm-again">Step 6</a> to handle cards that require an extra step of authentication.</p>

<p><a href="payment-intents/creating-payment-intents.html#creating-a-paymentintent">Create a new PaymentIntent</a> with the ID of the <a href="../api/payment_methods/object.html">PaymentMethod</a> created on your client. You can <span class="tooltip-wrapper"><span class="tooltip-content definition">confirm</span><template class="tooltip"><span class="definition"><em>Confirming</em> a PaymentIntent indicates that the customer intends to pay with the current or provided payment method. Upon confirmation, the PaymentIntent attempts to initiate a payment.</span></template></span> the PaymentIntent by setting <a href="../api/payment_intents/create.html#create_payment_intent-confirm">confirm</a> property to true when the PaymentIntent is created or by calling <a href="../api/payment_intents/confirm.html">confirm</a> after creation. <a href="capture-later.html">Separate authorization and capture</a> is also supported for card payments.</p>

<p>If the payment requires additional actions such as 3D Secure authentication, the PaymentIntent&rsquo;s status will be set to <code>requires_action</code>. If the payment failed, the status is set back to <code>requires_payment_method</code> and you should show an error to your user. If the payment doesn&rsquo;t require any additional authentication then a charge is created and the PaymentIntent status is set to <code>succeeded</code>.</p>

<aside class="important neutral">
  <p>On versions of the API before <a href="../upgrades.html#2019-02-11">2019-02-11</a>, <code>requires_payment_method</code> appears as <code>requires_source</code> and <code>requires_action</code> appears as <code>requires_source_action</code>.</p>
</aside>


<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="curl">curl</a>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="java">Java</a>
<a data-language="node">Node</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="curl">
  <pre class="language-curl numbered"><div class="file-content-wrapper"><code>curl https://api.stripe.com/v1/payment_intents \
  -u sk_test_4eC39HqLyjWDarjtT1zdp7dc: \
  -d payment_method="{{PAYMENT_METHOD_ID}}" \
  -d amount=1099 \
  -d currency=usd \
  -d confirmation_method=manual \
  -d confirm=true
</code></div></pre>

</div>

<div class="code" data-language="ruby">
  <nav class="nav-filename icon-file">
<span>
server.rb
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/server/ruby/server.rb#L34" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-ruby numbered highlighted-line" data-highlight-lines="7,8,9,10,11,12,13,14,31,32,33,34,35,36,37,38"><div class="file-content-wrapper"><code># AJAX endpoint when `/pay` is called from client
post '/pay' do
  data = JSON.parse(request.body.read.to_s)

  begin
    if data['payment_method_id']
      # Create the PaymentIntent
      intent = Stripe::PaymentIntent.create(
        payment_method: data['payment_method_id'],
        amount: 1099,
        currency: 'usd',
        confirmation_method: 'manual',
        confirm: true,
      )
    elsif data['payment_intent_id']
      intent = Stripe::PaymentIntent.confirm(data['payment_intent_id'])
    end
  rescue Stripe::CardError =&gt; e
    # Display error on client
    return [200, { error: e.message }.to_json]
  end

  return generate_response(intent)
end

def generate_response(intent)
  # Note that if your API version is before 2019-02-11, 'requires_action'
  # appears as 'requires_source_action'.
  if intent.status == 'requires_action' &amp;&amp;
      intent.next_action.type == 'use_stripe_sdk'
    # Tell the client to handle the action
    [
      200,
      {
        requires_action: true,
        payment_intent_client_secret: intent.client_secret
      }.to_json
    ]
  elsif intent.status == 'succeeded'
    # The payment didn&rsquo;t need any additional actions and is completed!
    # Handle post-payment fulfillment
    [200, { success: true }.to_json]
  else
    # Invalid status
    return [500, { error: 'Invalid PaymentIntent status' }.to_json]
  end
end
</code></div></pre>

</div>

<div class="code" data-language="python">
  <nav class="nav-filename icon-file">
<span>
server.py
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/server/python/server.py#L45" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-python numbered highlighted-line" data-highlight-lines="9,10,11,12,13,14,15,16,29,30,31,32,33"><div class="file-content-wrapper"><code># AJAX endpoint when `/pay` is called from client
@app.route('/pay', methods=['POST'])
def pay():
  data = request.get_json()
  intent = None

  try:
    if 'payment_method_id' in data:
      # Create the PaymentIntent
      intent = stripe.PaymentIntent.create(
        payment_method = data['payment_method_id'],
        amount = 1099,
        currency = 'usd',
        confirmation_method = 'manual',
        confirm = True,
      )
    elif 'payment_intent_id' in data:
      intent = stripe.PaymentIntent.confirm(data['payment_intent_id'])
  except stripe.error.CardError as e:
    # Display error on client
    return json.dumps({'error': e.user_message}), 200

  return generate_response(intent)

def generate_response(intent):
  # Note that if your API version is before 2019-02-11, 'requires_action'
  # appears as 'requires_source_action'.
  if intent.status == 'requires_action' and intent.next_action.type == 'use_stripe_sdk':
    # Tell the client to handle the action
    return json.dumps({
      'requires_action': True,
      'payment_intent_client_secret': intent.client_secret,
    }), 200
  elif intent.status == 'succeeded':
    # The payment didn&rsquo;t need any additional actions and completed!
    # Handle post-payment fulfillment
    return json.dumps({'success': True}), 200
  else:
    # Invalid status
    return json.dumps({'error': 'Invalid PaymentIntent status'}), 500
</code></div></pre>

</div>

<div class="code" data-language="php">
  <nav class="nav-filename icon-file">
<span>
server.php
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/server/php/public/pay.php#L3" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-php numbered highlighted-line" data-highlight-lines="16,17,18,19,20,21,22,23,44,45,46,47,48"><div class="file-content-wrapper"><code>&lt;?php
  # vendor using composer
  require_once('vendor/autoload.php');

  \Stripe\Stripe::setApiKey(getenv('STRIPE_SECRET_KEY'));

  header('Content-Type: application/json');

  # retrieve json from POST body
  $json_str = file_get_contents('php://input');
  $json_obj = json_decode($json_str);

  $intent = null;
  try {
    if (isset($json_obj-&gt;payment_method_id)) {
      # Create the PaymentIntent
      $intent = \Stripe\PaymentIntent::create([
        'payment_method' =&gt; $json_obj-&gt;payment_method_id,
        'amount' =&gt; 1099,
        'currency' =&gt; 'usd',
        'confirmation_method' =&gt; 'manual',
        'confirm' =&gt; true,
      ]);
    }
    if (isset($json_obj-&gt;payment_intent_id)) {
      $intent = \Stripe\PaymentIntent::retrieve(
        $json_obj-&gt;payment_intent_id
      );
      $intent-&gt;confirm();
    }
    generateResponse($intent);
  } catch (\Stripe\Exception\ApiErrorException $e) {
    # Display error on client
    echo json_encode([
      'error' =&gt; $e-&gt;getMessage()
    ]);
  }

  function generateResponse($intent) {
    # Note that if your API version is before 2019-02-11, 'requires_action'
    # appears as 'requires_source_action'.
    if ($intent-&gt;status == 'requires_action' &amp;&amp;
        $intent-&gt;next_action-&gt;type == 'use_stripe_sdk') {
      # Tell the client to handle the action
      echo json_encode([
        'requires_action' =&gt; true,
        'payment_intent_client_secret' =&gt; $intent-&gt;client_secret
      ]);
    } else if ($intent-&gt;status == 'succeeded') {
      # The payment didn&rsquo;t need any additional actions and completed!
      # Handle post-payment fulfillment
      echo json_encode([
        "success" =&gt; true
      ]);
    } else {
      # Invalid status
      http_response_code(500);
      echo json_encode(['error' =&gt; 'Invalid PaymentIntent status']);
    }
  }
?&gt;
</code></div></pre>

</div>

<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
Server.java
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/server/java/src/main/java/com/stripe/sample/Server.java#L133" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-java numbered highlighted-line" data-highlight-lines="51,52,53,54,55,56,57,58,83,84,85"><div class="file-content-wrapper"><code>package com.stripe.generator;

import static spark.Spark.post;

import com.google.gson.Gson;
import com.google.gson.annotations.SerializedName;
import com.stripe.Stripe;
import com.stripe.model.PaymentIntent;

import com.stripe.param.PaymentIntentCreateParams;
import java.util.HashMap;
import java.util.Map;
import spark.Request;
import spark.Response;
import spark.Route;

public class MyApp {

  static class ConfirmPaymentRequest {
    @SerializedName("payment_method_id")
    String paymentMethodId;
    @SerializedName("payment_intent_id")
    String paymentIntentId;

    public String getPaymentMethodId() {
      return paymentMethodId;
    }

    public String getPaymentIntentId() {
      return paymentIntentId;
    }
  }

  /**
   * Your application.
   */
  public static void main(String[] args) {

    Stripe.apiKey = System.getenv("STRIPE_SECRET_KEY");

    post(new Route("/pay") {

      @Override
      public Object handle(Request request, Response response) {
        Gson gson = new Gson();
        ConfirmPaymentRequest confirmRequest =
            gson.fromJson(request.body(), ConfirmPaymentRequest.class);
        PaymentIntent intent;
        try {
          if (confirmRequest.getPaymentMethodId() != null) {
            PaymentIntentCreateParams createParams = PaymentIntentCreateParams.builder()
                .setAmount(1099)
                .setCurrency("usd")
                .setConfirm(true)
                .setPaymentMethod(confirmRequest.paymentMethodId)
                .setConfirmationMethod(PaymentIntentCreateParams.ConfirmationMethod.MANUAL)
                .build();
            intent = PaymentIntent.create(createParams);
          } else if (confirmRequest.getPaymentIntentId() != null) {
            intent = PaymentIntent.retrieve(confirmRequest.getPaymentIntentId());
            intent = intent.confirm();
          }

          Map&lt;String, Object&gt; responseData = generateResponse(response, intent);

          return gson.toJson(responseData);
        } catch (Exception e) {
          response.status(500);
          Map&lt;String, Object&gt; errorResponse = new HashMap&lt;&gt;();
          errorResponse.put("message", e.getMessage());
          return gson.toJson(errorResponse);
        }
      }

      private Map&lt;String, Object&gt; generateResponse(Response response,
                                                          PaymentIntent intent) {
        response.type("application/json");
        Map&lt;String, Object&gt; responseData = new HashMap&lt;&gt;();
        // Note that if your API version is before 2019-02-11, 'requires_action'
        // appears as 'requires_source_action'.
        if (intent.getStatus().equals("requires_action")
            &amp;&amp; intent.getNextAction().getType().equals("use_stripe_sdk")) {
          responseData.put("requires_action", true);
          responseData.put("payment_intent_client_secret", intent.getClientSecret());
        } else if (intent.getStatus().equals("succeeded")) {
          responseData.put("success", true);
        } else {
          // invalid status
          responseData.put("Error", "Invalid status");
          response.status(500);
          return responseData;
        }
        response.status(200);
        return responseData;
      }
    });
  }
}
</code></div></pre>

</div>

<div class="code" data-language="node">
  <nav class="nav-filename icon-file">
<span>
server.js
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/server/node/server.js#L38" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered highlighted-line" data-highlight-lines="10,11,12,13,14,15,16,17,38,39,40,41,42"><div class="file-content-wrapper"><code>// Using Express
const express = require('express');
const app = express();
app.use(express.json());

app.post('/pay', async (request, response) =&gt; {
  try {
    let intent;
    if (request.body.payment_method_id) {
      // Create the PaymentIntent
      intent = await stripe.paymentIntents.create({
        payment_method: request.body.payment_method_id,
        amount: 1099,
        currency: 'usd',
        confirmation_method: 'manual',
        confirm: true
      });
    } else if (request.body.payment_intent_id) {
      intent = await stripe.paymentIntents.confirm(
        request.body.payment_intent_id
      );
    }
    // Send the response to the client
    response.send(generateResponse(intent));
  } catch (e) {
    // Display error on client
    return response.send({ error: e.message });
  }
});

const generateResponse = (intent) =&gt; {
  // Note that if your API version is before 2019-02-11, 'requires_action'
  // appears as 'requires_source_action'.
  if (
    intent.status === 'requires_action' &amp;&amp;
    intent.next_action.type === 'use_stripe_sdk'
  ) {
    // Tell the client to handle the action
    return {
      requires_action: true,
      payment_intent_client_secret: intent.client_secret
    };
  } else if (intent.status === 'succeeded') {
    // The payment didn&rsquo;t need any additional actions and completed!
    // Handle post-payment fulfillment
    return {
      success: true
    };
  } else {
    // Invalid status
    return {
      error: 'Invalid PaymentIntent status'
    }
  }
};
</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-file">
<span>
Server.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-go numbered highlighted-line" data-highlight-lines="69,70,71,72,73,74,75,76,77,78,79,34,35,36,37,38,39"><div class="file-content-wrapper"><code>package main

import (
  "encoding/json"
  "net/http"
  "os"
  "fmt"

  stripe "github.com/stripe/stripe-go/v71"
  paymentintent "github.com/stripe/stripe-go/v71/paymentintent"
)

// Structs to handle request and response JSON serializations
type ConfirmPaymentRequest struct {
  PaymentMethodId *string `json:"payment_method_id"`
  PaymentIntentId *string `json:"payment_intent_id"`
}

type ErrorResponse struct {
  Message string `json:"error"`
}

type ConfirmPaymentResponse struct {
  RequiresAction bool `json:"requires_action"`
  PaymentIntentClientSecret *string `json:"payment_intent_client_secret"`
}

func generatePaymentResponse(intent *stripe.PaymentIntent, w http.ResponseWriter) {
  // Note that if your API version is before 2019-02-11, PaymentIntentStatusRequiresAction
  // appears as PaymentIntentStatusRequiresSourceAction.
  if intent.Status == stripe.PaymentIntentStatusRequiresAction &amp;&amp;
    intent.NextAction.Type == "use_stripe_sdk" {

    // Tell the client to handle the action
    w.WriteHeader(http.StatusOK)
    json.NewEncoder(w).Encode(ConfirmPaymentResponse{
      RequiresAction: true,
      PaymentIntentClientSecret: &amp;intent.ClientSecret,
    })

  } else if intent.Status == stripe.PaymentIntentStatusSucceeded {

    // The payment didn&rsquo;t need any additional actions and completed!
    // Handle post-payment fulfillment
    w.WriteHeader(http.StatusOK)
    fmt.Fprint(w, "Success")

  } else {

    // Invalid status
    w.WriteHeader(http.StatusInternalServerError)
    fmt.Fprintf(w, "Invalid Payment Intent status: %s", intent.Status)

  }
}

func main() {
  // Initialize stripe-go with Stripe secret key from environment
  stripe.Key = os.Getenv("STRIPE_SECRET_KEY")

  // AJAX endpoint when `/pay` is called from client
  http.HandleFunc("/pay",
    func(w http.ResponseWriter, req *http.Request) {
      var confirmPaymentRequest ConfirmPaymentRequest
      json.NewDecoder(req.Body).Decode(&amp;confirmPaymentRequest)

      var intent *stripe.PaymentIntent
      var err error

      if confirmPaymentRequest.PaymentMethodId != nil {
        // Create the PaymentIntent
        params := &amp;stripe.PaymentIntentParams{
          PaymentMethod: stripe.String(*confirmPaymentRequest.PaymentMethodId),
          Amount: stripe.Int64(1099),
          Currency: stripe.String(string(stripe.CurrencyUSD)),
          ConfirmationMethod: stripe.String(string(
            stripe.PaymentIntentConfirmationMethodManual,
          )),
          Confirm: stripe.Bool(true),
        }
        intent, err = paymentintent.New(params)
      }

      if confirmPaymentRequest.PaymentIntentId != nil {
        intent, err = paymentintent.Confirm(
          *confirmPaymentRequest.PaymentIntentId, nil,
        )
      }

      if err != nil {
        if stripeErr, ok := err.(*stripe.Error); ok {
          // Display error on client
          w.WriteHeader(http.StatusOK)
          json.NewEncoder(w).Encode(ErrorResponse{Message: stripeErr.Msg})
        } else {
          w.WriteHeader(http.StatusInternalServerError)
          fmt.Fprintf(w, "Other error occurred, %v\n", err.Error())
        }
      } else {
        generatePaymentResponse(intent, w)
      }
    })

  http.ListenAndServe(":"+os.Getenv("PORT"), nil)
}
</code></div></pre>

</div>

<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-file">
<span>
server.cs
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-dotnet numbered highlighted-line" data-highlight-lines="32,33,34,35,36,37,38,39,40,41,66,67,68,69,70,71"><div class="file-content-wrapper"><code>using System;
using System.Collections.Generic;
using Microsoft.AspNetCore.Mvc;

using Stripe;
using Newtonsoft.Json;

namespace Controllers
{
    public class ConfirmPaymentRequest
    {
        [JsonProperty("payment_method_id")]
        public string PaymentMethodId { get; set; }

        [JsonProperty("payment_intent_id")]
        public string PaymentIntentId { get; set; }
    }

    // AJAX endpoint when `/pay` is called from client
    [Route("/pay")]
    public class ConfirmPaymentController : Controller
    {
        public IActionResult Index([FromBody] ConfirmPaymentRequest request)
        {
            var paymentIntentService = new PaymentIntentService();
            PaymentIntent paymentIntent = null;

            try
            {
                if (request.PaymentMethodId != null)
                {
                    // Create the PaymentIntent
                    var createOptions = new PaymentIntentCreateOptions
                    {
                        PaymentMethod = request.PaymentMethodId,
                        Amount = 1099,
                        Currency = "usd",
                        ConfirmationMethod = "manual",
                        Confirm = true,
                    };
                    paymentIntent = paymentIntentService.Create(createOptions);
                }
                if (request.PaymentIntentId != null)
                {
                    var confirmOptions = new PaymentIntentConfirmOptions{};
                    paymentIntent = paymentIntentService.Confirm(
                        request.PaymentIntentId,
                        confirmOptions
                    );
                }
            }
            catch (StripeException e)
            {
                return Json(new { error = e.StripeError.Message });
            }
            return generatePaymentResponse(paymentIntent);
          }

          private IActionResult generatePaymentResponse(PaymentIntent intent)
          {
            // Note that if your API version is before 2019-02-11, 'requires_action'
            // appears as 'requires_source_action'.
            if (intent.Status == "requires_action" &amp;&amp;
                intent.NextAction.Type == "use_stripe_sdk")
            {
                // Tell the client to handle the action
                return Json(new
                {
                    requires_action = true,
                    payment_intent_client_secret = intent.ClientSecret
                });
            }
            else if (intent.Status == "succeeded")
            {
                // The payment didn&rsquo;t need any additional actions and completed!
                // Handle post-payment fulfillment
                return Json(new { success = true });
            }
            else
            {
                // Invalid status
                return StatusCode(500, new { error = "Invalid PaymentIntent status" });
            }
        }
    }
}
</code></div></pre>

</div>


</div>
</div>

<p>If you want to save the card to reuse later, create a <a href="../api/customers/create.html">Customer</a> to store the PaymentMethod and pass the following additional parameters when creating the PaymentIntent:</p>

<ul>
  <li><a href="../api/payment_intents/create.html#create_payment_intent-customer">customer</a>. Set to the ID of the Customer.</li>
  <li><a href="../api/payment_intents/create.html#create_payment_intent-setup_future_usage">setup_future_usage</a>. Set to <code>off_session</code> to tell Stripe that you plan to reuse this PaymentMethod for off-session payments when your customer is not present. Setting this property saves the PaymentMethod to the Customer after the PaymentIntent is confirmed and any required actions from the user are complete.</li>
</ul>

<p>See the code sample on <a href="https://github.com/stripe-samples/saving-card-after-payment/tree/master/without-webhooks">saving cards after a payment</a> for more details.</p>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="web-handle-next-actions" href="payment-intents/web-manual.html#web-handle-next-actions" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Handle any next actions">
        <span class="expando-left-text">5</span>
      Handle any next actions
        <span class="tag optional">Client-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>Write code to handle situations that require your customer to intervene. A payment normally succeeds after you confirm it on the server in <a href="payment-intents/web-manual.html#web-create-payment-intent">step 4</a>. However, when the PaymentIntent requires additional action from the customer, such as authenticating with <span class="tooltip-wrapper"><span class="tooltip-content definition"><a href="3d-secure.html">3D Secure</a></span><template class="tooltip"><span class="definition"><em>3D Secure</em> provides an additional layer of authentication for credit card transactions that protects merchants from liability for fraudulent card payments.</span></template></span>, this code comes into play.</p>

<p>Use <a href="../stripe-js/reference.html#stripe-handle-card-action">stripe.handleCardAction</a> to trigger the UI for handling customer action. If authentication succeeds, the PaymentIntent has a status of <code>requires_confirmation</code>. You then need to confirm the PaymentIntent again on your server to finish the payment.</p>

<p>While testing, use a <a href="../testing.html#regulatory-cards">test card number</a> that requires authentication (e.g., <span class="card-number">4000<span></span>0027<span></span>6000<span></span>3184</span>) to force this flow. Using a card that doesn&rsquo;t require authentication (e.g., <span class="card-number">4242<span></span>4242<span></span>4242<span></span>4242</span>) skips this part of the flow and completes at step 4.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="javascript">JavaScript</a>
<a data-language="javascript_esnext">JavaScript (ESNext)</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="javascript">
  <nav class="nav-filename icon-file">
<span>
script.js
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/client/web/script.js#L59-L85" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered"><div class="file-content-wrapper"><code>function handleServerResponse(response) {
  if (response.error) {
    // Show error from server on payment form
  } else if (response.requires_action) {
    // Use Stripe.js to handle required card action
    stripe.handleCardAction(
      response.payment_intent_client_secret
    ).then(handleStripeJsResult);
  } else {
    // Show success message
  }
}

function handleStripeJsResult(result) {
  if (result.error) {
    // Show error in payment form
  } else {
    // The card action has been handled
    // The PaymentIntent can be confirmed again on the server
    fetch('/pay', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ payment_intent_id: result.paymentIntent.id })
    }).then(function(confirmResult) {
      return confirmResult.json();
    }).then(handleServerResponse);
  }
}
</code></div></pre>

</div>
<div class="code" data-language="javascript_esnext">
  <nav class="nav-filename icon-file">
<span>
script.js
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/client/web/script.js#L59-L85" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered"><div class="file-content-wrapper"><code>const handleServerResponse = async (response) =&gt; {
  if (response.error) {
    // Show error from server on payment form
  } else if (response.requires_action) {
    // Use Stripe.js to handle the required card action
    const { error: errorAction, paymentIntent } =
      await stripe.handleCardAction(response.payment_intent_client_secret);

    if (errorAction) {
      // Show error from Stripe.js in payment form
    } else {
      // The card action has been handled
      // The PaymentIntent can be confirmed again on the server
      const serverResponse = await fetch('/pay', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ payment_intent_id: paymentIntent.id })
      });
      handleServerResponse(await serverResponse.json());
    }
  } else {
    // Show success message
  }
}
</code></div></pre>

</div>

</div>
</div>

<aside class="important check">
  <p><code>stripe.handleCardAction</code> may take several seconds to complete. During that time, disable your form from being resubmitted and show a waiting indicator like a spinner. If you receive an error, show it to the customer, re-enable the form, and hide the waiting indicator. If the customer must perform additional steps to complete the payment, such as authentication, Stripe.js walks them through that process.</p>
</aside>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="web-confirm-payment" href="payment-intents/web-manual.html#web-confirm-payment" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Confirm the PaymentIntent again">
        <span class="expando-left-text">6</span>
      Confirm the PaymentIntent again
        <span class="tag optional">Server-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>This code is only executed when a payment requires additional authentication&mdash;just like the handling in the previous step. The code itself is not optional because any payment could require this extra step.</p>

<p>Using the same endpoint you set up in <a href="payment-intents/web-manual.html#web-create-payment-intent">step 4</a>, confirm the PaymentIntent again to finalize the payment and <span class="tooltip-wrapper"><span class="tooltip-content definition">fulfill</span><template class="tooltip"><span class="definition"><em>Fulfillment</em> is the process of providing the goods or services purchased by a customer, typically after payment is collected.</span></template></span> the order. Make sure this confirmation happens within one hour of the payment attempt. Otherwise, the payment fails and transitions back to <code>requires_payment_method</code>.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="curl">curl</a>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="java">Java</a>
<a data-language="node">Node</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="curl">
  <pre class="language-curl numbered"><div class="file-content-wrapper"><code>curl https://api.stripe.com/v1/payment_intents/{{PAYMENT_INTENT_ID}}/confirm \
  -u sk_test_4eC39HqLyjWDarjtT1zdp7dc: \
  -X POST
</code></div></pre>

</div>

<div class="code" data-language="ruby">
  <nav class="nav-filename icon-file">
<span>
server.rb
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/server/ruby/server.rb#L34" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-ruby numbered highlighted-line" data-highlight-lines="16,40,41,42"><div class="file-content-wrapper"><code># AJAX endpoint when `/pay` is called from client
post '/pay' do
  data = JSON.parse(request.body.read.to_s)

  begin
    if data['payment_method_id']
      # Create the PaymentIntent
      intent = Stripe::PaymentIntent.create(
        payment_method: data['payment_method_id'],
        amount: 1099,
        currency: 'usd',
        confirmation_method: 'manual',
        confirm: true,
      )
    elsif data['payment_intent_id']
      intent = Stripe::PaymentIntent.confirm(data['payment_intent_id'])
    end
  rescue Stripe::CardError =&gt; e
    # Display error on client
    return [200, { error: e.message }.to_json]
  end

  return generate_response(intent)
end

def generate_response(intent)
  # Note that if your API version is before 2019-02-11, 'requires_action'
  # appears as 'requires_source_action'.
  if intent.status == 'requires_action' &amp;&amp;
      intent.next_action.type == 'use_stripe_sdk'
    # Tell the client to handle the action
    [
      200,
      {
        requires_action: true,
        payment_intent_client_secret: intent.client_secret
      }.to_json
    ]
  elsif intent.status == 'succeeded'
    # The payment didn&rsquo;t need any additional actions and is completed!
    # Handle post-payment fulfillment
    [200, { success: true }.to_json]
  else
    # Invalid status
    return [500, { error: 'Invalid PaymentIntent status' }.to_json]
  end
end
</code></div></pre>

</div>

<div class="code" data-language="python">
  <nav class="nav-filename icon-file">
<span>
server.py
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/server/python/server.py#L45" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-python numbered highlighted-line" data-highlight-lines="18,35,36,37"><div class="file-content-wrapper"><code># AJAX endpoint when `/pay` is called from client
@app.route('/pay', methods=['POST'])
def pay():
  data = request.get_json()
  intent = None

  try:
    if 'payment_method_id' in data:
      # Create the PaymentIntent
      intent = stripe.PaymentIntent.create(
        payment_method = data['payment_method_id'],
        amount = 1099,
        currency = 'usd',
        confirmation_method = 'manual',
        confirm = True,
      )
    elif 'payment_intent_id' in data:
      intent = stripe.PaymentIntent.confirm(data['payment_intent_id'])
  except stripe.error.CardError as e:
    # Display error on client
    return json.dumps({'error': e.user_message}), 200

  return generate_response(intent)

def generate_response(intent):
  # Note that if your API version is before 2019-02-11, 'requires_action'
  # appears as 'requires_source_action'.
  if intent.status == 'requires_action' and intent.next_action.type == 'use_stripe_sdk':
    # Tell the client to handle the action
    return json.dumps({
      'requires_action': True,
      'payment_intent_client_secret': intent.client_secret,
    }), 200
  elif intent.status == 'succeeded':
    # The payment didn&rsquo;t need any additional actions and completed!
    # Handle post-payment fulfillment
    return json.dumps({'success': True}), 200
  else:
    # Invalid status
    return json.dumps({'error': 'Invalid PaymentIntent status'}), 500
</code></div></pre>

</div>

<div class="code" data-language="php">
  <nav class="nav-filename icon-file">
<span>
server.php
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/server/php/public/pay.php#L3" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-php numbered highlighted-line" data-highlight-lines="26,27,28,29,50,51,52,53,54"><div class="file-content-wrapper"><code>&lt;?php
  # vendor using composer
  require_once('vendor/autoload.php');

  \Stripe\Stripe::setApiKey(getenv('STRIPE_SECRET_KEY'));

  header('Content-Type: application/json');

  # retrieve json from POST body
  $json_str = file_get_contents('php://input');
  $json_obj = json_decode($json_str);

  $intent = null;
  try {
    if (isset($json_obj-&gt;payment_method_id)) {
      # Create the PaymentIntent
      $intent = \Stripe\PaymentIntent::create([
        'payment_method' =&gt; $json_obj-&gt;payment_method_id,
        'amount' =&gt; 1099,
        'currency' =&gt; 'usd',
        'confirmation_method' =&gt; 'manual',
        'confirm' =&gt; true,
      ]);
    }
    if (isset($json_obj-&gt;payment_intent_id)) {
      $intent = \Stripe\PaymentIntent::retrieve(
        $json_obj-&gt;payment_intent_id
      );
      $intent-&gt;confirm();
    }
    generateResponse($intent);
  } catch (\Stripe\Exception\ApiErrorException $e) {
    # Display error on client
    echo json_encode([
      'error' =&gt; $e-&gt;getMessage()
    ]);
  }

  function generateResponse($intent) {
    # Note that if your API version is before 2019-02-11, 'requires_action'
    # appears as 'requires_source_action'.
    if ($intent-&gt;status == 'requires_action' &amp;&amp;
        $intent-&gt;next_action-&gt;type == 'use_stripe_sdk') {
      # Tell the client to handle the action
      echo json_encode([
        'requires_action' =&gt; true,
        'payment_intent_client_secret' =&gt; $intent-&gt;client_secret
      ]);
    } else if ($intent-&gt;status == 'succeeded') {
      # The payment didn&rsquo;t need any additional actions and completed!
      # Handle post-payment fulfillment
      echo json_encode([
        "success" =&gt; true
      ]);
    } else {
      # Invalid status
      http_response_code(500);
      echo json_encode(['error' =&gt; 'Invalid PaymentIntent status']);
    }
  }
?&gt;
</code></div></pre>

</div>

<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
server.java
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/server/java/src/main/java/com/stripe/sample/Server.java#L133" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-java numbered highlighted-line" data-highlight-lines="60,61,86"><div class="file-content-wrapper"><code>package com.stripe.generator;

import static spark.Spark.post;

import com.google.gson.Gson;
import com.google.gson.annotations.SerializedName;
import com.stripe.Stripe;
import com.stripe.model.PaymentIntent;

import com.stripe.param.PaymentIntentCreateParams;
import java.util.HashMap;
import java.util.Map;
import spark.Request;
import spark.Response;
import spark.Route;

public class MyApp {

  static class ConfirmPaymentRequest {
    @SerializedName("payment_method_id")
    String paymentMethodId;
    @SerializedName("payment_intent_id")
    String paymentIntentId;

    public String getPaymentMethodId() {
      return paymentMethodId;
    }

    public String getPaymentIntentId() {
      return paymentIntentId;
    }
  }

  /**
   * Your application.
   */
  public static void main(String[] args) {

    Stripe.apiKey = System.getenv("STRIPE_SECRET_KEY");

    post(new Route("/pay") {

      @Override
      public Object handle(Request request, Response response) {
        Gson gson = new Gson();
        ConfirmPaymentRequest confirmRequest =
            gson.fromJson(request.body(), ConfirmPaymentRequest.class);
        PaymentIntent intent;
        try {
          if (confirmRequest.getPaymentMethodId() != null) {
            PaymentIntentCreateParams createParams = PaymentIntentCreateParams.builder()
                .setAmount(1099)
                .setCurrency("usd")
                .setConfirm(true)
                .setPaymentMethod(confirmRequest.paymentMethodId)
                .setConfirmationMethod(PaymentIntentCreateParams.ConfirmationMethod.MANUAL)
                .build();
            intent = PaymentIntent.create(createParams);
          } else if (confirmRequest.getPaymentIntentId() != null) {
            intent = PaymentIntent.retrieve(confirmRequest.getPaymentIntentId());
            intent = intent.confirm();
          }

          Map&lt;String, Object&gt; responseData = generateResponse(response, intent);

          return gson.toJson(responseData);
        } catch (Exception e) {
          response.status(500);
          Map&lt;String, Object&gt; errorResponse = new HashMap&lt;&gt;();
          errorResponse.put("message", e.getMessage());
          return gson.toJson(errorResponse);
        }
      }

      private Map&lt;String, Object&gt; generateResponse(Response response,
                                                          PaymentIntent intent) {
        response.type("application/json");
        Map&lt;String, Object&gt; responseData = new HashMap&lt;&gt;();
        // Note that if your API version is before 2019-02-11, 'requires_action'
        // appears as 'requires_source_action'.
        if (intent.getStatus().equals("requires_action")
            &amp;&amp; intent.getNextAction().getType().equals("use_stripe_sdk")) {
          responseData.put("requires_action", true);
          responseData.put("payment_intent_client_secret", intent.getClientSecret());
        } else if (intent.getStatus().equals("succeeded")) {
          responseData.put("success", true);
        } else {
          // invalid status
          responseData.put("Error", "Invalid status");
          response.status(500);
          return responseData;
        }
        response.status(200);
        return responseData;
      }
    });
  }
}
</code></div></pre>

</div>

<div class="code" data-language="node">
  <nav class="nav-filename icon-file">
<span>
server.js
</span>
<div>
<a href="https://github.com/stripe-samples/accept-a-card-payment/blob/master/without-webhooks/server/node/server.js#L38" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered highlighted-line" data-highlight-lines="19,20,21,44,45,46,47,48"><div class="file-content-wrapper"><code>// Using Express
const express = require('express');
const app = express();
app.use(express.json());

app.post('/pay', async (request, response) =&gt; {
  try {
    let intent;
    if (request.body.payment_method_id) {
      // Create the PaymentIntent
      intent = await stripe.paymentIntents.create({
        payment_method: request.body.payment_method_id,
        amount: 1099,
        currency: 'usd',
        confirmation_method: 'manual',
        confirm: true
      });
    } else if (request.body.payment_intent_id) {
      intent = await stripe.paymentIntents.confirm(
        request.body.payment_intent_id
      );
    }
    // Send the response to the client
    response.send(generateResponse(intent));
  } catch (e) {
    // Display error on client
    return response.send({ error: e.message });
  }
});

const generateResponse = (intent) =&gt; {
  // Note that if your API version is before 2019-02-11, 'requires_action'
  // appears as 'requires_source_action'.
  if (
    intent.status === 'requires_action' &amp;&amp;
    intent.next_action.type === 'use_stripe_sdk'
  ) {
    // Tell the client to handle the action
    return {
      requires_action: true,
      payment_intent_client_secret: intent.client_secret
    };
  } else if (intent.status === 'succeeded') {
    // The payment didn&rsquo;t need any additional actions and completed!
    // Handle post-payment fulfillment
    return {
      success: true
    };
  } else {
    // Invalid status
    return {
      error: 'Invalid PaymentIntent status'
    }
  }
};
</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-file">
<span>
server.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-go numbered highlighted-line" data-highlight-lines="85,86,87,43,44,45,46"><div class="file-content-wrapper"><code>package main

import (
  "encoding/json"
  "net/http"
  "os"
  "fmt"

  stripe "github.com/stripe/stripe-go/v71"
  paymentintent "github.com/stripe/stripe-go/v71/paymentintent"
)

// Structs to handle request and response JSON serializations
type ConfirmPaymentRequest struct {
  PaymentMethodId *string `json:"payment_method_id"`
  PaymentIntentId *string `json:"payment_intent_id"`
}

type ErrorResponse struct {
  Message string `json:"error"`
}

type ConfirmPaymentResponse struct {
  RequiresAction bool `json:"requires_action"`
  PaymentIntentClientSecret *string `json:"payment_intent_client_secret"`
}

func generatePaymentResponse(intent *stripe.PaymentIntent, w http.ResponseWriter) {
  // Note that if your API version is before 2019-02-11, PaymentIntentStatusRequiresAction
  // appears as PaymentIntentStatusRequiresSourceAction.
  if intent.Status == stripe.PaymentIntentStatusRequiresAction &amp;&amp;
    intent.NextAction.Type == "use_stripe_sdk" {

    // Tell the client to handle the action
    w.WriteHeader(http.StatusOK)
    json.NewEncoder(w).Encode(ConfirmPaymentResponse{
      RequiresAction: true,
      PaymentIntentClientSecret: &amp;intent.ClientSecret,
    })

  } else if intent.Status == stripe.PaymentIntentStatusSucceeded {

    // The payment didn&rsquo;t need any additional actions and completed!
    // Handle post-payment fulfillment
    w.WriteHeader(http.StatusOK)
    fmt.Fprint(w, "Success")

  } else {

    // Invalid status
    w.WriteHeader(http.StatusInternalServerError)
    fmt.Fprintf(w, "Invalid Payment Intent status: %s", intent.Status)

  }
}

func main() {
  // Initialize stripe-go with Stripe secret key from environment
  stripe.Key = os.Getenv("STRIPE_SECRET_KEY")

  // AJAX endpoint when `/pay` is called from client
  http.HandleFunc("/pay",
    func(w http.ResponseWriter, req *http.Request) {
      var confirmPaymentRequest ConfirmPaymentRequest
      json.NewDecoder(req.Body).Decode(&amp;confirmPaymentRequest)

      var intent *stripe.PaymentIntent
      var err error

      if confirmPaymentRequest.PaymentMethodId != nil {
        // Create the PaymentIntent
        params := &amp;stripe.PaymentIntentParams{
          PaymentMethod: stripe.String(*confirmPaymentRequest.PaymentMethodId),
          Amount: stripe.Int64(1099),
          Currency: stripe.String(string(stripe.CurrencyUSD)),
          ConfirmationMethod: stripe.String(string(
            stripe.PaymentIntentConfirmationMethodManual,
          )),
          Confirm: stripe.Bool(true),
        }
        intent, err = paymentintent.New(params)
      }

      if confirmPaymentRequest.PaymentIntentId != nil {
        intent, err = paymentintent.Confirm(
          *confirmPaymentRequest.PaymentIntentId, nil,
        )
      }

      if err != nil {
        if stripeErr, ok := err.(*stripe.Error); ok {
          // Display error on client
          w.WriteHeader(http.StatusOK)
          json.NewEncoder(w).Encode(ErrorResponse{Message: stripeErr.Msg})
        } else {
          w.WriteHeader(http.StatusInternalServerError)
          fmt.Fprintf(w, "Other error occurred, %v\n", err.Error())
        }
      } else {
        generatePaymentResponse(intent, w)
      }
    })

  http.ListenAndServe(":"+os.Getenv("PORT"), nil)
}
</code></div></pre>

</div>

<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-file">
<span>
server.cs
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-dotnet numbered highlighted-line" data-highlight-lines="75,76,77,45,46,47,48,49"><div class="file-content-wrapper"><code>using System;
using System.Collections.Generic;
using Microsoft.AspNetCore.Mvc;

using Stripe;
using Newtonsoft.Json;

namespace Controllers
{
    public class ConfirmPaymentRequest
    {
        [JsonProperty("payment_method_id")]
        public string PaymentMethodId { get; set; }

        [JsonProperty("payment_intent_id")]
        public string PaymentIntentId { get; set; }
    }

    // AJAX endpoint when `/pay` is called from client
    [Route("/pay")]
    public class ConfirmPaymentController : Controller
    {
        public IActionResult Index([FromBody] ConfirmPaymentRequest request)
        {
            var paymentIntentService = new PaymentIntentService();
            PaymentIntent paymentIntent = null;

            try
            {
                if (request.PaymentMethodId != null)
                {
                    // Create the PaymentIntent
                    var createOptions = new PaymentIntentCreateOptions
                    {
                        PaymentMethod = request.PaymentMethodId,
                        Amount = 1099,
                        Currency = "usd",
                        ConfirmationMethod = "manual",
                        Confirm = true,
                    };
                    paymentIntent = paymentIntentService.Create(createOptions);
                }
                if (request.PaymentIntentId != null)
                {
                    var confirmOptions = new PaymentIntentConfirmOptions{};
                    paymentIntent = paymentIntentService.Confirm(
                        request.PaymentIntentId,
                        confirmOptions
                    );
                }
            }
            catch (StripeException e)
            {
                return Json(new { error = e.StripeError.Message });
            }
            return generatePaymentResponse(paymentIntent);
          }

          private IActionResult generatePaymentResponse(PaymentIntent intent)
          {
            // Note that if your API version is before 2019-02-11, 'requires_action'
            // appears as 'requires_source_action'.
            if (intent.Status == "requires_action" &amp;&amp;
                intent.NextAction.Type == "use_stripe_sdk")
            {
                // Tell the client to handle the action
                return Json(new
                {
                    requires_action = true,
                    payment_intent_client_secret = intent.ClientSecret
                });
            }
            else if (intent.Status == "succeeded")
            {
                // The payment didn&rsquo;t need any additional actions and completed!
                // Handle post-payment fulfillment
                return Json(new { success = true });
            }
            else
            {
                // Invalid status
                return StatusCode(500, new { error = "Invalid PaymentIntent status" });
            }
        }
    }
}
</code></div></pre>

</div>


</div>
</div>
  </div>
</div>



<div class="expando" aria-expanded="true">
  <a id="web-test-integration" href="payment-intents/web-manual.html#web-test-integration" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Test the integration">
        <span class="expando-left-text">7</span>
      Test the integration
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>By this point you should have a basic card integration that collects card details and makes a payment.</p>

<p>There are several test cards you can use in test mode to make sure this integration is ready. Use them with any CVC, postal code, and future expiration date.</p>

<table class="alternate">
  <thead>
    <tr>
      <th>Number</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="card-number">4242<span></span>4242<span></span>4242<span></span>4242</td>
      <td>Succeeds and immediately processes the payment.</td>
    </tr>
    <tr>
      <td class="card-number">4000<span></span>0025<span></span>0000<span></span>3155</td>
      <td>Requires authentication. Stripe will trigger a modal asking for the customer to authenticate.</td>
    </tr>
    <tr>
      <td class="card-number">4000<span></span>0000<span></span>0000<span></span>9995</td>
      <td>Always fails with a decline code of <code>insufficient_funds</code>.</td>
    </tr>
  </tbody>
</table>

<p>For the full list of test cards see our guide on <a href="../testing.html">testing</a>.</p>
  </div>
</div>


</div>
<div class="tabs-tab" id="ios">
<h2 id="ios-overview">Overview</h2>

<p>For a wider range of support and future proofing, we strongly recommend our <a href="payment-intents/quickstart.html">standard integration</a> for asynchronous payments.</p>

<p>This guide lets you use a single client-to-server flow to take payments, without using webhooks or processing offline events. While it may seem simpler, this integration will be difficult to scale as your business grows. Synchronous payment flows have several limitations:</p>

<ul>
  <li><strong>Only supports cards</strong>: You&rsquo;ll have to write more code to support ACH and popular regional payment methods separately.</li>
  <li><strong>Double-charge risk</strong>: By synchronously creating a new PaymentIntent each time your customer attempts to pay, you risk accidentally double-charging your customer. Be sure to follow best practices.</li>
  <li><strong>Manual authentication handling</strong>: If your customer has a card with 3D Secure or is subject to regulations like Strong Customer Authentication, you&rsquo;ll have to make extra trips to the client.</li>
</ul>

<p>If you don&rsquo;t mind these limitations, feel free to integrate. Otherwise, use the <a href="payment-intents/quickstart.html">standard integration</a>.</p>

<aside class="important checkmark">
  <p>Clone <a href="https://github.com/stripe-samples/accept-a-card-payment">our sample repo</a> for a full implementation of this guide, with client and server code under the <code>/without-webhooks</code> directory.</p>
</aside>
<div class="expando" aria-expanded="true">
  <a id="ios-setup" href="payment-intents/web-manual.html#ios-setup" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Set up Stripe">
        <span class="expando-left-text">1</span>
      Set up Stripe
        <span class="tag optional">Client-side</span>
        <span class="tag optional">Server-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>First, you need a Stripe account. <a href="https://dashboard.stripe.com/register">Register now</a>.</p>

<h3 id="ios-setup-server-side">Server-side</h3>

<p>This integration requires endpoints on your server that talk to the Stripe API. Use our official libraries for access to the Stripe API from your server:</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="java">Java</a>
<a data-language="node">Node</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="ruby">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Available as a gem
sudo gem install stripe</code></div></pre>
<nav class="nav-filename icon-file">
<span>
Gemfile
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-ruby not-numbered"><div class="file-content-wrapper"><code># If you use bundler, you can add this line to your Gemfile
gem 'stripe'</code></div></pre>

</div>
  
<div class="code" data-language="python">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install through pip
pip install --upgrade stripe</code></div></pre>
<nav class="nav-filename icon-false">
<span>
PyPI
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Or find the Stripe package on http://pypi.python.org/pypi/stripe/</code></div></pre>

</div>
  
<div class="code" data-language="php">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install the PHP library via Composer
composer require stripe/stripe-php</code></div></pre>
<nav class="nav-filename icon-false">
<span>
Source
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Or download the source directly: https://github.com/stripe/stripe-php/releases</code></div></pre>

</div>
  
<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
build.gradle
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-java not-numbered"><div class="file-content-wrapper"><code>/*
 For Gradle, add the following dependency to your build.gradle and replace {VERSION} with
 the version number you want to use from
 - https://mvnrepository.com/artifact/com.stripe/stripe-java or
 - https://github.com/stripe/stripe-java/releases/latest
*/
implementation "com.stripe:stripe-java:{VERSION}"</code></div></pre>
<nav class="nav-filename icon-file">
<span>
pom.xml
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-xml not-numbered"><div class="file-content-wrapper"><code>&lt;!--
  For Maven, add the following dependency to your POM and replace {VERSION} with the
  version number you want to use from
  - https://mvnrepository.com/artifact/com.stripe/stripe-java or
  - https://github.com/stripe/stripe-java/releases/latest
--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.stripe&lt;/groupId&gt;
  &lt;artifactId&gt;stripe-java&lt;/artifactId&gt;
  &lt;version&gt;{VERSION}&lt;/version&gt;
&lt;/dependency&gt;</code></div></pre>
<nav class="nav-filename icon-false">
<span>
Other environments
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># For other environments, manually install the following JARs:
# - The Stripe JAR from https://github.com/stripe/stripe-java/releases/latest
# - Google Gson from https://github.com/google/gson</code></div></pre>

</div>
  
<div class="code" data-language="node">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install via npm
npm install --save stripe</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install stripe-go
go get -u github.com/stripe/stripe-go</code></div></pre>
<nav class="nav-filename icon-file">
<span>
app.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-go not-numbered"><div class="file-content-wrapper"><code>// Then import the package
import (
  "github.com/stripe/stripe-go/v71"
)</code></div></pre>

</div>
  
<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install via dotnet
dotnet add package Stripe.net
dotnet restore</code></div></pre>
<nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Or install via NuGet
PM&gt; Install-Package Stripe.net</code></div></pre>

</div>


</div>
</div>


<h3 id="ios-setup-client-side">Client-side</h3>

<p>The <a href="https://github.com/stripe/stripe-ios" class="external" target="_blank">iOS SDK</a> is open source, <a href="https://stripe.dev/stripe-ios/docs/index.html" class="external" target="_blank">fully documented</a>, and compatible with apps supporting iOS 10 or above.</p>

<div class="tabs tabs-regular  animated">
    
      <nav class="nav-tabs">
      
        <a>CocoaPods</a>
        <a>Carthage</a>
        <a>Dynamic Framework</a>
  </nav>
  <div class="tabs-content">
    <div class="tabs-tab">      <ol>
        <li>If you haven't already, install the latest version of <a href="https://guides.cocoapods.org/using/getting-started.html" class="external" target="_blank">CocoaPods</a>.
        </li><li>If you don't have an existing <a href="https://guides.cocoapods.org/syntax/podfile.html" class="external" target="_blank">Podfile</a>, run the following command to create one:
<div class="code" data-language="bash">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash numbered"><div class="file-content-wrapper"><code>pod init</code></div></pre>

</div>
        </li>
        <li>Add this line to your <code>Podfile</code>:
<div class="code" data-language="podfile">
  <nav class="nav-filename icon-file">
<span>
Podfile
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-podfile numbered"><div class="file-content-wrapper"><code>pod 'Stripe'</code></div></pre>

</div>
        </li>
        <li>Run the following command:
<div class="code" data-language="bash">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash numbered"><div class="file-content-wrapper"><code>pod install</code></div></pre>

</div>
        </li>
        <li>Don't forget to use the <code>.xcworkspace</code> file to open your project in Xcode, instead of the <code>.xcodeproj</code> file, from here on out.</li>
        <li>In the future, to update to the latest version of the SDK, just run:
<div class="code" data-language="bash">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash numbered"><div class="file-content-wrapper"><code>pod update Stripe</code></div></pre>

</div>
        </li>
      </ol>
</div><div class="tabs-tab">      <ol>
        <li>If you haven't already, install the latest version of <a href="https://github.com/Carthage/Carthage#installing-carthage" class="external" target="_blank">Carthage</a>.</li>
        <li>Add this line to your <code>Cartfile</code>:
<div class="code" data-language="cartfile">
  <nav class="nav-filename icon-file">
<span>
Cartfile
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-cartfile numbered"><div class="file-content-wrapper"><code>github "stripe/stripe-ios"</code></div></pre>

</div>
        </li>
        <li>Follow the <a href="https://github.com/Carthage/Carthage#if-youre-building-for-ios-tvos-or-watchos" class="external" target="_blank">Carthage installation instructions</a>.</li>
        <li>In the future, to update to the latest version of the SDK, run the following command:
<div class="code" data-language="bash">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash numbered"><div class="file-content-wrapper"><code>carthage update stripe-ios --platform ios</code></div></pre>

</div>
        </li>
      </ol>
</div><div class="tabs-tab">      <ol>
        <li>Head to our <a href="https://github.com/stripe/stripe-ios/releases/latest">GitHub releases page</a> and download and unzip Stripe.framework.zip.</li>
        <li>Drag Stripe.framework to the "Embedded Binaries" section of your Xcode project's "General" settings. Make sure to select "Copy items if needed".</li>
        <li>Head to the "Build Phases" section of your Xcode project settings, and create a new "Run Script Build Phase". Paste the following snippet into the text field:
<div class="code" data-language="bash">
  <pre class="language-bash numbered"><div class="file-content-wrapper"><code>bash "${BUILT_PRODUCTS_DIR}/${FRAMEWORKS_FOLDER_PATH}/Stripe.framework/integrate-dynamic-framework.sh"</code></div></pre>

</div>
        </li>
        <li>In the future, to update to the latest version of our SDK, just repeat steps 1 and 2.</li>
      </ol>
</div>
  </div>
</div>

<aside class="important neutral">
  <p>For details on the latest SDK release and past versions, see the <a href="https://github.com/stripe/stripe-ios/releases">Releases</a> page on GitHub. To receive notifications when a new release is published, <a href="https://help.github.com/en/articles/watching-and-unwatching-releases-for-a-repository#watching-releases-for-a-repository">watch releases for the repository</a>.</p>
</aside>

<p>When your app starts, configure the SDK with your Stripe <a href="https://dashboard.stripe.com/account/apikeys">publishable key</a> so that it can make requests to the Stripe API.</p>
<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="swift">Swift</a>
<a data-language="objc">Objective-C</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="swift">
  <nav class="nav-filename icon-file">
<span>
AppDelegate.swift
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-swift numbered"><div class="file-content-wrapper"><code>import UIKit
import Stripe

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {

    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {
        Stripe.setDefaultPublishableKey("pk_test_TYooMQauvdEDq54NiTphI7jx")
        // do any other necessary launch configuration
        return true
    }
}</code></div></pre>

</div>
<div class="code" data-language="objc">
  <nav class="nav-filename icon-file">
<span>
AppDelegate.m
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-objc numbered"><div class="file-content-wrapper"><code>#import "AppDelegate.h"
#import &lt;Stripe/Stripe.h&gt;

@implementation AppDelegate
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    [Stripe setDefaultPublishableKey:@"pk_test_TYooMQauvdEDq54NiTphI7jx"];
    // do any other necessary launch configuration
    return YES;
}
@end</code></div></pre>

</div>

</div>
</div>

<aside class="important checkmark">
  <p>Use your <a href="../keys.html#obtain-api-keys">test mode</a> keys while you test and develop, and your <a href="../keys.html#test-live-modes">live mode</a> keys before you publish your app.</p>
</aside>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="ios-create-checkout-screen" href="payment-intents/web-manual.html#ios-create-checkout-screen" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Create your checkout screen">
        <span class="expando-left-text">2</span>
      Create your checkout screen
        <span class="tag optional">Client-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <aside class="note">
  <h3 id="want-a-prebuilt-ui-instead">Want a prebuilt UI instead?</h3>

  <p>The iOS <a href="../mobile/ios/standard.html">Basic Integration</a> features prebuilt, full size screens to collect payment information.</p>
</aside>

<p>Securely collect card information on the client with <a href="https://stripe.dev/stripe-ios/docs/Classes/STPPaymentCardTextField.html" class="external" target="_blank">STPPaymentCardTextField</a>, a drop-in UI component provided by the SDK.
<br><br></p>

<div class="image">
  <video width="400" height="100" autoplay="" loop="" muted="" playsinline="">
  <source src="https://d37ugbyn3rpeym.cloudfront.net/docs/mobile/ios/card-field.mp4" type="video/mp4"></source>
</video>
  <p><a href="https://stripe.dev/stripe-ios/docs/Classes/STPPaymentCardTextField.html" class="external" target="_blank">STPPaymentCardTextField</a> performs on-the-fly validation and formatting.</p>
</div>

<p>Create an instance of the card component and a &ldquo;Pay&rdquo; button with the following code:</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="swift">Swift</a>
<a data-language="objc">Objective-C</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="swift">
  <nav class="nav-filename icon-file">
<span>
CheckoutViewController.swift
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-swift numbered"><div class="file-content-wrapper"><code>import UIKit
import Stripe

class CheckoutViewController: UIViewController {

    lazy var cardTextField: STPPaymentCardTextField = {
        let cardTextField = STPPaymentCardTextField()
        return cardTextField
    }()
    lazy var payButton: UIButton = {
        let button = UIButton(type: .custom)
        button.layer.cornerRadius = 5
        button.backgroundColor = .systemBlue
        button.titleLabel?.font = UIFont.systemFont(ofSize: 22)
        button.setTitle("Pay", for: .normal)
        button.addTarget(self, action: #selector(pay), for: .touchUpInside)
        return button
    }()

    override func viewDidLoad() {
        super.viewDidLoad()
        view.backgroundColor = .white
        let stackView = UIStackView(arrangedSubviews: [cardTextField, payButton])
        stackView.axis = .vertical
        stackView.spacing = 20
        stackView.translatesAutoresizingMaskIntoConstraints = false
        view.addSubview(stackView)
        NSLayoutConstraint.activate([
            stackView.leftAnchor.constraint(equalToSystemSpacingAfter: view.leftAnchor, multiplier: 2),
            view.rightAnchor.constraint(equalToSystemSpacingAfter: stackView.rightAnchor, multiplier: 2),
            stackView.topAnchor.constraint(equalToSystemSpacingBelow: view.topAnchor, multiplier: 2),
        ])
    }

    @objc
    func pay() {
        // ...
    }
}
</code></div></pre>

</div>

<div class="code" data-language="objc">
  <nav class="nav-filename icon-file">
<span>
CheckoutViewController.m
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-objc numbered"><div class="file-content-wrapper"><code>#import "CheckoutViewController.h"
#import &lt;Stripe/Stripe.h&gt;

@interface CheckoutViewController ()

@property (nonatomic, weak) STPPaymentCardTextField *cardTextField;
@property (nonatomic, weak) UIButton *payButton;

@end

@implementation CheckoutViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor whiteColor];

    STPPaymentCardTextField *cardTextField = [[STPPaymentCardTextField alloc] init];
    self.cardTextField = cardTextField;

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.layer.cornerRadius = 5;
    button.backgroundColor = [UIColor systemBlueColor];
    button.titleLabel.font = [UIFont systemFontOfSize:22];
    [button setTitle:@"Pay" forState:UIControlStateNormal];
    [button addTarget:self action:@selector(pay) forControlEvents:UIControlEventTouchUpInside];
    self.payButton = button;

    UIStackView *stackView = [[UIStackView alloc] initWithArrangedSubviews:@[cardTextField, button]];
    stackView.axis = UILayoutConstraintAxisVertical;
    stackView.translatesAutoresizingMaskIntoConstraints = NO;
    stackView.spacing = 20;
    [self.view addSubview:stackView];

    [NSLayoutConstraint activateConstraints:@[
        [stackView.leftAnchor constraintEqualToSystemSpacingAfterAnchor:self.view.leftAnchor multiplier:2],
        [self.view.rightAnchor constraintEqualToSystemSpacingAfterAnchor:stackView.rightAnchor multiplier:2],
        [stackView.topAnchor constraintEqualToSystemSpacingBelowAnchor:self.view.topAnchor multiplier:2],
    ]];
}

- (void)pay {
    // ...
}

@end
</code></div></pre>

</div>

</div>
</div>

<p>Run your app, and make sure your checkout screen shows the card component and pay button.</p>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="ios-collect-card-details" href="payment-intents/web-manual.html#ios-collect-card-details" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Collect card details">
        <span class="expando-left-text">3</span>
      Collect card details
        <span class="tag optional">Client-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>When your customer is ready to check out, create a <a href="../api/payment_methods.html">PaymentMethod</a> with the details collected by the card element.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="swift">Swift</a>
<a data-language="objc">Objective-C</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="swift">
  <nav class="nav-filename icon-file">
<span>
CheckoutViewController.swift
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-swift numbered"><div class="file-content-wrapper"><code>
class CheckoutViewController: UIViewController {

    // ...

    @objc
    func pay() {
        // Collect card details on the client
        let cardParams = cardTextField.cardParams
        let paymentMethodParams = STPPaymentMethodParams(card: cardParams, billingDetails: nil, metadata: nil)
        STPAPIClient.shared().createPaymentMethod(with: paymentMethodParams) { [weak self] paymentMethod, error in
            // Create PaymentMethod failed
            if let createError = error {
                self?.displayAlert(title: "Payment failed", message: createError.localizedDescription)
            }
            if let paymentMethodId = paymentMethod?.stripeId {
                self?.pay(withPaymentMethod: paymentMethodId)
            }
        }
    }

    func pay(withPaymentMethod paymentMethodId: String? = nil, withPaymentIntent paymentIntentId: String? = nil) {
        // ...continued in the next step
    }

    // ...
}
</code></div></pre>

</div>
<div class="code" data-language="objc">
  <nav class="nav-filename icon-file">
<span>
CheckoutViewController.m
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-objc numbered"><div class="file-content-wrapper"><code>
@implementation CheckoutViewController

// ...

- (void)pay {
    // Collect card details on the client
    STPPaymentMethodCardParams *cardParams = self.cardTextField.cardParams;
    STPPaymentMethodParams *paymentMethodParams = [STPPaymentMethodParams paramsWithCard:cardParams billingDetails:nil metadata:nil];
    [[STPAPIClient sharedClient] createPaymentMethodWithParams:paymentMethodParams completion:^(STPPaymentMethod *paymentMethod, NSError *createError) {
        // Create PaymentMethod failed
        if (createError != nil) {
            [self displayAlertWithTitle:@"Payment failed" message:createError.localizedDescription ?: @"" restartDemo:NO];
        }
        else if (paymentMethod != nil) {
            // Create a PaymentIntent on the server with a PaymentMethod
            NSLog(@"Created PaymentMethod");
            [self payWithPaymentMethod:paymentMethod.stripeId orPaymentIntent:nil];
        }
    }];
}

// ...

@end
</code></div></pre>

</div>

</div>
</div>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="ios-create-payment-intent" href="payment-intents/web-manual.html#ios-create-payment-intent" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Create a PaymentIntent">
        <span class="expando-left-text">4</span>
      Create a PaymentIntent
        <span class="tag optional">Client-side</span>
        <span class="tag optional">Server-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>Stripe uses a <code>PaymentIntent</code> object to represent your intent to collect payment from a customer, tracking your charge attempts and payment state changes throughout the process.</p>

<h3 id="on-the-server">On the server</h3>

<p>Add an endpoint that creates the PaymentIntent with the following parameters:</p>

<ul>
  <li><a href="../api/payment_intents/create.html#create_payment_intent-payment_method">payment_method_id</a> - the id of the PaymentMethod from the previous step</li>
  <li><a href="../api/payment_intents/confirm.html#confirm_payment_intent-return_url">return_url</a> - include if you&rsquo;ve <a href="3d-secure.html#when-to-use-3d-secure">set up a return URL</a></li>
  <li><a href="../api/payment_intents/create.html#confirm_payment_intent-use_stripe_sdk">use_stripe_sdk</a>
    <ul>
      <li>For apps that integrate with <a href="https://github.com/stripe/stripe-ios/blob/master/CHANGELOG.md#1600-2019-07-18">Stripe iOS SDK v16.0.0</a> and above, the value of this parameter must be set to <code>true</code></li>
      <li>For apps that integrate with older SDK versions, <strong>do not pass this parameter</strong></li>
    </ul>
  </li>
  <li><a href="../api/payment_intents/create.html#create_payment_intent-confirm">confirm</a> - Set this to true to <span class="tooltip-wrapper"><span class="tooltip-content definition">confirm</span><template class="tooltip"><span class="definition"><em>Confirming</em> a PaymentIntent indicates that the customer intends to pay with the current or provided payment method. Upon confirmation, the PaymentIntent attempts to initiate a payment.</span></template></span> the PaymentIntent</li>
</ul>

<p>If you want to save the card to reuse later, create a <a href="../api/customers/create.html">Customer</a> to store the PaymentMethod and pass the following additional parameters when creating the PaymentIntent:</p>

<ul>
  <li><a href="../api/payment_intents/create.html#create_payment_intent-customer">customer</a>. Set to the ID of the Customer.</li>
  <li><a href="../api/payment_intents/create.html#create_payment_intent-setup_future_usage">setup_future_usage</a>. Set to <code>off_session</code> to tell Stripe that you plan to reuse this PaymentMethod for off-session payments when your customer is not present. Setting this property saves the PaymentMethod to the Customer after the PaymentIntent is confirmed and any required actions from the user are complete.</li>
</ul>

<p>Once the PaymentIntent is created, return the following to the client:</p>

<ul>
  <li>the PaymentIntent&rsquo;s <a href="../api/payment_intents/object.html#payment_intent_object-client_secret">client secret</a></li>
  <li><code>requiresAction: true</code> if the PaymentIntent <a href="../api/payment_intents/object.html#payment_intent_object-status">status</a> is <code>requires_action</code></li>
</ul>

<aside class="important checkmark">
  <p>See an <a href="https://github.com/stripe-samples/accept-a-card-payment/tree/master/without-webhooks/server">example server implementation</a>.</p>
</aside>

<h3 id="on-the-client">On the client</h3>
<p>Request a <code>PaymentIntent</code> from your server. This example passes the server a list of items to determine the price. Always decide how much to charge on the server side, a trusted environment, as opposed to the client. This prevents malicious customers from being able to choose their own prices.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="swift">Swift</a>
<a data-language="objc">Objective-C</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="swift">
  <nav class="nav-filename icon-file">
<span>
CheckoutViewController.swift
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-swift numbered has-extra-lines"><div class="file-content-wrapper"><code>let BackendUrl = "http://127.0.0.1:4242/"

class CheckoutViewController: UIViewController {

    // ...

    func displayAlert(title: String, message: String, restartDemo: Bool = false) {
        // ...omitted for brevity
    }

    func pay(withPaymentMethod paymentMethodId: String? = nil, withPaymentIntent paymentIntentId: String? = nil) {
        // Create a PaymentIntent on the server
        let url = URL(string: BackendUrl + "pay")!
        var json: [String: Any] = [:]
        if let paymentMethodId = paymentMethodId {</code></div></pre>
<a class="show-extra-lines">See all 61 lines</a>
<span class="extra-lines">            json = [
                "useStripeSdk": true,
                "paymentMethodId": paymentMethodId,
                "currency": "usd",
                "items": [
                    "id": "photo_subscription"
                ]
            ]
        }
        else if let paymentIntentId = paymentIntentId {
            json = [
                "paymentIntentId": paymentIntentId,
            ]
        }
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")
        request.httpBody = try? JSONSerialization.data(withJSONObject: json)
        let task = URLSession.shared.dataTask(with: request, completionHandler: { [weak self] (data, response, requestError) in
            guard let response = response as? HTTPURLResponse,
                response.statusCode == 200,
                let data = data,
                let json = try? JSONSerialization.jsonObject(with: data, options: []) as? [String : Any] else {
                    self?.displayAlert(title: "Payment failed", message: requestError?.localizedDescription ?? "")
                    return
            }
            let payError = json["error"] as? String
            let clientSecret = json["clientSecret"] as? String
            let requiresAction = json["requiresAction"] as? Bool

            // Payment failed
            if let payError = payError {
                self?.displayAlert(title: "Payment failed", message: payError)
            }
            // Payment succeeded, no additional action required
            else if clientSecret != nil &amp;&amp; (requiresAction == nil || requiresAction == false) {
                self?.displayAlert(title: "Payment succeeded", message: clientSecret ?? "", restartDemo: true)
            }
            // Payment requires additional action
            else if clientSecret != nil &amp;&amp; requiresAction == true &amp;&amp; self != nil {
                // ...continued in the next step
            }
        })
        task.resume()
    }
}</span>

</div>
<div class="code" data-language="objc">
  <nav class="nav-filename icon-file">
<span>
CheckoutViewController.m
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-objc numbered"><div class="file-content-wrapper"><code>@implementation CheckoutViewController

// ...

- (void)displayAlertWithTitle:(NSString *)title message:(NSString *)message restartDemo:(BOOL)restartDemo {
    // ...omitted for brevity
}

- (void)payWithPaymentMethod:(NSString *)paymentMethodId orPaymentIntent:(NSString *)paymentIntentId {
    NSDictionary *json = @{};
    if (paymentMethodId != nil) {
        json = @{
            @"useStripeSdk": @YES,
            @"paymentMethodId": paymentMethodId,
            @"currency": @"usd",
            @"items": @[
                    @{@"id": @"photo_subscription"}
            ]
        };
    }
    else {
        json = @{
            @"paymentIntentId": paymentIntentId,
        };
    }
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@pay", BackendUrl]];
    NSData *body = [NSJSONSerialization dataWithJSONObject:json options:0 error:nil];
    NSMutableURLRequest *request = [[NSURLRequest requestWithURL:url] mutableCopy];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:body];
    NSURLSessionTask *task = [[NSURLSession sharedSession] dataTaskWithRequest:request completionHandler:^(NSData *data, NSURLResponse *response, NSError *requestError) {
        NSError *error = requestError;
        NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:0 error:&amp;error];
        NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;
        // Request failed
        if (error != nil || httpResponse.statusCode != 200) {
            [self displayAlertWithTitle:@"Payment failed" message:error.localizedDescription ?: @"" restartDemo:NO];
        }
        else {
            NSNumber *requiresAction = json[@"requiresAction"];
            NSString *clientSecret = json[@"clientSecret"];
            NSString *payError = json[@"error"];
            // Payment failed
            if (payError != nil) {
                [self displayAlertWithTitle:@"Payment failed" message:payError restartDemo:NO];
            }
            // Payment succeeded
            else if (clientSecret != nil &amp;&amp; (requiresAction == nil || [requiresAction isEqualToNumber:@NO])) {
                [self displayAlertWithTitle:@"Payment succeeded" message:clientSecret restartDemo:YES];
            }
            // Payment requires additional actions
            else if (clientSecret != nil &amp;&amp; [requiresAction isEqualToNumber:@YES]) {
                // ...continued in the next step
            }
        }
    }];
    [task resume];
}

// ...

@end
</code></div></pre>

</div>

</div>
</div>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="ios-handle-next-actions" href="payment-intents/web-manual.html#ios-handle-next-actions" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Handle any next actions">
        <span class="expando-left-text">5</span>
      Handle any next actions
        <span class="tag optional">Client-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>Write code to handle situations that require your customer to intervene. A normal payment succeeds after you confirm it on the server in <a href="payment-intents/web-manual.html#ios-create-payment-intent">step 4</a>. However, when the PaymentIntent requires additional action from the customer, such as authenticating with <span class="tooltip-wrapper"><span class="tooltip-content definition"><a href="3d-secure.html">3D Secure</a></span><template class="tooltip"><span class="definition"><em>3D Secure</em> provides an additional layer of authentication for credit card transactions that protects merchants from liability for fraudulent card payments.</span></template></span>, this code comes into play.</p>

<p>In these cases, the PaymentIntent&rsquo;s status is set to <code>requires_action</code>. On the client, pass the PaymentIntent ID to <a href="https://stripe.dev/stripe-ios/docs/Classes/STPPaymentHandler#/c:objc(cs)STPPaymentHandler(im)handleNextActionForPayment:withAuthenticationContext:returnURL:completion:">STPPaymentHandler handleNextActionForPayment</a>. <code>STPPaymentHandler</code> presents view controllers, using the <a href="https://stripe.dev/stripe-ios/docs/Protocols/STPAuthenticationContext.html" class="external" target="_blank">STPAuthenticationContext</a> passed in, and walks the customer through authentication. For more details, read about <a href="3d-secure.html#ios">3D Secure authentication on iOS</a>.</p>

<p>After handling required actions on the client, the status of the PaymentIntent changes to <code>requires_confirmation</code>. This step enables your integration to synchronously <span class="tooltip-wrapper"><span class="tooltip-content definition">fulfill</span><template class="tooltip"><span class="definition"><em>Fulfillment</em> is the process of providing the goods or services purchased by a customer, typically after payment is collected.</span></template></span> the order on your backend and return the fulfillment result to your client.</p>

<p>Send the PaymentIntent ID to your backend and confirm it again within one hour to finalize the payment. Otherwise, the payment attempt fails and transitions back to <code>requires_payment_method</code>.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="swift">Swift</a>
<a data-language="objc">Objective-C</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="swift">
  <nav class="nav-filename icon-file">
<span>
CheckoutViewController.swift
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-swift numbered has-extra-lines"><div class="file-content-wrapper"><code>class CheckoutViewController: UIViewController {

    // ...

    // Create or confirm a PaymentIntent on the server
    func pay(withPaymentMethod paymentMethodId: String? = nil, withPaymentIntent paymentIntentId: String? = nil) {
        // ...
            // Payment requires additional action
            else if clientSecret != nil &amp;&amp; requiresAction == true &amp;&amp; self != nil {
                let paymentHandler = STPPaymentHandler.shared()
                paymentHandler.handleNextAction(forPayment: clientSecret!, authenticationContext: self!, returnURL: nil) { status, paymentIntent, handleActionError in
                    switch (status) {
                    case .failed:
                        self?.displayAlert(title: "Payment failed", message: handleActionError?.localizedDescription ?? "")
                        break</code></div></pre>
<a class="show-extra-lines">See all 42 lines</a>
<span class="extra-lines">                    case .canceled:
                        self?.displayAlert(title: "Payment canceled", message: handleActionError?.localizedDescription ?? "")
                        break
                    case .succeeded:
                        if let paymentIntent = paymentIntent, paymentIntent.status == STPPaymentIntentStatus.requiresConfirmation {
                            print("Re-confirming PaymentIntent after handling action")
                            self?.pay(withPaymentIntent: paymentIntent.stripeId)
                        }
                        else {
                            self?.displayAlert(title: "Payment succeeded", message: paymentIntent?.description ?? "", restartDemo: true)
                        }
                        break
                    @unknown default:
                        fatalError()
                        break
                    }
                }
            }
        // ...
    }
}

extension CheckoutViewController: STPAuthenticationContext {
    func authenticationPresentingViewController() -&gt; UIViewController {
        return self
    }
}</span>

</div>
<div class="code" data-language="objc">
  <nav class="nav-filename icon-file">
<span>
CheckoutViewController.m
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-objc numbered"><div class="file-content-wrapper"><code>@implementation CheckoutViewController &lt;STPAuthenticationContext&gt;

// ...

- (void)payWithPaymentMethod:(NSString *)paymentMethodId orPaymentIntent:(NSString *)paymentIntentId {
    // ...
            // Payment requires additional actions
            else if (clientSecret != nil &amp;&amp; [requiresAction isEqualToNumber:@YES]) {
                STPPaymentHandler *paymentHandler = [STPPaymentHandler sharedHandler];
                [paymentHandler handleNextActionForPayment:clientSecret withAuthenticationContext:self returnURL:nil completion:^(STPPaymentHandlerActionStatus status, STPPaymentIntent *paymentIntent, NSError *handleActionError) {
                        switch (status) {
                            case STPPaymentHandlerActionStatusFailed: {
                                [self displayAlertWithTitle:@"Payment failed" message:handleActionError.localizedDescription ?: @"" restartDemo:NO];
                                break;
                            }
                            case STPPaymentHandlerActionStatusCanceled: {
                                [self displayAlertWithTitle:@"Payment canceled" message:handleActionError.localizedDescription ?: @"" restartDemo:NO];
                                break;
                            }
                            case STPPaymentHandlerActionStatusSucceeded: {
                                // After handling a required action on the client, the status of the PaymentIntent is
                                // requires_confirmation. You must send the PaymentIntent ID to your backend
                                // and confirm it to finalize the payment. This step enables your integration to
                                // synchronously fulfill the order on your backend and return the fulfillment result
                                // to your client.
                                if (paymentIntent.status == STPPaymentIntentStatusRequiresConfirmation) {
                                    NSLog(@"Re-confirming PaymentIntent after handling action");
                                    [self payWithPaymentMethod:nil orPaymentIntent:paymentIntent.stripeId];
                                }
                                else {
                                    [self displayAlertWithTitle:@"Payment succeeded" message:paymentIntent.description restartDemo:YES];
                                }
                                break;
                            }
                            default:
                                break;
                        }
                }];
            }
    // ...
}

# pragma mark STPAuthenticationContext
- (UIViewController *)authenticationPresentingViewController {
    return self;
}

@end
</code></div></pre>

</div>

</div>
</div>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="ios-test-integration" href="payment-intents/web-manual.html#ios-test-integration" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Test the integration">
        <span class="expando-left-text">6</span>
      Test the integration
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>By this point you should have a basic card integration that collects card details and makes a payment.</p>

<p>There are several test cards you can use in test mode to make sure this integration is ready. Use them with any CVC, postal code, and future expiration date.</p>

<table class="alternate">
  <thead>
    <tr>
      <th>Number</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="card-number">4242<span></span>4242<span></span>4242<span></span>4242</td>
      <td>Succeeds and immediately processes the payment.</td>
    </tr>
    <tr>
      <td class="card-number">4000<span></span>0025<span></span>0000<span></span>3155</td>
      <td>Requires authentication. Stripe will trigger a modal asking for the customer to authenticate.</td>
    </tr>
    <tr>
      <td class="card-number">4000<span></span>0000<span></span>0000<span></span>9995</td>
      <td>Always fails with a decline code of <code>insufficient_funds</code>.</td>
    </tr>
  </tbody>
</table>

<p>For the full list of test cards see our guide on <a href="../testing.html">testing</a>.</p>
  </div>
</div>

<h2 id="next-steps">Next steps</h2>

<p>Now that you have a working integration, test your payment flows using the test card numbers and PaymentMethods:</p>

<ul class="next-steps">
    <li><a href="../apple-pay.html"><span>Accept Apple Pay</span></a></li>
</ul>

</div>
<div class="tabs-tab" id="android">
<h2 id="android-overview">Overview</h2>

<p>For a wider range of support and future proofing, we strongly recommend our <a href="payment-intents/quickstart.html">standard integration</a> for asynchronous payments.</p>

<p>This guide lets you use a single client-to-server flow to take payments, without using webhooks or processing offline events. While it may seem simpler, this integration will be difficult to scale as your business grows. Synchronous payment flows have several limitations:</p>

<ul>
  <li><strong>Only supports cards</strong>: You&rsquo;ll have to write more code to support ACH and popular regional payment methods separately.</li>
  <li><strong>Double-charge risk</strong>: By synchronously creating a new PaymentIntent each time your customer attempts to pay, you risk accidentally double-charging your customer. Be sure to follow best practices.</li>
  <li><strong>Manual authentication handling</strong>: If your customer has a card with 3D Secure or is subject to regulations like Strong Customer Authentication, you&rsquo;ll have to make extra trips to the client.</li>
</ul>

<p>If you don&rsquo;t mind these limitations, feel free to integrate. Otherwise, use the <a href="payment-intents/quickstart.html">standard integration</a>.</p>

<aside class="important checkmark">
  <p>Clone <a href="https://github.com/stripe-samples/accept-a-card-payment">our sample repo</a> for a full implementation of this guide, with client and server code under the <code>/without-webhooks</code> directory.</p>
</aside>
<div class="expando" aria-expanded="true">
  <a id="android-setup" href="payment-intents/web-manual.html#android-setup" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Set up Stripe">
        <span class="expando-left-text">1</span>
      Set up Stripe
        <span class="tag optional">Client-side</span>
        <span class="tag optional">Server-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>First, you need a Stripe account. <a href="https://dashboard.stripe.com/register">Register now</a>.</p>

<h3 id="server-side">Server-side</h3>

<p>This integration requires endpoints on your server that talk to the Stripe API. Use our official libraries for access to the Stripe API from your server:</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="java">Java</a>
<a data-language="node">Node</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="ruby">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Available as a gem
sudo gem install stripe</code></div></pre>
<nav class="nav-filename icon-file">
<span>
Gemfile
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-ruby not-numbered"><div class="file-content-wrapper"><code># If you use bundler, you can add this line to your Gemfile
gem 'stripe'</code></div></pre>

</div>
  
<div class="code" data-language="python">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install through pip
pip install --upgrade stripe</code></div></pre>
<nav class="nav-filename icon-false">
<span>
PyPI
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Or find the Stripe package on http://pypi.python.org/pypi/stripe/</code></div></pre>

</div>
  
<div class="code" data-language="php">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install the PHP library via Composer
composer require stripe/stripe-php</code></div></pre>
<nav class="nav-filename icon-false">
<span>
Source
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Or download the source directly: https://github.com/stripe/stripe-php/releases</code></div></pre>

</div>
  
<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
build.gradle
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-java not-numbered"><div class="file-content-wrapper"><code>/*
 For Gradle, add the following dependency to your build.gradle and replace {VERSION} with
 the version number you want to use from
 - https://mvnrepository.com/artifact/com.stripe/stripe-java or
 - https://github.com/stripe/stripe-java/releases/latest
*/
implementation "com.stripe:stripe-java:{VERSION}"</code></div></pre>
<nav class="nav-filename icon-file">
<span>
pom.xml
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-xml not-numbered"><div class="file-content-wrapper"><code>&lt;!--
  For Maven, add the following dependency to your POM and replace {VERSION} with the
  version number you want to use from
  - https://mvnrepository.com/artifact/com.stripe/stripe-java or
  - https://github.com/stripe/stripe-java/releases/latest
--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.stripe&lt;/groupId&gt;
  &lt;artifactId&gt;stripe-java&lt;/artifactId&gt;
  &lt;version&gt;{VERSION}&lt;/version&gt;
&lt;/dependency&gt;</code></div></pre>
<nav class="nav-filename icon-false">
<span>
Other environments
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># For other environments, manually install the following JARs:
# - The Stripe JAR from https://github.com/stripe/stripe-java/releases/latest
# - Google Gson from https://github.com/google/gson</code></div></pre>

</div>
  
<div class="code" data-language="node">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install via npm
npm install --save stripe</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install stripe-go
go get -u github.com/stripe/stripe-go</code></div></pre>
<nav class="nav-filename icon-file">
<span>
app.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-go not-numbered"><div class="file-content-wrapper"><code>// Then import the package
import (
  "github.com/stripe/stripe-go/v71"
)</code></div></pre>

</div>
  
<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Install via dotnet
dotnet add package Stripe.net
dotnet restore</code></div></pre>
<nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered"><div class="file-content-wrapper"><code># Or install via NuGet
PM&gt; Install-Package Stripe.net</code></div></pre>

</div>


</div>
</div>


<h3 id="client-side">Client-side</h3>

<p>The <a href="https://github.com/stripe/stripe-android" class="external" target="_blank">Android SDK</a> is open source and <a href="https://stripe.dev/stripe-android/" class="external" target="_blank">fully documented</a>.</p>

<p>To install the SDK, add <code>stripe-android</code> to the <code>dependencies</code> block of your <a href="https://developer.android.com/studio/build/dependencies" class="external" target="_blank"><code>app/build.gradle</code></a> file:</p>
<div class="code" data-language="gradle">
  <nav class="nav-filename icon-file">
<span>
build.gradle
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-gradle numbered"><div class="file-content-wrapper"><code>apply plugin: 'com.android.application'

android { ... }

dependencies {
  // ...

  // Stripe Android SDK
  implementation 'com.stripe:stripe-android:14.4.1'
}
</code></div></pre>

</div>

<aside class="important neutral">
  <p>For details on the latest SDK release and past versions, see the <a href="https://github.com/stripe/stripe-android/releases" class="external" target="_blank">Releases</a> page on GitHub. To receive notifications when a new release is published, <a href="https://help.github.com/en/articles/watching-and-unwatching-releases-for-a-repository#watching-releases-for-a-repository" class="external" target="_blank">watch releases for the repository</a>.</p>
</aside>

<p>Configure the SDK with your Stripe <a href="https://dashboard.stripe.com/account/apikeys">publishable key</a> so that it can make requests to the Stripe API, such as in your <code>Application</code> subclass:</p>
<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="kotlin">Kotlin</a>
<a data-language="java">Java</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="kotlin">
  <pre class="language-kotlin numbered"><div class="file-content-wrapper"><code>import com.stripe.android.PaymentConfiguration

class MyApp : Application() {
    override fun onCreate() {
        super.onCreate()
        PaymentConfiguration.init(
            applicationContext,
            "pk_test_TYooMQauvdEDq54NiTphI7jx"
        )
    }
}
</code></div></pre>

</div>
<div class="code" data-language="java">
  <pre class="language-java numbered"><div class="file-content-wrapper"><code>import com.stripe.android.PaymentConfiguration;

public class MyApp extends Application {
    @Override
    public void onCreate() {
        super.onCreate();
        PaymentConfiguration.init(
            getApplicationContext(),
            "pk_test_TYooMQauvdEDq54NiTphI7jx"
        );
    }
}
</code></div></pre>

</div>

</div>
</div>

<aside class="important checkmark">
  <p>Use your <a href="../keys.html#obtain-api-keys">test mode</a> keys while you test and develop, and your <a href="../keys.html#test-live-modes">live mode</a> keys before you publish your app.</p>
</aside>

<p>Our code samples also use <a href="https://github.com/square/okhttp" class="external" target="_blank">OkHttp</a> and <a href="https://github.com/google/gson" class="external" target="_blank">GSON</a> to make HTTP requests to a server.</p>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="android-create-checkout-screen" href="payment-intents/web-manual.html#android-create-checkout-screen" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Create your checkout screen">
        <span class="expando-left-text">2</span>
      Create your checkout screen
        <span class="tag optional">Client-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>Securely collect card information on the client with <a href="https://stripe.dev/stripe-android/com/stripe/android/view/CardInputWidget.html" class="external" target="_blank">CardInputWidget</a>, a drop-in UI component provided by the SDK.</p>

<div class="image">
  <video width="400" height="100" autoplay="" loop="" muted="" playsinline="">
  <source src="https://d37ugbyn3rpeym.cloudfront.net/docs/mobile/android/android-card-input-widget.mp4" type="video/mp4"></source>
</video>
  <p><a href="https://stripe.dev/stripe-android/com/stripe/android/view/CardInputWidget.html" class="external" target="_blank">CardInputWidget</a> performs on-the-fly validation and formatting.</p>
</div>

<p>Create an instance of the card component and a &ldquo;Pay&rdquo; button by adding the following to your checkout page&rsquo;s layout:</p>

<div class="code" data-language="xml">
  <nav class="nav-filename icon-file">
<span>
content_checkout.xml
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-xml numbered"><div class="file-content-wrapper"><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="@string/appbar_scrolling_view_behavior"
        tools:showIn="@layout/activity_checkout"
        tools:context=".CheckoutActivity"&gt;

    &lt;!--  ...  --&gt;

    &lt;com.stripe.android.view.CardInputWidget
            android:id="@+id/cardInputWidget"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"/&gt;

    &lt;Button
            android:text="Pay"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/payButton"
            android:layout_marginTop="20dp"
            app:layout_constraintTop_toBottomOf="@+id/cardInputWidget"
            app:layout_constraintStart_toStartOf="@+id/cardInputWidget"
            app:layout_constraintEnd_toEndOf="@+id/cardInputWidget"/&gt;

      &lt;!--  ...  --&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></div></pre>

</div>

<p>Run your app, and make sure your checkout screen shows the card component and pay button.</p>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="android-collect-card-details" href="payment-intents/web-manual.html#android-collect-card-details" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Collect card details">
        <span class="expando-left-text">3</span>
      Collect card details
        <span class="tag optional">Client-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>When your customer is ready to check out, create a <a href="../api/payment_methods.html">PaymentMethod</a> with the details collected by the card element.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="kotlin">Kotlin</a>
<a data-language="java">Java</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="kotlin">
  <nav class="nav-filename icon-file">
<span>
CheckoutActivity.kt
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-kotlin numbered"><div class="file-content-wrapper"><code>class CheckoutActivity : AppCompatActivity() {
    private lateinit var stripe: Stripe
    // ...

    private fun pay() {
        val weakActivity = WeakReference&lt;Activity&gt;(this)
        // Collect card details on the client
        val cardInputWidget =
            findViewById&lt;CardInputWidget&gt;(R.id.cardInputWidget)
        val params = cardInputWidget.paymentMethodCreateParams
        if (params == null) {
            return
        }

        // Configure the SDK with your Stripe publishable key so that it can make requests to the Stripe API
        stripe = Stripe(applicationContext, PaymentConfiguration.getInstance(applicationContext).publishableKey)
        stripe.createPaymentMethod(params, object : ApiResultCallback&lt;PaymentMethod&gt; {
            // Create PaymentMethod failed
            override fun onError(e: Exception) {
                displayAlert(weakActivity.get(), "Payment failed", "Error: $e")
            }
            override fun onSuccess(result: PaymentMethod) {
                // Create a PaymentIntent on the server with a PaymentMethod
                print("Created PaymentMethod")
                pay(result.id, null)
            }
        })
    }

    private fun pay(paymentMethod: String?, paymentIntent: String?) {
        // ...
    }
}
</code></div></pre>

</div>

<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
CheckoutActivity.java
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-java numbered"><div class="file-content-wrapper"><code>public class CheckoutActivity extends AppCompatActivity {
    private Stripe stripe;
    // ...

    private void pay() {
        CardInputWidget cardInputWidget = findViewById(R.id.cardInputWidget);
        PaymentMethodCreateParams params = cardInputWidget.getPaymentMethodCreateParams();

        if (params == null) {
            return;
        }

        // Configure the SDK with your Stripe publishable key so that it can make requests to the Stripe API
        stripe = Stripe(applicationContext, PaymentConfiguration.getInstance(applicationContext).getPublishableKey());
        stripe.createPaymentMethod(params, new ApiResultCallback&lt;PaymentMethod&gt;() {
            @Override
            public void onSuccess(@NonNull PaymentMethod result) {
                // Create and confirm the PaymentIntent by calling the sample server's /pay endpoint.
                pay(result.id, null);
            }

            @Override
            public void onError(@NonNull Exception e) {

            }
        });
    }

    private void pay(@Nullable String paymentMethodId, @Nullable String paymentIntentId) {
        // ...continued in the next step
    }

</code></div></pre>

</div>

</div>
</div>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="android-create-payment-intent" href="payment-intents/web-manual.html#android-create-payment-intent" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Create a PaymentIntent">
        <span class="expando-left-text">4</span>
      Create a PaymentIntent
        <span class="tag optional">Client-side</span>
        <span class="tag optional">Server-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>Stripe uses a <code>PaymentIntent</code> object to represent your intent to collect payment from a customer, tracking your charge attempts and payment state changes throughout the process.</p>

<h3 id="on-the-server">On the server</h3>

<p>Add an endpoint that creates the PaymentIntent with the following parameters:</p>

<ul>
  <li><a href="../api/payment_intents/create.html#create_payment_intent-payment_method">payment_method_id</a> - the id of the PaymentMethod from the previous step</li>
  <li><a href="../api/payment_intents/create.html#confirm_payment_intent-use_stripe_sdk">use_stripe_sdk</a>
    <ul>
      <li>For apps that integrate with <a href="https://github.com/stripe/stripe-android/blob/master/CHANGELOG.md#1000---2019-07-19">Stripe Android SDK v10.0.0</a> and above, the value of this parameter must be set to <code>true</code></li>
      <li>For apps that integrate with older SDK versions, <strong>do not pass this parameter</strong></li>
    </ul>
  </li>
  <li><a href="../api/payment_intents/create.html#create_payment_intent-confirm">confirm</a> - Set this to true to <span class="tooltip-wrapper"><span class="tooltip-content definition">confirm</span><template class="tooltip"><span class="definition"><em>Confirming</em> a PaymentIntent indicates that the customer intends to pay with the current or provided payment method. Upon confirmation, the PaymentIntent attempts to initiate a payment.</span></template></span> the PaymentIntent</li>
</ul>

<p>If you want to save the card to reuse later, create a <a href="../api/customers/create.html">Customer</a> to store the PaymentMethod and pass the following additional parameters when creating the PaymentIntent:</p>

<ul>
  <li><a href="../api/payment_intents/create.html#create_payment_intent-customer">customer</a>. Set to the ID of the Customer.</li>
  <li><a href="../api/payment_intents/create.html#create_payment_intent-setup_future_usage">setup_future_usage</a>. Set to <code>off_session</code> to tell Stripe that you plan to reuse this PaymentMethod for off-session payments when your customer is not present. Setting this property saves the PaymentMethod to the Customer after the PaymentIntent is confirmed and any required actions from the user are complete.</li>
</ul>

<p>Once the PaymentIntent is created, return the following to the client:</p>

<ul>
  <li>the PaymentIntent&rsquo;s <a href="../api/payment_intents/object.html#payment_intent_object-client_secret">client secret</a></li>
  <li><code>requiresAction: true</code> if the PaymentIntent <a href="../api/payment_intents/object.html#payment_intent_object-status">status</a> is <code>requires_action</code></li>
</ul>

<aside class="important checkmark">
  <p>See an <a href="https://github.com/stripe-samples/accept-a-card-payment/tree/master/without-webhooks/server">example server implementation</a>.</p>
</aside>

<h3 id="on-the-client">On the client</h3>
<p>Request a <code>PaymentIntent</code> from your server. This example passes the server a list of items to determine the price. Always decide how much to charge on the server side, a trusted environment, as opposed to the client. This prevents malicious customers from being able to choose their own prices.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="kotlin">Kotlin</a>
<a data-language="java">Java</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="kotlin">
  <nav class="nav-filename icon-file">
<span>
CheckoutActivity.kt
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-kotlin numbered"><div class="file-content-wrapper"><code>class CheckoutActivity : AppCompatActivity() {
    private val backendUrl = "http://10.0.2.2:4242/"
    private val httpClient = OkHttpClient()

    private fun displayAlert(activity: Activity?, title: String, message: String, restartDemo: Boolean = false) {
        // omitted for brevity
    }

    private fun pay(paymentMethod: String?, paymentIntent: String?) {
        val weakActivity = WeakReference&lt;Activity&gt;(this)
        var json = ""
        if (!paymentMethod.isNullOrEmpty()) {
            json = """
                {
                    "useStripeSdk":true,
                    "paymentMethodId":"$paymentMethod",
                    "currency":"usd",
                    "items": [
                        {"id":"photo_subscription"}
                    ]
                }
                """
        }
        else if (!paymentIntent.isNullOrEmpty()) {
            json = """
                {
                    "paymentIntentId":"$paymentIntent"
                }
                """
        }
        // Create a PaymentIntent on the server
        val mediaType = "application/json; charset=utf-8".toMediaType()
        val body = json.toRequestBody(mediaType)
        val request = Request.Builder()
            .url(backendUrl + "pay")
            .post(body)
            .build()
        httpClient.newCall(request)
            .enqueue(object: Callback {
                override fun onFailure(call: Call, e: IOException) {
                    displayAlert(weakActivity.get(), "Payment failed", "Error: $e")
                }

                override fun onResponse(call: Call, response: Response) {
                    // Request failed
                    if (!response.isSuccessful) {
                        displayAlert(weakActivity.get(), "Payment failed", "Error: $response")
                    } else {
                        val responseData = response.body?.string()
                        var responseJson = JSONObject(responseData)
                        val payError: String? = responseJson.optString("error")
                        val clientSecret: String? = responseJson.optString("clientSecret")
                        val requiresAction: Boolean? = responseJson.optBoolean("requiresAction")
                        // Payment failed
                        if (payError != null &amp;&amp; payError.isNotEmpty()) {
                            displayAlert(weakActivity.get(), "Payment failed", "Error: $payError")
                        }
                        // Payment succeeded
                        else if ((clientSecret != null &amp;&amp; clientSecret.isNotEmpty())
                            &amp;&amp; (requiresAction == null || requiresAction == false)) {
                            displayAlert(weakActivity.get(), "Payment succeeded", "$clientSecret", restartDemo = true)
                        }
                        // Payment requires additional actions
                        else if ((clientSecret != null &amp;&amp; clientSecret.isNotEmpty())
                            &amp;&amp; requiresAction == true) {
                            runOnUiThread {
                                if (weakActivity.get() != null) {
                                    // ...continued in the next step
                                }
                            }
                        }
                    }
                }
            })
    }
}
</code></div></pre>

</div>
<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
CheckoutActivity.java
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-java numbered"><div class="file-content-wrapper"><code>public class CheckoutActivity extends AppCompatActivity {
    private static final String BACKEND_URL = "http://10.0.2.2:4242/";
    private OkHttpClient httpClient = new OkHttpClient();

    private void pay(@Nullable String paymentMethodId, @Nullable String paymentIntentId) {
        final MediaType mediaType = MediaType.get("application/json; charset=utf-8");
        final String json;
        if (paymentMethodId != null) {
            json = "{"
                    + "\"useStripeSdk\":true,"
                    + "\"paymentMethodId\":" + "\"" + paymentMethodId + "\","
                    + "\"currency\":\"usd\","
                    + "\"items\":["
                    + "{\"id\":\"photo_subscription\"}"
                    + "]"
                    + "}";
        } else {
            json = "{"
                    + "\"paymentIntentId\":" +  "\"" + paymentIntentId + "\""
                    + "}";
        }
        RequestBody body = RequestBody.create(json, mediaType);
        Request request = new Request.Builder()
                .url(BACKEND_URL + "pay")
                .post(body)
                .build();
        httpClient
                .newCall(request)
                .enqueue(new PayCallback(this, stripe));
    }

    private void displayAlert(@NonNull String title, @NonNull String message, boolean restartDemo) {
        // ...omitted for brevity
    }

    private static final class PayCallback implements Callback {
        @NonNull private final WeakReference&lt;CheckoutActivity&gt; activityRef;
        @NonNull private final Stripe stripe;

        private PayCallback(@NonNull CheckoutActivity activity, @NonNull Stripe stripe) {
            this.activityRef = new WeakReference&lt;&gt;(activity);
            this.stripe = stripe;
        }

        @Override
        public void onFailure(@NonNull Call call, @NonNull IOException e) {
            final CheckoutActivity activity = activityRef.get();
            if (activity == null) {
                return;
            }

            activity.runOnUiThread(() -&gt; {
                Toast.makeText(activity, "Error: " + e.toString(), Toast.LENGTH_LONG).show();
            });
        }

        @Override
        public void onResponse(@NonNull Call call, @NonNull final Response response)
                throws IOException {
            final CheckoutActivity activity = activityRef.get();
            if (activity == null) {
                return;
            }

            if (!response.isSuccessful()) {
                activity.runOnUiThread(() -&gt; {
                    Toast.makeText(activity,
                            "Error: " + response.toString(), Toast.LENGTH_LONG).show();
                });
            } else {
                Gson gson = new Gson();
                Type type = new TypeToken&lt;Map&lt;String, String&gt;&gt;(){}.getType();
                Map&lt;String, String&gt; responseMap = gson.fromJson(response.body().string(), type);

                String error = responseMap.get("error");
                String paymentIntentClientSecret = responseMap.get("clientSecret");
                String requiresAction = responseMap.get("requiresAction");

                if (error != null) {
                    activity.displayAlert("Error", error, false);
                } else if (paymentIntentClientSecret != null) {
                    if ("true".equals(requiresAction)) {
                        // ...continued in the next step
                    } else {
                        activity.displayAlert("Payment succeeded",
                                paymentIntentClientSecret, true);
                    }
                }

            }
        }
    }

}
</code></div></pre>

</div>

</div>
</div>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="android-handle-next-actions" href="payment-intents/web-manual.html#android-handle-next-actions" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Handle any next actions">
        <span class="expando-left-text">5</span>
      Handle any next actions
        <span class="tag optional">Client-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>If the payment requires additional actions like <span class="tooltip-wrapper"><span class="tooltip-content definition"><a href="3d-secure.html">3D Secure authentication</a></span><template class="tooltip"><span class="definition"><em>3D Secure</em> provides an additional layer of authentication for credit card transactions that protects merchants from liability for fraudulent card payments.</span></template></span>, the PaymentIntent&rsquo;s status is set to <code>requires_action</code>. On the client, pass the <code>PaymentIntent</code> ID to <a href="https://stripe.dev/stripe-android/com/stripe/android/Stripe.html#authenticatePayment-activity-clientSecret-" class="external" target="_blank">authenticatePayment</a>. This SDK presents additional activities and walks the customer through authentication. See <a href="3d-secure.html#android">Supporting 3D Secure Authentication on Android</a> to learn more.</p>

<p>After handling a required action on the client, the status of the PaymentIntent is <code>requires_confirmation</code>. This step enables your integration to synchronously <span class="tooltip-wrapper"><span class="tooltip-content definition">fulfill</span><template class="tooltip"><span class="definition"><em>Fulfillment</em> is the process of providing the goods or services purchased by a customer, typically after payment is collected.</span></template></span> the order on your backend and return the fulfillment result to your client.</p>

<p>Send the PaymentIntent ID to your backend and confirm it again within one hour to finalize the payment. Otherwise, the payment attempt fails and transitions back to <code>requires_payment_method</code>.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged">
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="kotlin">Kotlin</a>
<a data-language="java">Java</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="kotlin">
  <nav class="nav-filename icon-file">
<span>
CheckoutActivity.kt
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-kotlin numbered"><div class="file-content-wrapper"><code>class CheckoutActivity : AppCompatActivity() {
    // ...

    private fun pay(paymentMethod: String?, paymentIntent: String?) {
        // ...
        val activity = weakActivity.get()!!
        stripe.authenticatePayment(activity, clientSecret)
        // ...
    }

    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        val weakActivity = WeakReference&lt;Activity&gt;(this)

        // Handle the result of stripe.authenticatePayment
        stripe.onPaymentResult(requestCode, data, object : ApiResultCallback&lt;PaymentIntentResult&gt; {
            override fun onSuccess(result: PaymentIntentResult) {
                val paymentIntent = result.intent
                val status = paymentIntent.status
                if (status == StripeIntent.Status.Succeeded) {
                    val gson = GsonBuilder().setPrettyPrinting().create()
                    displayAlert(weakActivity.get(), "Payment succeeded", gson.toJson(paymentIntent), restartDemo = true)
                } else if (status == StripeIntent.Status.RequiresPaymentMethod) {
                    // Payment failed &ndash; allow retrying using a different payment method
                    displayAlert(weakActivity.get(), "Payment failed", paymentIntent.lastPaymentError!!.message ?: "")
                }
                else if (status == StripeIntent.Status.RequiresConfirmation) {
                    print("Re-confirming PaymentIntent after handling a required action")
                    pay(null, paymentIntent.id)
                }
                else {
                    displayAlert(weakActivity.get(), "Payment status unknown", "unhandled status: $status", restartDemo = true)
                }
            }

            override fun onError(e: Exception) {
                // Payment request failed &ndash; allow retrying using the same payment method
                displayAlert(weakActivity.get(), "Payment failed", e.toString())
            }
        })
    }
}
</code></div></pre>

</div>
<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
CheckoutActivity.java
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"></path></svg>
</div>
</div>
</nav>
<pre class="language-java numbered"><div class="file-content-wrapper"><code>public class CheckoutActivity extends AppCompatActivity {

    // ...

    private static final class PayCallback implements Callback {
        // ...
        activity.runOnUiThread(() -&gt;
                stripe.authenticatePayment(activity, paymentIntentClientSecret));
        // ...
    }

    private static final class PaymentResultCallback
            implements ApiResultCallback&lt;PaymentIntentResult&gt; {
        private final WeakReference&lt;CheckoutActivity&gt; activityRef;

        PaymentResultCallback(@NonNull CheckoutActivity activity) {
            activityRef = new WeakReference&lt;&gt;(activity);
        }

        @Override
        public void onSuccess(@NonNull PaymentIntentResult result) {
            final CheckoutActivity activity = activityRef.get();
            if (activity == null) {
                return;
            }

            PaymentIntent paymentIntent = result.getIntent();
            PaymentIntent.Status status = paymentIntent.getStatus();
            if (status == PaymentIntent.Status.Succeeded) {
                // Payment completed successfully
                activity.runOnUiThread(() -&gt; {
                    Gson gson = new GsonBuilder().setPrettyPrinting().create();
                    activity.displayAlert("Payment completed",
                            gson.toJson(paymentIntent), true);
                });
            } else if (status == PaymentIntent.Status.RequiresPaymentMethod) {
                // Payment failed &ndash; allow retrying using a different payment method
                activity.runOnUiThread(() -&gt; activity.displayAlert("Payment failed",
                        paymentIntent.getLastPaymentError().message, false));
            } else if (status == PaymentIntent.Status.RequiresConfirmation) {
                // After handling a required action on the client, the status of the PaymentIntent is
                // requires_confirmation. You must send the PaymentIntent ID to your backend
                // and confirm it to finalize the payment. This step enables your integration to
                // synchronously fulfill the order on your backend and return the fulfillment result
                // to your client.
                activity.pay(null, paymentIntent.getId());
            }
        }

        @Override
        public void onError(@NonNull Exception e) {
            final CheckoutActivity activity = activityRef.get();
            if (activity == null) {
                return;
            }

            // Payment request failed &ndash; allow retrying using the same payment method
            activity.runOnUiThread(() -&gt; {
                activity.displayAlert("Error", e.toString(), false);
            });
        }
    }
}
</code></div></pre>

</div>

</div>
</div>

<p>The result of payment authentication returns to your calling Activity via
<a href="https://developer.android.com/reference/android/app/Activity.html#onActivityResult(int,%20int,%20android.content.Intent)" class="external">Activity#onActivityResult()</a>. Handle the result by calling <a href="https://stripe.dev/stripe-android/com/stripe/android/Stripe.html#onPaymentResult-int-int-android.content.Intent-com.stripe.android.ApiResultCallback-" class="external">Stripe#onPaymentResult()</a> within <code>Activity#onActivityResult()</code>. The <a href="https://stripe.dev/stripe-android/com/stripe/android/PaymentIntentResult.html" class="external">PaymentIntentResult</a> returned in <a href="https://stripe.dev/stripe-android/com/stripe/android/ApiResultCallback.html#onSuccess-ResultType-" class="external">ApiResultCallback#onSuccess()</a> has two getters:</p>

<ul>
  <li><code>getIntent()</code> - a <a href="https://stripe.dev/stripe-android/com/stripe/android/StripeIntentResult.html#getIntent--" class="external">PaymentIntent</a> object that has been retrieved after confirmation/authentication</li>
  <li><code>getOutcome()</code> - a <a href="https://stripe.dev/stripe-android/com/stripe/android/StripeIntentResult.html#getOutcome--" class="external">StripeIntentResult.Status</a> value that indicates the outcome of payment authentication
    <ul>
      <li><code>SUCCEEDED</code> - payment authentication succeeded</li>
      <li><code>FAILED</code> - payment authentication failed</li>
      <li><code>CANCELED</code> - the customer canceled required payment authentication</li>
      <li><code>TIMEDOUT</code> - the payment authentication attempt timed-out</li>
    </ul>
  </li>
</ul>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="android-test-integration" href="payment-intents/web-manual.html#android-test-integration" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Test the integration">
        <span class="expando-left-text">6</span>
      Test the integration
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>By this point you should have a basic card integration that collects card details and makes a payment.</p>

<p>There are several test cards you can use in test mode to make sure this integration is ready. Use them with any CVC, postal code, and future expiration date.</p>

<table class="alternate">
  <thead>
    <tr>
      <th>Number</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="card-number">4242<span></span>4242<span></span>4242<span></span>4242</td>
      <td>Succeeds and immediately processes the payment.</td>
    </tr>
    <tr>
      <td class="card-number">4000<span></span>0025<span></span>0000<span></span>3155</td>
      <td>Requires authentication. Stripe will trigger a modal asking for the customer to authenticate.</td>
    </tr>
    <tr>
      <td class="card-number">4000<span></span>0000<span></span>0000<span></span>9995</td>
      <td>Always fails with a decline code of <code>insufficient_funds</code>.</td>
    </tr>
  </tbody>
</table>

<p>For the full list of test cards see our guide on <a href="../testing.html">testing</a>.</p>
  </div>
</div>

<h2 id="next-steps">Next steps</h2>

<p>Now that you have a working integration, test your payment flows using the test card numbers and PaymentMethods:</p>

<ul class="next-steps">
    <li><a href="../google-pay.html"><span>Accept Google Pay</span></a></li>
</ul>
</div>

  </div>
</div>
</header>
  <section class="csat">
  <span data-csat-step="poll" class="csat-widget">
    
    <h4 class="csat-widget-cta" data-no-anchor>Was this page helpful?</h4>
    <button data-csat-poll="yes" class="csat-button csat-button-yes common-Button">Yes</button>
    <button data-csat-poll="no" class="csat-button csat-button-no common-Button">No</button>
  </span>

  <div data-csat-step="input" class="csat-widget">
    <div class="csat-input">
      <span id="csat-input-prompt">Feedback about this page?</span>
      <input id="csat-input-text" placeholder="Feedback about this page?" class="common-Input">
      <button id="csat-input-submit" class="csat-button common-Button">Send</button>
    </div>
  </div>

  <p data-csat-step="reply" class="csat-widget">
    <span class="csat-reply-main">
      Thank you for helping improve Stripe's documentation.
    </span>
    <span class="csat-reply-extended">
      If you need help or have any questions, please consider <a href="https://support.stripe.com/contact">contacting support</a>.
    </span>
  </p>

</section>





            </article>
            <div class="docs-aside">
              <div class="docs-toc empty">
                <h4>On this page</h4>
                <ul class="docs-toc-list">
                </ul>
              </div>
              <div class="docs-definitions"></div>
            </div>
          </div>
        </div>
        <div class="right-spacer"></div>
      </div>
      <div id="loading-bar"></div>
  
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-v3/external/stickyfill.min-c4628abd129170fdc733.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-external/jquery.min-8a871487f6552205397a.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-clipboard-43d35918025abd2954b0.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-prism-95d192fd615981aca964.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-external/dynamics.min-1d7a9e501c23b51d538d.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-js.cookie-3f4952378dad1304640b.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-documentation-70ad1ecb761625b2103d.min.js"></script>
  <script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-external/algoliasearch-15ba610e0c3d11bd4fa8.min.js"></script>
  <script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-documentation-search-236ec6212a280a940d7b.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/docsApps-1ac17a1b82a22ffe751c.min.js"></script>

<script type="text/javascript" nonce="wM5eO51ffgXxVmJ8avNXaA==">  parseKey("sk_test_4eC39HqLyjWDarjtT1zdp7dc", "secret-key", null);
  parseKey("pk_test_TYooMQauvdEDq54NiTphI7jx", "publishable-key", null);
</script>  <script type="text/javascript" src="https://js.stripe.com/v3/"></script>

  <script type="text/javascript">
      window.sampleName = "accept-a-card-payment";
  </script>
  <script src="../../js/payments/take-a-payment-demo.js"></script>
<script defer src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-v3/shared/collect_email-4800c74c31cb737d05a3.min.js"></script>


  <script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-v3/shared/same-site-fdd20fe544351827462c.min.js"></script>



<script type="application/json" id="site-analytics-config">{&quot;generalAnalyticsConfig&quot;:{&quot;ga&quot;:{},&quot;flags&quot;:{&quot;test_experiment_0&quot;:false,&quot;docs_integration_checkers&quot;:true,&quot;site_role_aware&quot;:false,&quot;site_enriched_contact_sales&quot;:false,&quot;analytics_id_holdback&quot;:false,&quot;merchant_token_holdback&quot;:false,&quot;served_locale&quot;:&quot;en&quot;,&quot;authoring_tool&quot;:&quot;erb&quot;},&quot;locale&quot;:&quot;en&quot;,&quot;treatments&quot;:{&quot;test_experiment_0&quot;:&quot;control&quot;,&quot;docs_integration_checkers&quot;:&quot;treatment&quot;,&quot;site_role_aware&quot;:&quot;control&quot;,&quot;site_enriched_contact_sales&quot;:&quot;control&quot;}},&quot;siteSpecificAnalyticsConfig&quot;:{&quot;pageId&quot;:null,&quot;trackPageViewed&quot;:false,&quot;gtmConfig&quot;:{&quot;event&quot;:&quot;dataLayer-initialized&quot;,&quot;user-id&quot;:null,&quot;account-id&quot;:null,&quot;merchant-id&quot;:null,&quot;user-role&quot;:null,&quot;products-enabled&quot;:null,&quot;page-category&quot;:null,&quot;language&quot;:&quot;en&quot;,&quot;country&quot;:&quot;US&quot;,&quot;signed-in&quot;:false,&quot;signup-type&quot;:null}}}</script>



<!-- Google Tag Manager (noscript) -->

<!-- End Google Tag Manager (noscript) -->


<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/site-analytics-ae84926d4539ea217f68.min.js"></script>
<script defer src="../../../js.stripe.com/internal/v2/analytics.min.js"></script>



<script defer src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-documentation-analytics-ce2cc3a78e13f61d7b15.min.js"></script>


  </body>
</html>
