
<!DOCTYPE html>
<html lang="en" id="">
  <head>
    
    
    <meta charset="utf-8">
    <meta name="google-site-verification" content="f0LCrdI6z4Fo8zld4sHCgo5SiUE4EYYRUa6KVeX3Mw8" />
    <meta name="msvalidate.01" content="4C77784AFD61498FA0764E14D1631D53" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Enable other businesses to accept payments directly | Stripe Connect</title>

    <meta name="description" content="Online payment processing for internet businesses. Stripe is a suite of payment APIs that powers commerce for businesses of all sizes.">


    <link rel="shortcut icon" href="../../favicon.ico">

    <link rel="apple-touch-icon-precomposed" href="../../img/apple-touch-icon/180x180.png">
    <link rel="icon" href="../../img/apple-touch-icon/180x180.png">


    <link rel="image_src" type="image/png" href="../../img/v3/home/social.png">

    
<link rel="canonical" href="enable-payment-acceptance-guide.html">


    <meta property="og:title" content="Enable other businesses to accept payments directly | Stripe Connect">
    <meta property="og:url" content="https://stripe.com/docs/connect/enable-payment-acceptance-guide">
    <meta property="og:description" content="Online payment processing for internet businesses. Stripe is a suite of payment APIs that powers commerce for businesses of all sizes.">
    <meta property="og:image" content="https://stripe.com/img/v3/home/social.png">

      <meta name="twitter:card" content="summary">
      <meta name="twitter:image" content="https://stripe.com/img/v3/home/twitter.png">
    <meta name="twitter:site" content="@stripe">
    <meta name="twitter:title" content="Enable other businesses to accept payments directly | Stripe Connect">
    <meta name="twitter:description" content="Online payment processing for internet businesses. Stripe is a suite of payment APIs that powers commerce for businesses of all sizes.">

    <script type="application/json" id="sentry-config">{&quot;enabled&quot;:true,&quot;dsn&quot;:&quot;https://8ca50a25374f408699e0eda3eb47e7f9@errors.stripe.com/101&quot;,&quot;release&quot;:&quot;ccec7de4166678329c96f03a1576a32929f54409&quot;,&quot;environment&quot;:&quot;development&quot;,&quot;project&quot;:&quot;site&quot;}</script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sentry-97c4b87de47130a60661.min.js"></script>



    <script type="application/json" id="strut_files">{&quot;v3/shared/navigation_ie10.css&quot;:&quot;/assets/compiled/js/../css/sprockets-css-v3/shared/navigation_ie10-20060247f192805b273d.min.css&quot;}</script>

    <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Corporation",
    "name": "Stripe",
    "url": "https://stripe.com/",
    "logo": "https://stripe.com/img/about/logos/logos/blue.png",
    "contactPoint" : [
      {
        "@type" : "ContactPoint",
        "url": "https://stripe.com/contact",
        "email": "info@stripe.com",
        "contactType": "customer support"
      }
    ],
    "sameAs": [
      "https://www.facebook.com/StripeHQ/",
      "https://twitter.com/stripe",
      "https://www.linkedin.com/company/stripe"
    ]
  }
</script>

    <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Country",
    "address": {
      "addressCountry": "US"
    }
  }
</script>

      <link rel="preload" href="../../fonts/stripe-icons.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../../fonts/camphor-ss/300-light.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../../fonts/camphor-ss/400-regular.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../../fonts/camphor-ss/500-medium.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../../fonts/camphor-ss/600-bold.woff2" as="font" type="font/woff2" crossorigin>


<script type="text/javascript"  nonce="dvr2MAMFlP+WU1XH3b+90g==">        !function(){if('PerformanceLongTaskTiming' in window){var g=window.__tti={e:[]};
        g.o=new PerformanceObserver(function(l){g.e=g.e.concat(l.getEntries())});
        g.o.observe({entryTypes:['longtask']})}}();
</script>
      <meta name="stripe-asset-root" content="https://b.stripecdn.com/mkt/assets">
<link rel="preconnect" href="https://b.stripecdn.com" crossorigin>
<link rel="dns-prefetch" href="https://b.stripecdn.com">

            <link rel="preload" href="../../../b.stripecdn.com/mkt/assets/Sohne-5994f5a0.woff2" as="font" crossorigin>
          

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/fonts-46c46a.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/global-4bf514.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/White-5c2614.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Light-9c293a.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Dark-b14f43.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Transparent-38a623.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Legacy-8e570e.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/LegacyLight-1b5b36.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/LegacyDark-956193.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Chroma-a70a31.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/CottonCandy-7617fa.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Holly-c2fa6c.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/LemonLime-360cb1.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Overcast-043dba.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Pomegranate-1ec49a.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Slate-f42138.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Sunburst-def7e4.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Sunset-08e5ee.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Twilight-cb117c.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Wintergreen-de2815.css">
            

              <link rel="stylesheet" href="../../../b.stripecdn.com/mkt/assets/Layout-2dc192.css">
            

    



    <meta content="1" name="csrf-token" />
      <meta content="stripe.com" name="stripe-domain">

      <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-sail-2d674e24598277783349.min.css">
    <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/default-a983e753e40dfd33838e.min.css">
    <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/shared/common-498b69b0c8172690999c.min.css">
    <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/base-732c92df090a16aa2d70.min.css">
    
    <link rel="stylesheet" href="../../assets/compiled/css/docsApps-36c8d73a60d2da272c59.min.css">
      <style>
  .preview-button {
    margin-top: 14px;
    opacity: 0;
  }
  .preview-button.loaded {
    opacity: 1;
  }
  .preview-message {
    margin-top: 17px; padding: 0; padding-left: 24px;

    font-weight: 500;
    color: #1EA672;

    background-image: url('https://stripe.com/img/documentation/icon-answer.svg');
    background-size: 15px 12px;
    background-position: 0 20px;
    background-repeat: no-repeat;

    opacity: 0;
    transform: translateY(12px);
  }
  .preview-message.active {
    opacity: 1;
    transform: none;
    transition: all .45s cubic-bezier(0,.9,.11,1);
    transition-delay: 1.5s;
  }
  </style>
  <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/connect_button-5d7f291b5749a09c3f81.min.css">
  <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/demo_common.css-b36189475f614bf0f9fb.min.css">
  <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/connect_button.css-5d7f291b5749a09c3f81.min.css">
  <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/demo_common.css-b36189475f614bf0f9fb.min.css">
  <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/take_a_payment.css-dbce764851f776c399e3.min.css">
  <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/demo_common.css-b36189475f614bf0f9fb.min.css">
  <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/documentation/connect_checkout_demo.css-136db253522712f4b7e8.min.css">
  <link rel="stylesheet" href="../../assets/compiled/css/sprockets-css-v3/shared/prism_light-433b626453a5d1ab161c.min.css">

      <meta name="robots" content="noarchive">



  </head>
  <body class="">
    
      <div id="docs">
        <div id="sidebar">
            
  <div class="logo">
    <a href="../recipes/switching-to-stripe.html" title="Stripe docs">
      <div class="site"></div>
      <span class="extension docs">
        
      </span>
    </a>
</div>


<div class="nav-border"></div>


<nav class="new-sidebar section-selected">
  <div class="new-sidebar-viewport">
    <div class="section-list">
        <h1 class="home">
          <a
            class="item-link  "
            href="../recipes/switching-to-stripe.html"
            data-section-rel="/docs"
            
            
          >
            Home
          </a>
        </h1>
        <h1 class="payments">
          <a
            class="section-link  "
            href="../payments.html"
            data-section-rel="/docs/payments"
             title='A complete payments platform engineered for growth'
            
          >
            Payments
          </a>
        </h1>
        <h1 class="subscriptions">
          <a
            class="section-link  "
            href="../billing/quickstart.html"
            data-section-rel="/docs/billing"
             title='Build and scale your recurring business model'
            
          >
            Billing
          </a>
        </h1>
        <h1 class="connect">
          <a
            class="section-link  "
            href="../connect.html"
            data-section-rel="/docs/connect"
             title='Everything platforms need to get sellers paid'
            
          >
            Connect
          </a>
        </h1>
        <h1 class="checkout">
          <a
            class="section-link  "
            href="../checkout.html"
            data-section-rel="/docs/payments/checkout"
             title='The fastest way to get started with Stripe'
            
          >
            Checkout
          </a>
        </h1>
        <h1 class="sigma">
          <a
            class="section-link  "
            href="../sigma.html"
            data-section-rel="/docs/sigma"
             title='Your business data at your fingertips'
            
          >
            Sigma
          </a>
        </h1>
        <h1 class="atlas">
          <a
            class="section-link  "
            href="../atlas.html"
            data-section-rel="/docs/atlas"
             title='Turn your idea into a startup'
            
          >
            Atlas
          </a>
        </h1>
        <h1 class="radar">
          <a
            class="section-link  "
            href="../radar.html"
            data-section-rel="/docs/radar"
             title='Fight fraud with machine learning'
            
          >
            Radar
          </a>
        </h1>
        <h1 class="issuing">
          <a
            class="section-link  "
            href="../issuing.html"
            data-section-rel="/docs/issuing"
             title='Create, distribute, and manage cards'
            
          >
            Issuing
          </a>
        </h1>
        <h1 class="terminal">
          <a
            class="section-link  "
            href="../terminal.html"
            data-section-rel="/docs/terminal"
             title='The programmable point of sale'
            
          >
            Terminal
          </a>
        </h1>
        <h1 class="capital">
          <a
            class="section-link  "
            href="../capital/faqs.html"
            data-section-rel="/docs/capital/faqs"
             title='Financing for your business'
            
          >
            Capital
          </a>
        </h1>
        <h1 class="corporatecard">
          <a
            class="section-link  "
            href="../corporate-card.html"
            data-section-rel="/docs/corporate-card"
             title='The Stripe Corporate Card'
            
          >
            Corporate Card
          </a>
        </h1>
        <h1 class="identity">
          <a
            class="section-link  "
            href="../identity.html"
            data-section-rel="/docs/identity"
             title='Verify your users online'
            
          >
            Identity
          </a>
        </h1>
        <h1 class="dashboard">
          <a
            class="section-link  "
            href="../dashboard.html"
            data-section-rel="/docs/dashboard"
             title='Dashboard'
            
          >
            Dashboard
          </a>
        </h1>
        <h1 class="account">
          <a
            class="section-link  "
            href="../account.html"
            data-section-rel="/docs/account"
             title='How to activate and secure your Stripe account'
            
          >
            Account
          </a>
        </h1>
        <h1 class="api">
          <a
            class="section-link  "
            href="../development.html"
            data-section-rel="/docs/development"
             title='Start developing your Stripe integration'
            
          >
            Development
          </a>
        </h1>
        <h1 class="reporting">
          <a
            class="section-link  "
            href="../dashboard/reporting.html"
            data-section-rel="/docs/reports/financial-reports"
             title='Generate reports of your Stripe financial information'
            
          >
            Reports
          </a>
        </h1>
        <h1 class="partners">
          <a
            class="section-link  "
            href="../partners.html"
            data-section-rel="/docs/partners"
            
            
          >
            Partners
          </a>
        </h1>
        <h1 class="references">
          <a
            class="item-link  external"
            href="../api/index.html"
            data-section-rel="/docs/api"
            
            target='_blank'
          >
            API Reference
          </a>
        </h1>
    </div>
      <div class="section " data-section-id="/docs">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header home">
          <a class="">
            Home
          </a>
        </h1>
        
      </div>
      <div class="section " data-section-id="/docs/payments">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header payments">
          <a class="">
            Payments
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../payments.html" class=" "
        
        title='Overview' aria-label='Overview'
      >
        Overview
      </a>
    </li>
    <li class="category ">Card payments
    </li>
    <li class="sidebar-item ">
      <a href="../payments/cards/overview.html" class=" "
        
         aria-label='Learn the steps of a card payment' title='Learn the steps of a card payment'
      >
        How cards work
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/payment-intents/quickstart.html" class=" "
        
         aria-label='Collect payments with Stripe' title='Collect payments with Stripe'
      >
        Accept a payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/cards/reusing-cards.html" class=" "
        
        title='More payment scenarios' aria-label='More payment scenarios'
      >
        More payment scenarios
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../payments/save-and-reuse.html" class=" "
        
         aria-label='Save card details without a payment' title='Save card details without a payment'
      >
        Set up later payments
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/cards/saving-cards.html" class=" "
        
         aria-label='Save card details during payment' title='Save card details during payment'
      >
        Save a card during payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/capture-later.html" class=" "
        
         aria-label='Authorize a charge now, capture funds later' title='Authorize a charge now, capture funds later'
      >
        Place a hold on a card
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/payment-intents/web-manual.html" class=" "
        
         aria-label='Accepting payments synchronously' title='Accepting payments synchronously'
      >
        Finalize payments server-side
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/3d-secure.html" class=" "
        
         aria-label='Support 3D Secure authentication and more' title='Support 3D Secure authentication and more'
      >
        3D Secure authentication
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../payments/without-card-authentication.html" class=" "
        
        title='U.S. and Canadian cards' aria-label='U.S. and Canadian cards'
      >
        U.S. and Canadian cards
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../payments/save-card-without-authentication.html" class=" "
        
         aria-label='Save cards with your basic integration' title='Save cards with your basic integration'
      >
        Save cards without authentication
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/payment-intents/upgrade-to-handle-actions.html" class=" "
        
         aria-label='Upgrade your basic integration to handle global payments' title='Upgrade your basic integration to handle global payments'
      >
        Upgrade to handle authentication
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../payments/after-the-payment.html" class=" "
        
        title='After the payment' aria-label='After the payment'
      >
        After the payment
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../payouts.html" class=" "
        
        title='Payouts' aria-label='Payouts'
      >
        Payouts
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../currencies.html" class=" "
        
        title='Currencies' aria-label='Currencies'
      >
        Currencies
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../currencies/conversions.html" class=" "
        
        title='Currency conversions' aria-label='Currency conversions'
      >
        Currency conversions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payouts/instant-payouts-banks.html" class=" "
        
        title='Bank support for Instant Payouts' aria-label='Bank support for Instant Payouts'
      >
        Bank support for Instant Payouts
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../declines.html" class=" "
        
         aria-label='Understanding declines and failed payments' title='Understanding declines and failed payments'
      >
        Declines
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../declines/codes.html" class=" "
        
        title='Decline codes' aria-label='Decline codes'
      >
        Decline codes
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../receipts.html" class=" "
        
        title='Email receipts' aria-label='Email receipts'
      >
        Email receipts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/cards/refunds.html" class=" "
        
        title='Refunds' aria-label='Refunds'
      >
        Refunds
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/handling-payment-events.html" class=" "
        
         aria-label='Use webhooks to respond to offline payment events' title='Use webhooks to respond to offline payment events'
      >
        Handle webhook events
      </a>
    </li>
</ul>

    </li>
    <li class="category ">Add payment methods
    </li>
    <li class="sidebar-item ">
      <a href="../payments/digital-wallets.html" class=" "
        
        title='Digital wallets' aria-label='Digital wallets'
      >
        Digital wallets
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../sources/alipay.html" class=" "
        
         aria-label='Alipay payments with Sources' title='Alipay payments with Sources'
      >
        Alipay
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../sources/alipay/ios.html" class=" "
        
         aria-label='Using Alipay in the iOS SDK' title='Using Alipay in the iOS SDK'
      >
        iOS
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/alipay/android.html" class=" "
        
         aria-label='Using Alipay in the Android SDK' title='Using Alipay in the Android SDK'
      >
        Android
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../amex-express-checkout.html" class=" "
        
         aria-label='Using Amex Express Checkout' title='Using Amex Express Checkout'
      >
        Amex Express Checkout
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../apple-pay.html" class=" "
        
        title='Apple Pay' aria-label='Apple Pay'
      >
        Apple Pay
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../apple-pay/best-practices.html" class=" "
        
         aria-label='Best practices with Apple Pay' title='Best practices with Apple Pay'
      >
        Best practices
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../google-pay.html" class=" "
        
        title='Google Pay' aria-label='Google Pay'
      >
        Google Pay
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../microsoft-pay.html" class=" "
        
        title='Microsoft Pay' aria-label='Microsoft Pay'
      >
        Microsoft Pay
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../masterpass.html" class=" "
        
         aria-label='Using Masterpass' title='Using Masterpass'
      >
        Masterpass
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../stripe-js/elements/payment-request-button.html" class=" "
        
         aria-label='Use a button to collect stored payment details' title='Use a button to collect stored payment details'
      >
        Payment Request Button
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../secure-remote-commerce.html" class=" "
        
         aria-label='Using Secure Remote Commerce' title='Using Secure Remote Commerce'
      >
        Secure Remote Commerce
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../visa-checkout.html" class=" "
        
         aria-label='Using Visa Checkout' title='Using Visa Checkout'
      >
        Visa Checkout
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/wechat-pay.html" class=" "
        
         aria-label='WeChat Pay Payments with Sources (Public Beta)' title='WeChat Pay Payments with Sources (Public Beta)'
      >
        WeChat Pay
      </a>
      <ul class=" ">
</ul>

    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../payments/ach-bank-transfers.html" class=" "
        
        title='Bank debits and transfers' aria-label='Bank debits and transfers'
      >
        Bank debits and transfers
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../ach.html" class=" "
        
         aria-label='ACH guide' title='ACH guide'
      >
        ACH
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/ach-credit-transfer.html" class=" "
        
         aria-label='ACH Credit Transfer payments with Sources (Public Beta)' title='ACH Credit Transfer payments with Sources (Public Beta)'
      >
        ACH Credit Transfer
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="https://stripe.com/docs/payments/au-becs-debit" class=" "
        
         aria-label='BECS Direct Debit payments in Australia' title='BECS Direct Debit payments in Australia'
      >
        BECS Direct Debit in Australia
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="https://stripe.com/docs/payments/au-becs-debit/accept-a-payment" class=" "
        
         aria-label='Learn how to accept BECS Direct Debit payments in Australia' title='Learn how to accept BECS Direct Debit payments in Australia'
      >
        Accept a payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="https://stripe.com/docs/payments/au-becs-debit/set-up-payment" class=" "
        
         aria-label='Save payment method details for future BECS Direct Debit payments in Australia' title='Save payment method details for future BECS Direct Debit payments in Australia'
      >
        Save bank details
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../payments/sepa-debit.html" class=" "
        
         aria-label='SEPA Direct Debit payments' title='SEPA Direct Debit payments'
      >
        SEPA Direct Debit
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../payments/sepa-debit/accept-a-payment.html" class=" "
        
         aria-label='Learn how to accept SEPA Direct Debit payments' title='Learn how to accept SEPA Direct Debit payments'
      >
        Accept a payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/sepa-debit-setup-intents.html" class=" "
        
         aria-label='Save payment method details for future SEPA Direct Debit payments' title='Save payment method details for future SEPA Direct Debit payments'
      >
        Save bank details
      </a>
    </li>
</ul>

    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../payments/local-payment-methods.html" class=" "
        
        title='Other payment methods' aria-label='Other payment methods'
      >
        Other payment methods
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../bancontact.html" class=" "
        
         aria-label='Bancontact payments with Sources' title='Bancontact payments with Sources'
      >
        Bancontact
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../sources/bancontact/recurring.html" class=" "
        
         aria-label='Recurring Bancontact payments with Sources' title='Recurring Bancontact payments with Sources'
      >
        Recurring payments
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../sources/eps.html" class=" "
        
         aria-label='EPS payments with Sources (Public Beta)' title='EPS payments with Sources (Public Beta)'
      >
        EPS
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/fpx.html" class=" "
        
         aria-label='FPX payments with Payment Methods' title='FPX payments with Payment Methods'
      >
        FPX
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../payments/fpx/accept-a-payment.html" class=" "
        
         aria-label='Learn how to accept FPX payments' title='Learn how to accept FPX payments'
      >
        Accept a payment
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../sources/giropay.html" class=" "
        
         aria-label='giropay payments with Sources' title='giropay payments with Sources'
      >
        giropay
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../ideal.html" class=" "
        
         aria-label='iDEAL payments' title='iDEAL payments'
      >
        iDEAL
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../payments/ideal/accept-a-payment.html" class=" "
        
         aria-label='Learn how to accept iDEAL payments' title='Learn how to accept iDEAL payments'
      >
        Accept a payment
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../sources/klarna.html" class=" "
        
         aria-label='Klarna payments with Sources (Public Beta)' title='Klarna payments with Sources (Public Beta)'
      >
        Klarna
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../mobile/ios/klarna.html" class=" "
        
         aria-label='Klarna payments on iOS' title='Klarna payments on iOS'
      >
        iOS
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../mobile/android/klarna.html" class=" "
        
         aria-label='Klarna payments on Android' title='Klarna payments on Android'
      >
        Android
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../sources/multibanco.html" class=" "
        
         aria-label='Multibanco payments with Sources (Public Beta)' title='Multibanco payments with Sources (Public Beta)'
      >
        Multibanco
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/p24.html" class=" "
        
         aria-label='Przelewy24 payments with Sources (Public Beta)' title='Przelewy24 payments with Sources (Public Beta)'
      >
        Przelewy24
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sofort.html" class=" "
        
         aria-label='SOFORT payments with Sources' title='SOFORT payments with Sources'
      >
        SOFORT
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item separator">
      <a href="../testing.html" class=" "
        
        title='Testing' aria-label='Testing'
      >
        Testing
      </a>
    </li>
    <li class="category ">About the APIs
    </li>
    <li class="sidebar-item ">
      <a href="../payments/payment-intents/creating-payment-intents.html" class=" "
        
         aria-label='About the Payment Intents API' title='About the Payment Intents API'
      >
        Payment Intents
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../payments/intents.html" class=" "
        
         aria-label='The lifecycle of a Payment or Setup Intent' title='The lifecycle of a Payment or Setup Intent'
      >
        How intents work
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/payment-intents/verifying-status.html" class=" "
        
         aria-label='Verifying the status of a Payment Intent' title='Verifying the status of a Payment Intent'
      >
        Payment status updates
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/payment-intents/migration/charges.html" class=" "
        
         aria-label='Understanding the payments APIs' title='Understanding the payments APIs'
      >
        Compare to Charges
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../payments/setup-intents.html" class=" "
        
         aria-label='About the Setup Intents API' title='About the Setup Intents API'
      >
        Setup Intents
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/payment-methods.html" class=" "
        
         aria-label='About the Payment Methods API' title='About the Payment Methods API'
      >
        Payment Methods
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/legacy-apis.html" class=" "
        
         aria-label='Our older APIs' title='Our older APIs'
      >
        Older APIs
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../charges.html" class=" "
        
         aria-label='Use the Charges API' title='Use the Charges API'
      >
        Charges
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../payments/payment-intents/migration.html" class=" "
        
        title='Migrate to the new APIs' aria-label='Migrate to the new APIs'
      >
        Migrate to the new APIs
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/accept-a-payment-charges.html" class=" "
        
         aria-label='Collect payments with Stripe' title='Collect payments with Stripe'
      >
        Accept a card payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../saving-cards.html" class=" "
        
         aria-label='Save cards to charge later' title='Save cards to charge later'
      >
        Save a card
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../charges/placing-a-hold.html" class=" "
        
        title='Place a hold on a card' aria-label='Place a hold on a card'
      >
        Place a hold on a card
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/charges-api/connect.html" class=" "
        
         aria-label='Stripe Connect and the Charges API' title='Stripe Connect and the Charges API'
      >
        Charges with Connect
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../sources/bitcoin.html" class=" "
        
         aria-label='About the Sources API' title='About the Sources API'
      >
        Sources
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../payments/payment-methods/transitioning.html" class=" "
        
        title='Transition to the new APIs' aria-label='Transition to the new APIs'
      >
        Transition to the new APIs
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/cards.html" class=" "
        
        title='Card Sources' aria-label='Card Sources'
      >
        Card Sources
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/customers.html" class=" "
        
        title='Sources and customers' aria-label='Sources and customers'
      >
        Sources and customers
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/connect.html" class=" "
        
         aria-label='Connect platforms using the Sources API' title='Connect platforms using the Sources API'
      >
        Connect platforms
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sources/best-practices.html" class=" "
        
         aria-label='Best practices using Sources' title='Best practices using Sources'
      >
        Best practices
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../mobile/ios/sources.html" class=" "
        
         aria-label='Getting started with Sources in the iOS SDK' title='Getting started with Sources in the iOS SDK'
      >
        iOS
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../mobile/android/sources.html" class=" "
        
         aria-label='Getting started with Sources in the Android SDK' title='Getting started with Sources in the Android SDK'
      >
        Android
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../orders.html" class=" "
        
        title='Orders' aria-label='Orders'
      >
        Orders
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../orders/guide.html" class=" "
        
        title='How to use orders' aria-label='How to use orders'
      >
        How to use orders
      </a>
    </li>
</ul>

    </li>
</ul>

    </li>
    <li class="category ">Regulation Support
    </li>
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication/doineed.html" class=" "
        
        title='Am I affected by SCA?' aria-label='Am I affected by SCA?'
      >
        Am I affected by SCA?
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication.html" class=" "
        
        title='SCA readiness' aria-label='SCA readiness'
      >
        SCA readiness
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication/migration.html" class=" "
        
         aria-label='Update your integration to prepare for SCA' title='Update your integration to prepare for SCA'
      >
        Update your integration
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication/plugins.html" class=" "
        
         aria-label='Update your Stripe plugin to prepare for SCA' title='Update your Stripe plugin to prepare for SCA'
      >
        Plugins
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication/grandfathered-agreements.html" class=" "
        
         aria-label='Learn which payment flows are grandfathered in' title='Learn which payment flows are grandfathered in'
      >
        SCA grandfathering
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../strong-customer-authentication/faqs.html" class=" "
        
         aria-label='Get answers to common questions about SCA enforcement' title='Get answers to common questions about SCA enforcement'
      >
        Frequently asked questions
      </a>
    </li>
</ul>

    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/billing">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header subscriptions">
          <a class="">
            Billing
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../billing/quickstart.html" class=" "
        
         aria-label='Stripe Billing overview' title='Stripe Billing overview'
      >
        Overview
      </a>
    </li>
    <li class="category ">Start with a use case
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/fixed-price.html" class=" "
        
         aria-label='Learn how to offer multiple pricing options to your customers and charge them a fixed amount each month' title='Learn how to offer multiple pricing options to your customers and charge them a fixed amount each month'
      >
        Fixed-price subscriptions with Elements
      </a>
    </li>
    <li class="category ">Manage subscriptions
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions.html" class=" "
        
         aria-label='Learn more about the lifecycles of Stripe Billing’s subscriptions and invoices' title='Learn more about the lifecycles of Stripe Billing’s subscriptions and invoices'
      >
        How subscriptions work
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/model.html" class=" "
        
        title='How to model subscriptions' aria-label='How to model subscriptions'
      >
        How to model subscriptions
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/examples.html" class=" "
        
         aria-label='Billing examples' title='Billing examples'
      >
        Examples
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/payment.html" class=" "
        
         aria-label='Implementing a subscription signup and payment flow' title='Implementing a subscription signup and payment flow'
      >
        Signup and payment flow
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/products-and-plans.html" class=" "
        
         aria-label='Managing products and prices' title='Managing products and prices'
      >
        Products and Prices
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/self-serve-portal.html" class=" "
        
         aria-label='Learn about the self-serve portal' title='Learn about the self-serve portal'
      >
        Self-serve portal
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/integrating-self-serve-portal.html" class=" "
        
        title='Integrating the self-serve portal' aria-label='Integrating the self-serve portal'
      >
        Integrating the self-serve portal
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../billing/webhooks.html" class=" "
        
         aria-label='Using webhooks with subscriptions' title='Using webhooks with subscriptions'
      >
        Subscription webhooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../subscriptions/changing.html" class=" "
        
         aria-label='Change subscriptions' title='Change subscriptions'
      >
        Change subscriptions
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/upgrade-downgrade.html" class=" "
        
         aria-label='Upgrading and downgrading plans' title='Upgrading and downgrading plans'
      >
        Upgrade and downgrade
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/canceling.html" class=" "
        
         aria-label='Cancel subscriptions' title='Cancel subscriptions'
      >
        Cancel
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/pause.html" class=" "
        
         aria-label='Pause payment collection on subscriptions' title='Pause payment collection on subscriptions'
      >
        Pause payment collection
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/pending-updates.html" class=" "
        
         aria-label='Learn how to handle payment failures when updating a subscription' title='Learn how to handle payment failures when updating a subscription'
      >
        Pending updates
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/customer.html" class=" "
        
        title='Customers' aria-label='Customers'
      >
        Customers
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/customer/balance.html" class=" "
        
        title='Customer Balance' aria-label='Customer Balance'
      >
        Customer Balance
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/migration/strong-customer-authentication.html" class=" "
        
        title='Strong Customer Authentication (SCA)' aria-label='Strong Customer Authentication (SCA)'
      >
        Strong Customer Authentication (SCA)
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/migration/taxes.html" class=" "
        
        title='Improved tax support' aria-label='Improved tax support'
      >
        Improved tax support
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/migration/invoice-states.html" class=" "
        
        title='Invoices API updates' aria-label='Invoices API updates'
      >
        Invoices API updates
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/migration/migrating-prices.html" class=" "
        
        title='Migrating to Prices' aria-label='Migrating to Prices'
      >
        Migrating to Prices
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../billing/subscriptions/advanced.html" class=" "
        
        title='Advanced features' aria-label='Advanced features'
      >
        Advanced features
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/taxes.html" class=" "
        
        title='Adding taxes' aria-label='Adding taxes'
      >
        Adding taxes
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/discounts.html" class=" "
        
        title='Applying discounts' aria-label='Applying discounts'
      >
        Applying discounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/backdating.html" class=" "
        
        title='Backdating subscriptions' aria-label='Backdating subscriptions'
      >
        Backdating subscriptions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/billing-cycle.html" class=" "
        
        title='Billing cycles' aria-label='Billing cycles'
      >
        Billing cycles
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/decimal-amounts.html" class=" "
        
        title='Decimal amounts' aria-label='Decimal amounts'
      >
        Decimal amounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/metered-billing.html" class=" "
        
        title='Metered billing' aria-label='Metered billing'
      >
        Metered billing
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/metered-billing/thresholds.html" class=" "
        
        title='Billing thresholds' aria-label='Billing thresholds'
      >
        Billing thresholds
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/multiple.html" class=" "
        
        title='Multiple subscriptions' aria-label='Multiple subscriptions'
      >
        Multiple subscriptions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/prorations.html" class=" "
        
        title='Prorations' aria-label='Prorations'
      >
        Prorations
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/quantities.html" class=" "
        
        title='Setting quantities' aria-label='Setting quantities'
      >
        Setting quantities
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/connect.html" class=" "
        
        title='Subscriptions with Connect' aria-label='Subscriptions with Connect'
      >
        Subscriptions with Connect
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/subscriptions/multiplan.html" class=" "
        
        title='Subscriptions with multiple plans' aria-label='Subscriptions with multiple plans'
      >
        Subscriptions with multiple plans
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/subscription-schedules.html" class=" "
        
        title='Subscription schedules' aria-label='Subscription schedules'
      >
        Subscription schedules
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/subscription-schedules/use-cases.html" class=" "
        
        title='Use cases' aria-label='Use cases'
      >
        Use cases
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/tiers.html" class=" "
        
        title='Tiered pricing' aria-label='Tiered pricing'
      >
        Tiered pricing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/quantity-transformation.html" class=" "
        
        title='Quantity transformation' aria-label='Quantity transformation'
      >
        Quantity transformation
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/trials.html" class=" "
        
        title='Using trial periods' aria-label='Using trial periods'
      >
        Using trial periods
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../subscriptions/testing.html" class=" "
        
         aria-label='Testing Billing' title='Testing Billing'
      >
        Testing
      </a>
    </li>
    <li class="category ">Add payment methods
    </li>
    <li class="sidebar-item ">
      <a href="https://stripe.com/docs/billing/subscriptions/au-becs-debit" class=" "
        
        title='BECS Direct Debit in Australia' aria-label='BECS Direct Debit in Australia'
      >
        BECS Direct Debit in Australia
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/subscriptions/sepa-debit.html" class=" "
        
        title='SEPA Direct Debit in the EU' aria-label='SEPA Direct Debit in the EU'
      >
        SEPA Direct Debit in the EU
      </a>
    </li>
    <li class="category ">Invoice customers
    </li>
    <li class="sidebar-item ">
      <a href="../billing/invoices/workflow.html" class=" "
        
        title='How invoices work' aria-label='How invoices work'
      >
        How invoices work
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/invoices/one-off.html" class=" "
        
         aria-label='Create an invoice and bill a customer' title='Create an invoice and bill a customer'
      >
        Create an invoice
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/invoices/customizing.html" class=" "
        
        title='Customize invoices' aria-label='Customize invoices'
      >
        Customize invoices
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../subscriptions/invoices.html" class=" "
        
        title='Subscription invoices' aria-label='Subscription invoices'
      >
        Subscription invoices
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/paying.html" class=" "
        
        title='Charging automatically' aria-label='Charging automatically'
      >
        Charging automatically
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/sending.html" class=" "
        
        title='Sending invoices to customers' aria-label='Sending invoices to customers'
      >
        Sending invoices to customers
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/tax-rates.html" class=" "
        
        title='Tax rates on invoices' aria-label='Tax rates on invoices'
      >
        Tax rates on invoices
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/reconciliation.html" class=" "
        
        title='Automated reconciliation' aria-label='Automated reconciliation'
      >
        Automated reconciliation
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/credit-notes.html" class=" "
        
        title='Credit notes' aria-label='Credit notes'
      >
        Credit notes
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/invoices/paper-check-payment.html" class=" "
        
        title='Pay by mailed check' aria-label='Pay by mailed check'
      >
        Pay by mailed check
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/automatic-collection.html" class=" "
        
        title='Automatic collection and dunning' aria-label='Automatic collection and dunning'
      >
        Automatic collection and dunning
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/taxes/tax-ids.html" class=" "
        
        title='Customer tax IDs' aria-label='Customer tax IDs'
      >
        Customer tax IDs
      </a>
    </li>
    <li class="sidebar-item hidden">
      <a href="../billing/taxes/tax-rates.html" class=" "
        
        title='Tax rates' aria-label='Tax rates'
      >
        Tax rates
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../billing/invoices/hosted.html" class=" "
        
        title='Hosted invoice pages' aria-label='Hosted invoice pages'
      >
        Hosted invoice pages
      </a>
    </li>
    <li class="category ">Revenue recognition
    </li>
    <li class="sidebar-item ">
      <a href="../billing/revenue-recognition.html" class=" "
        
        title='Overview' aria-label='Overview'
      >
        Overview
      </a>
    </li>
</ul>

      </div>
      <div class="section expanded" data-section-id="/docs/connect">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header connect">
          <a class="">
            Connect
          </a>
        </h1>
        <ul class="expanded always-expanded">
    <li class="sidebar-item ">
      <a href="../connect.html" class=" "
        
         aria-label='Connect overview' title='Connect overview'
      >
        Overview
      </a>
    </li>
    <li class="category ">Guides
    </li>
    <li class="sidebar-item ">
      <a href="collect-then-transfer-guide/payments.html" class=" "
        
        title='Collect payments then pay out' aria-label='Collect payments then pay out'
      >
        Collect payments then pay out
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="enable-payment-acceptance-guide.html" class="selected "
        
        title='Enable other businesses to accept payments directly' aria-label='Enable other businesses to accept payments directly'
      >
        Enable other businesses to accept payments directly
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="add-and-pay-out-guide.html" class=" "
        
        title='Pay out money' aria-label='Pay out money'
      >
        Pay out money
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="explore-connect-guide.html" class=" "
        
        title='Explore Connect' aria-label='Explore Connect'
      >
        Explore Connect
      </a>
    </li>
    <li class="category ">Capabilities
    </li>
    <li class="sidebar-item ">
      <a href="capabilities-overview.html" class=" "
        
         aria-label='Capabilities overview' title='Capabilities overview'
      >
        Overview
      </a>
    </li>
    <li class="category ">Account types
    </li>
    <li class="sidebar-item ">
      <a href="accounts.html" class=" "
        
         aria-label='Connect account types' title='Connect account types'
      >
        Accounts overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="standard-accounts.html" class=" "
        
         aria-label='Using Connect with Standard accounts' title='Using Connect with Standard accounts'
      >
        Standard
      </a>
      <ul class=" ">
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="express-accounts.html" class=" "
        
         aria-label='Using Connect with Express accounts' title='Using Connect with Express accounts'
      >
        Express
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="custom-accounts.html" class=" "
        
         aria-label='Using Connect with Custom accounts' title='Using Connect with Custom accounts'
      >
        Custom
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="connect-onboarding.html" class=" "
        
         aria-label='Overview of Connect onboarding for Custom accounts' title='Overview of Connect onboarding for Custom accounts'
      >
        Onboarding accounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="updating-accounts.html" class=" "
        
         aria-label='Updating accounts and Services Agreement Acceptance' title='Updating accounts and Services Agreement Acceptance'
      >
        Updating accounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="identity-verification.html" class=" "
        
         aria-label='Identity verification for Custom accounts' title='Identity verification for Custom accounts'
      >
        Identity verification
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="identity-verification-api.html" class=" "
        
         aria-label='Handling verification with the API for Custom accounts' title='Handling verification with the API for Custom accounts'
      >
        Handling verification with the API
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="required-verification-information.html" class=" "
        
         aria-label='Required verification information' title='Required verification information'
      >
        Required info
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="account-tokens.html" class=" "
        
         aria-label='Using tokens' title='Using tokens'
      >
        Using tokens
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="setting-mcc.html" class=" "
        
         aria-label='Setting merchant category codes' title='Setting merchant category codes'
      >
        Setting MCCs
      </a>
    </li>
</ul>

    </li>
    <li class="category ">Processing Payments
    </li>
    <li class="sidebar-item ">
      <a href="charges.html" class=" "
        
        title='Creating charges' aria-label='Creating charges'
      >
        Creating charges
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="direct-charges.html" class=" "
        
         aria-label='Creating direct charges' title='Creating direct charges'
      >
        Direct charges
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="destination-charges.html" class=" "
        
         aria-label='Creating Destination Charges on Your Platform' title='Creating Destination Charges on Your Platform'
      >
        Destination charges
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="charges-transfers.html" class=" "
        
         aria-label='Creating separate charges and transfers (Public Beta)' title='Creating separate charges and transfers (Public Beta)'
      >
        Separate charges and transfers
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="statement-descriptors.html" class=" "
        
         aria-label='Setting Statement Descriptors with Connect' title='Setting Statement Descriptors with Connect'
      >
        Statement descriptors
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="top-ups.html" class=" "
        
         aria-label='Topping up your platform account' title='Topping up your platform account'
      >
        Top-ups
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="account-debits.html" class=" "
        
         aria-label='Debiting Express and Custom accounts (Public Beta)' title='Debiting Express and Custom accounts (Public Beta)'
      >
        Account debits
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="subscriptions.html" class=" "
        
        title='Creating subscriptions' aria-label='Creating subscriptions'
      >
        Creating subscriptions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="currencies.html" class=" "
        
         aria-label='Working with multiple currencies' title='Working with multiple currencies'
      >
        Multiple currencies
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="account-balances.html" class=" "
        
         aria-label='Understanding Connect account balances' title='Understanding Connect account balances'
      >
        Account balances
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="payouts.html" class=" "
        
         aria-label='Setting bank and debit card payouts' title='Setting bank and debit card payouts'
      >
        Payouts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="cloning-saved-payment-methods.html" class=" "
        
         aria-label='Reusing customers' payment information across connected accounts' title='Reusing customers' payment information across connected accounts'
      >
        Cloning saved payment methods
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="best-practices.html" class=" "
        
         aria-label='Best practices for platforms with Express or Custom accounts' title='Best practices for platforms with Express or Custom accounts'
      >
        Best practices
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="dashboard.html" class=" "
        
         aria-label='Managing connected accounts with the Dashboard' title='Managing connected accounts with the Dashboard'
      >
        Dashboard account management
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="dashboard/viewing-all-accounts.html" class=" "
        
         aria-label='Viewing all accounts' title='Viewing all accounts'
      >
        Viewing all accounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="dashboard/managing-individual-accounts.html" class=" "
        
         aria-label='Managing individual accounts' title='Managing individual accounts'
      >
        Managing individual accounts
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="authentication.html" class=" "
        
         aria-label='Authenticating and making API calls as a connected account' title='Authenticating and making API calls as a connected account'
      >
        Making API calls for connected accounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="oauth-reference.html" class=" "
        
         aria-label='Connect OAuth reference' title='Connect OAuth reference'
      >
        OAuth reference
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="webhooks.html" class=" "
        
         aria-label='Connect webhooks' title='Connect webhooks'
      >
        Webhooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="testing.html" class=" "
        
         aria-label='Testing with Connect' title='Testing with Connect'
      >
        Testing
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/payments/checkout">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header checkout">
          <a class="">
            Checkout
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../checkout.html" class=" "
        
        title='Overview' aria-label='Overview'
      >
        Overview
      </a>
    </li>
    <li class="category ">One-time payments
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/accept-a-payment.html" class=" "
        
        title='Accept a payment' aria-label='Accept a payment'
      >
        Accept a payment
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/payment-methods.html" class=" "
        
        title='Payment method details' aria-label='Payment method details'
      >
        Payment method details
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/collecting.html" class=" "
        
        title='Set up future payments' aria-label='Set up future payments'
      >
        Set up future payments
      </a>
    </li>
    <li class="category ">Subscriptions
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/subscriptions.html" class=" "
        
        title='Set up a subscription' aria-label='Set up a subscription'
      >
        Set up a subscription
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/subscriptions/update-payment-details.html" class=" "
        
        title='Update payment details' aria-label='Update payment details'
      >
        Update payment details
      </a>
    </li>
    <li class="category ">Go Live
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/customization.html" class=" "
        
        title='Customize your integration' aria-label='Customize your integration'
      >
        Customize your integration
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/live.html" class=" "
        
        title='Integration checklist' aria-label='Integration checklist'
      >
        Integration checklist
      </a>
    </li>
    <li class="category ">Client-only Integration
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/client.html" class=" "
        
        title='One-time payments' aria-label='One-time payments'
      >
        One-time payments
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/client-subscription.html" class=" "
        
        title='Subscriptions' aria-label='Subscriptions'
      >
        Subscriptions
      </a>
    </li>
    <li class="category ">Upgrade your integration
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/migration.html" class=" "
        
        title='Migrate from legacy Checkout' aria-label='Migrate from legacy Checkout'
      >
        Migrate from legacy Checkout
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../payments/checkout/migrating-prices.html" class=" "
        
        title='Migrate to use Prices' aria-label='Migrate to use Prices'
      >
        Migrate to use Prices
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/sigma">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header sigma">
          <a class="">
            Sigma
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../sigma.html" class=" "
        
         aria-label='Stripe Sigma overview' title='Stripe Sigma overview'
      >
        Overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sigma/transactions.html" class=" "
        
         aria-label='Querying transactions' title='Querying transactions'
      >
        Transactions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sigma/billing.html" class=" "
        
         aria-label='Querying Billing' title='Querying Billing'
      >
        Billing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sigma/connect.html" class=" "
        
         aria-label='Stripe Sigma for Connect platforms' title='Stripe Sigma for Connect platforms'
      >
        Connect
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../sigma/scheduled-queries.html" class=" "
        
        title='Scheduled queries' aria-label='Scheduled queries'
      >
        Scheduled queries
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/atlas">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header atlas">
          <a class="">
            Atlas
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../atlas.html" class=" "
        
         aria-label='Stripe Atlas overview' title='Stripe Atlas overview'
      >
        Overview
      </a>
    </li>
    <li class="category ">Company formation
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/company-types.html" class=" "
        
         aria-label='Stripe Atlas company types' title='Stripe Atlas company types'
      >
        Company types
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/application.html" class=" "
        
         aria-label='Stripe Atlas application process' title='Stripe Atlas application process'
      >
        Stripe Atlas application
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/issuing-stock.html" class=" "
        
         aria-label='Issuing stock to founders using Stripe Atlas' title='Issuing stock to founders using Stripe Atlas'
      >
        Issuing stock to founders
      </a>
    </li>
    <li class="category ">Post company formation
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html" class=" "
        
         aria-label='Stripe Atlas next steps' title='Stripe Atlas next steps'
      >
        Next steps
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#payments" class=" "
        
         aria-label='Stripe payments account' title='Stripe payments account'
      >
        Stripe payments
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#bank-account" class=" "
        
         aria-label='Business bank account' title='Business bank account'
      >
        Business bank account
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#the-atlas-forum" class=" "
        
         aria-label='Stripe Atlas Community' title='Stripe Atlas Community'
      >
        Stripe Atlas Community
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#additional-resources" class=" "
        
         aria-label='Additional Stripe Atlas resources' title='Additional Stripe Atlas resources'
      >
        Additional resources
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#partner-benefits" class=" "
        
         aria-label='Stripe Atlas partner benefits' title='Stripe Atlas partner benefits'
      >
        Partner benefits
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#agent" class=" "
        
         aria-label='Stripe Atlas Registered Agent service' title='Stripe Atlas Registered Agent service'
      >
        Registered Agent service
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#legal" class=" "
        
         aria-label='Legal resources' title='Legal resources'
      >
        Legal
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#bookkeeping" class=" "
        
         aria-label='Bookkeeping resources' title='Bookkeeping resources'
      >
        Bookkeeping
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../atlas/next.html#taxes" class=" "
        
         aria-label='Taxes resources' title='Taxes resources'
      >
        Taxes
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/radar">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header radar">
          <a class="">
            Radar
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../radar.html" class=" "
        
         aria-label='Stripe Radar overview' title='Stripe Radar overview'
      >
        Overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../radar/risk-evaluation.html" class=" "
        
        title='Risk evaluation' aria-label='Risk evaluation'
      >
        Risk evaluation
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../radar/risk-settings.html" class=" "
        
        title='Risk settings' aria-label='Risk settings'
      >
        Risk settings
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../radar/reviews.html" class=" "
        
        title='Reviews' aria-label='Reviews'
      >
        Reviews
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../radar/reviews/auth-and-capture.html" class=" "
        
         aria-label='Reviewing uncaptured payments' title='Reviewing uncaptured payments'
      >
        Uncaptured payments
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../radar/lists.html" class=" "
        
        title='Lists' aria-label='Lists'
      >
        Lists
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../radar/rules.html" class=" "
        
        title='Rules' aria-label='Rules'
      >
        Rules
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../radar/rules/reference.html" class=" "
        
         aria-label='Rules Reference' title='Rules Reference'
      >
        Reference
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../radar/testing.html" class=" "
        
         aria-label='Testing Stripe Radar' title='Testing Stripe Radar'
      >
        Testing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../radar/checklist.html" class=" "
        
         aria-label='Radar integration checklist' title='Radar integration checklist'
      >
        Checklist
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../disputes.html" class=" "
        
        title='Disputes and fraud' aria-label='Disputes and fraud'
      >
        Disputes and fraud
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../disputes/how-disputes-work.html" class=" "
        
        title='How disputes work' aria-label='How disputes work'
      >
        How disputes work
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/responding.html" class=" "
        
        title='Responding to disputes' aria-label='Responding to disputes'
      >
        Responding to disputes
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../disputes/api.html" class=" "
        
        title='Using the API' aria-label='Using the API'
      >
        Using the API
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/categories.html" class=" "
        
        title='Categories' aria-label='Categories'
      >
        Categories
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../disputes/withdrawing.html" class=" "
        
        title='Dispute withdrawals' aria-label='Dispute withdrawals'
      >
        Dispute withdrawals
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/prevention.html" class=" "
        
        title='Fraud prevention' aria-label='Fraud prevention'
      >
        Fraud prevention
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../disputes/prevention/identifying-fraud.html" class=" "
        
        title='Identifying fraud' aria-label='Identifying fraud'
      >
        Identifying fraud
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/prevention/fraud-types.html" class=" "
        
        title='Types of fraud' aria-label='Types of fraud'
      >
        Types of fraud
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/prevention/verification.html" class=" "
        
        title='Verification checks' aria-label='Verification checks'
      >
        Verification checks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/prevention/best-practices.html" class=" "
        
        title='Best practices' aria-label='Best practices'
      >
        Best practices
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/prevention/advanced-fraud-detection.html" class=" "
        
        title='Advanced fraud detection' aria-label='Advanced fraud detection'
      >
        Advanced fraud detection
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../disputes/measuring.html" class=" "
        
        title='Measuring disputes' aria-label='Measuring disputes'
      >
        Measuring disputes
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/connect.html" class=" "
        
        title='Disputes on Connect' aria-label='Disputes on Connect'
      >
        Disputes on Connect
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../disputes/monitoring-programs.html" class=" "
        
        title='Monitoring programs' aria-label='Monitoring programs'
      >
        Monitoring programs
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../disputes/monitoring-programs/faqs.html" class=" "
        
        title='FAQs' aria-label='FAQs'
      >
        FAQs
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../disputes/match.html" class=" "
        
        title='High risk merchant lists' aria-label='High risk merchant lists'
      >
        High risk merchant lists
      </a>
    </li>
</ul>

    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/issuing">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header issuing">
          <a class="">
            Issuing
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../issuing.html" class=" "
        
         aria-label='Issuing overview (Invite only)' title='Issuing overview (Invite only)'
      >
        Overview
      </a>
    </li>
    <li class="category ">Getting started
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/cards.html" class=" "
        
        title='Creating cards' aria-label='Creating cards'
      >
        Creating cards
      </a>
    </li>
    <li class="category ">Cards
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/cards/virtual.html" class=" "
        
        title='Virtual cards' aria-label='Virtual cards'
      >
        Virtual cards
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/cards/physical.html" class=" "
        
        title='Physical cards' aria-label='Physical cards'
      >
        Physical cards
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/cards/digital-wallets.html" class=" "
        
        title='Digital wallets' aria-label='Digital wallets'
      >
        Digital wallets
      </a>
    </li>
    <li class="category ">Controls
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/controls/spending-controls.html" class=" "
        
        title='Spending controls' aria-label='Spending controls'
      >
        Spending controls
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/controls/real-time-authorizations.html" class=" "
        
        title='Real-time authorizations' aria-label='Real-time authorizations'
      >
        Real-time authorizations
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/controls/fraud-protection.html" class=" "
        
        title='Fraud protection' aria-label='Fraud protection'
      >
        Fraud protection
      </a>
    </li>
    <li class="category ">Funding
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/funding/balance.html" class=" "
        
        title='Balance' aria-label='Balance'
      >
        Balance
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/funding/connect.html" class=" "
        
        title='Connect' aria-label='Connect'
      >
        Connect
      </a>
    </li>
    <li class="category ">Purchases
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/purchases/authorizations.html" class=" "
        
        title='Authorizations' aria-label='Authorizations'
      >
        Authorizations
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/transactions.html" class=" "
        
        title='Transactions' aria-label='Transactions'
      >
        Transactions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/purchases/disputes.html" class=" "
        
        title='Disputes' aria-label='Disputes'
      >
        Disputes
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../issuing/testing.html" class=" "
        
         aria-label='Testing Stripe Issuing' title='Testing Stripe Issuing'
      >
        Testing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../issuing/categories.html" class=" "
        
        title='Merchant categories' aria-label='Merchant categories'
      >
        Merchant categories
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/terminal">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header terminal">
          <a class="">
            Terminal
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../terminal.html" class=" "
        
         aria-label='Stripe Terminal overview' title='Stripe Terminal overview'
      >
        Overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/example-applications.html" class=" "
        
         aria-label='Example applications' title='Example applications'
      >
        Example applications
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/designing-integration.html" class=" "
        
         aria-label='Learn which SDK and reader works best for you' title='Learn which SDK and reader works best for you'
      >
        Designing an integration
      </a>
    </li>
    <li class="category ">Getting started
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/sdk/js.html" class=" "
        
         aria-label='Getting started with the JavaScript SDK' title='Getting started with the JavaScript SDK'
      >
        JavaScript
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../terminal/js-api-reference.html" class=" "
        
         aria-label='API reference for the JavaScript SDK' title='API reference for the JavaScript SDK'
      >
        JavaScript API reference
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../terminal/sdk/ios.html" class=" "
        
         aria-label='Getting started with the iOS SDK' title='Getting started with the iOS SDK'
      >
        iOS
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/sdk/android.html" class=" "
        
         aria-label='Getting started with the Android SDK' title='Getting started with the Android SDK'
      >
        Android
      </a>
    </li>
    <li class="category ">Readers
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers.html" class=" "
        
         aria-label='See reader types and learn how to set them up' title='See reader types and learn how to set them up'
      >
        Reader setup
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../terminal/readers/bbpos-chipper2xbt.html" class=" "
        
         aria-label='The mobile POS reader' title='The mobile POS reader'
      >
        BBPOS Chipper 2X BT
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers/verifone-p400.html" class=" "
        
         aria-label='The countertop, internet-enabled reader' title='The countertop, internet-enabled reader'
      >
        Verifone P400
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers/connecting.html" class=" "
        
         aria-label='How to connect your app to a reader' title='How to connect your app to a reader'
      >
        Connecting to a reader
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../terminal/readers/connecting/bbpos-chipper2xbt.html" class=" "
        
         aria-label='The mobile POS reader' title='The mobile POS reader'
      >
        BBPOS Chipper 2X BT
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers/connecting/verifone-p400.html" class=" "
        
         aria-label='The countertop, internet-enabled reader' title='The countertop, internet-enabled reader'
      >
        Verifone P400
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers/fleet-management.html" class=" "
        
         aria-label='Managing readers across several locations' title='Managing readers across several locations'
      >
        Fleet management
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/readers/placing-orders.html" class=" "
        
         aria-label='Order readers from the Dashboard' title='Order readers from the Dashboard'
      >
        Placing orders
      </a>
    </li>
    <li class="category ">Transactions
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/payments.html" class=" "
        
         aria-label='Collecting payments with Terminal' title='Collecting payments with Terminal'
      >
        Collecting payments
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/payments/connect.html" class=" "
        
         aria-label='Using Terminal with Connect' title='Using Terminal with Connect'
      >
        Connect platforms
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/payments/saving-cards.html" class=" "
        
         aria-label='Using Terminal with online payments' title='Using Terminal with online payments'
      >
        Saving cards
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/payments/refunds.html" class=" "
        
         aria-label='Using Terminal to issue refunds' title='Using Terminal to issue refunds'
      >
        Refunds
      </a>
    </li>
    <li class="category ">Checkout experience
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/checkout/cart-display.html" class=" "
        
         aria-label='Displaying cart details' title='Displaying cart details'
      >
        Cart display
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/checkout/receipts.html" class=" "
        
         aria-label='Providing receipts with Terminal' title='Providing receipts with Terminal'
      >
        Receipts
      </a>
    </li>
    <li class="category ">Global
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/canada.html" class=" "
        
         aria-label='Learn about collecting payments with Stripe Terminal in Canada' title='Learn about collecting payments with Stripe Terminal in Canada'
      >
        Canada
      </a>
    </li>
    <li class="category ">Beta
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/beta-migration-guide.html" class=" "
        
         aria-label='Learn how to migrate from the Stripe Terminal beta' title='Learn how to migrate from the Stripe Terminal beta'
      >
        Beta migration guide
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../terminal/testing.html" class=" "
        
         aria-label='Testing Stripe Terminal' title='Testing Stripe Terminal'
      >
        Testing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../terminal/checklist.html" class=" "
        
         aria-label='Terminal integration checklist' title='Terminal integration checklist'
      >
        Checklist
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/capital/faqs">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header capital">
          <a class="">
            Capital
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../capital/faqs.html" class=" "
        
         aria-label='Frequently asked questions' title='Frequently asked questions'
      >
        Frequently asked questions
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/corporate-card">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header corporatecard">
          <a class="">
            Corporate Card
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../corporate-card.html" class=" "
        
         aria-label='Stripe Corporate Card Overview (Invite only)' title='Stripe Corporate Card Overview (Invite only)'
      >
        Overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/applying.html" class=" "
        
         aria-label='Applying for Corporate Card' title='Applying for Corporate Card'
      >
        Applying for Corporate Card
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/new-cards.html" class=" "
        
         aria-label='Creating new cards' title='Creating new cards'
      >
        Creating new cards
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/rewards-and-benefits.html" class=" "
        
         aria-label='Rewards and benefits' title='Rewards and benefits'
      >
        Rewards and benefits
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/dashboard.html" class=" "
        
         aria-label='Understanding the dashboard' title='Understanding the dashboard'
      >
        Understanding the dashboard
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/card-management.html" class=" "
        
         aria-label='Card management' title='Card management'
      >
        Card management
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../corporate-card/faqs.html" class=" "
        
         aria-label='Frequently asked questions' title='Frequently asked questions'
      >
        Frequently asked questions
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/identity">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header identity">
          <a class="">
            Identity
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../identity.html" class=" "
        
        title='Overview' aria-label='Overview'
      >
        Overview
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/dashboard">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header dashboard">
          <a class="">
            Dashboard
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../dashboard.html" class=" "
        
         aria-label='Dashboard overview' title='Dashboard overview'
      >
        Overview
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../dashboard/search.html" class=" "
        
         aria-label='Performing searches in the Dashboard' title='Performing searches in the Dashboard'
      >
        Search
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../dashboard/teams.html" class=" "
        
         aria-label='Teams and user roles' title='Teams and user roles'
      >
        Teams
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../dashboard/sso.html" class=" "
        
         aria-label='Single sign-on' title='Single sign-on'
      >
        Single sign-on
      </a>
      <ul class=" ">
</ul>

    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/account">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header account">
          <a class="">
            Account
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../account.html" class=" "
        
         aria-label='Managing your account' title='Managing your account'
      >
        Your account
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../multiple-accounts.html" class=" "
        
        title='Multiple accounts' aria-label='Multiple accounts'
      >
        Multiple accounts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../statement-descriptors.html" class=" "
        
        title='Statement descriptors' aria-label='Statement descriptors'
      >
        Statement descriptors
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../checklist.html" class=" "
        
         aria-label='Account checklist' title='Account checklist'
      >
        Checklist
      </a>
    </li>
    <li class="category ">Customer emails
    </li>
    <li class="sidebar-item ">
      <a href="../email-domain.html" class=" "
        
         aria-label='Configure your sending domain for customer emails' title='Configure your sending domain for customer emails'
      >
        Email domain
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/development">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header api">
          <a class="">
            Development
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../development.html" class=" "
        
         aria-label='Development quickstart' title='Development quickstart'
      >
        Quickstart
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../security.html" class=" "
        
         aria-label='Integration security guide' title='Integration security guide'
      >
        Security
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../security/data-migrations.html" class=" "
        
         aria-label='Data migrations at Stripe' title='Data migrations at Stripe'
      >
        Data migrations
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../webhooks.html" class=" "
        
        title='Webhooks' aria-label='Webhooks'
      >
        Webhooks
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../webhooks/build.html" class=" "
        
         aria-label='Build a webhook endpoint' title='Build a webhook endpoint'
      >
        Build webhooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../webhooks/test.html" class=" "
        
         aria-label='Test a webhook endpoint' title='Test a webhook endpoint'
      >
        Test webhooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../webhooks/signatures.html" class=" "
        
         aria-label='Check the webhook signatures' title='Check the webhook signatures'
      >
        Check signatures
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../webhooks/best-practices.html" class=" "
        
         aria-label='Best practices for using webhooks' title='Best practices for using webhooks'
      >
        Best practices
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../webhooks/go-live.html" class=" "
        
         aria-label='Take webhooks live' title='Take webhooks live'
      >
        Go live
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../file-upload.html" class=" "
        
        title='File uploads' aria-label='File uploads'
      >
        File uploads
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../error-handling.html" class=" "
        
        title='Error handling' aria-label='Error handling'
      >
        Error handling
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../error-codes.html" class=" "
        
        title='Error codes' aria-label='Error codes'
      >
        Error codes
      </a>
    </li>
    <li class="category ">API
    </li>
    <li class="sidebar-item ">
      <a href="../keys.html" class=" "
        
         aria-label='API keys' title='API keys'
      >
        Keys
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../libraries.html" class=" "
        
         aria-label='API libraries' title='API libraries'
      >
        Libraries
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../upgrades.html" class=" "
        
         aria-label='API upgrades' title='API upgrades'
      >
        Upgrades
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../rate-limits.html" class=" "
        
         aria-label='Rate limits' title='Rate limits'
      >
        Rate limits
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../card-testing.html" class=" "
        
         aria-label='Card testing' title='Card testing'
      >
        Card testing
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../ips.html" class=" "
        
         aria-label='Domains and IP addresses' title='Domains and IP addresses'
      >
        Domains and IP addresses
      </a>
    </li>
    <li class="category ">Building With Stripe
    </li>
    <li class="sidebar-item ">
      <a href="../stripe-js.html" class=" "
        
         aria-label='Our UI components and how to use them' title='Our UI components and how to use them'
      >
        Stripe's UI libraries
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../stripe-js/react.html" class=" "
        
         aria-label='React Stripe.js reference' title='React Stripe.js reference'
      >
        React Stripe.js
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../mobile/ios/standard.html" class=" "
        
         aria-label='Use our basic iOS integration' title='Use our basic iOS integration'
      >
        Prebuilt iOS UI
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../mobile/android/standard.html" class=" "
        
         aria-label='Use our basic Android integration' title='Use our basic Android integration'
      >
        Prebuilt Android UI
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../stripe-cli.html" class=" "
        
        title='Stripe CLI' aria-label='Stripe CLI'
      >
        Stripe CLI
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../stripe-cli/webhooks.html" class=" "
        
         aria-label='Listen to webhooks with the Stripe CLI' title='Listen to webhooks with the Stripe CLI'
      >
        Listen to webhooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../stripe-cli/test/index.html" class=" "
        
         aria-label='Test and monitor your integration with the Stripe CLI' title='Test and monitor your integration with the Stripe CLI'
      >
        Test and monitor your integration
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../stripe-cli/configure.html" class=" "
        
         aria-label='Configure the Stripe CLI' title='Configure the Stripe CLI'
      >
        Configure
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../cli.html" class=" "
        
         aria-label='Stripe CLI reference' title='Stripe CLI reference'
      >
        Reference
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../building-extensions.html" class=" "
        
         aria-label='Building extensions' title='Building extensions'
      >
        Extensions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins.html" class=" "
        
         aria-label='Use a Stripe plugin in your website platform' title='Use a Stripe plugin in your website platform'
      >
        Plugins
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../building-plugins.html" class=" "
        
        title='Building plugins' aria-label='Building plugins'
      >
        Building plugins
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/wordpress.html" class=" "
        
         aria-label='Stripe plugin for WordPress' title='Stripe plugin for WordPress'
      >
        WordPress
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/drupal.html" class=" "
        
         aria-label='Stripe plugin for Drupal' title='Stripe plugin for Drupal'
      >
        Drupal
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/magento.html" class=" "
        
         aria-label='Magento 2 Plugin' title='Magento 2 Plugin'
      >
        Magento
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../plugins/magento/install.html" class=" "
        
         aria-label='Installing the Magento 2 plugin' title='Installing the Magento 2 plugin'
      >
        Installation
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/magento/configuration.html" class=" "
        
         aria-label='Configuring the Magento 2 plugin' title='Configuring the Magento 2 plugin'
      >
        Configuration
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/magento/subscriptions.html" class=" "
        
         aria-label='Using subscriptions with the Magento 2 plugin' title='Using subscriptions with the Magento 2 plugin'
      >
        Using subscriptions
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../magento/admin.html" class=" "
        
         aria-label='Using the Magento Admin Panel' title='Using the Magento Admin Panel'
      >
        Using the Admin Panel
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../magento/troubleshooting.html" class=" "
        
         aria-label='Troubleshooting the Magento 2 plugin' title='Troubleshooting the Magento 2 plugin'
      >
        Troubleshooting
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../plugins/salesforce-commerce-cloud.html" class=" "
        
         aria-label='Stripe plugin for Salesforce Commerce Cloud' title='Stripe plugin for Salesforce Commerce Cloud'
      >
        Salesforce Commerce Cloud
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/joomla.html" class=" "
        
         aria-label='Stripe plugin for Joomla' title='Stripe plugin for Joomla'
      >
        Joomla
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl.html" class=" "
        
         aria-label='Mirakl Connector' title='Mirakl Connector'
      >
        Mirakl
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/configuration.html" class=" "
        
         aria-label='Configure the Mirakl Connector' title='Configure the Mirakl Connector'
      >
        Configuration
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/install.html" class=" "
        
         aria-label='Install the Mirakl Connector' title='Install the Mirakl Connector'
      >
        Installation
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/onboarding-sellers.html" class=" "
        
         aria-label='Onboard your Mirakl Sellers' title='Onboard your Mirakl Sellers'
      >
        Onboarding sellers
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/payments.html" class=" "
        
         aria-label='Accept payments for your Mirakl Orders' title='Accept payments for your Mirakl Orders'
      >
        Payments
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/payouts.html" class=" "
        
         aria-label='Pay your Mirakl Sellers out' title='Pay your Mirakl Sellers out'
      >
        Payouts
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../plugins/mirakl/reference.html" class=" "
        
         aria-label='Mirakl Connector reference' title='Mirakl Connector reference'
      >
        Reference
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="https://stripe.com/partners/apps-and-extensions/collection/e-commerce" class=" external"
         target='blank''
         aria-label='Full list of Stripe partners' title='Full list of Stripe partners'
      >
        No coding required
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="https://github.com/stripe-samples" class=" external"
        
         aria-label='Sample integrations built by Stripe' title='Sample integrations built by Stripe'
      >
        Samples
      </a>
    </li>
    <li class="sidebar-item separator">
      <a href="../development/checklist.html" class=" "
        
         aria-label='Development checklist' title='Development checklist'
      >
        Checklist
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../checklist/website.html" class=" "
        
         aria-label='Website checklist' title='Website checklist'
      >
        Website checklist
      </a>
    </li>
</ul>

    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/reports/financial-reports">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header reporting">
          <a class="">
            Reports
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../dashboard/reporting.html" class=" "
        
        title='Financial reports' aria-label='Financial reports'
      >
        Financial reports
      </a>
      <ul class=" ">
    <li class="sidebar-item ">
      <a href="../reports/financial-reports/report-schemas.html" class=" "
        
        title='Report schemas' aria-label='Report schemas'
      >
        Report schemas
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../reports/financial-reports/api.html" class=" "
        
        title='Report API' aria-label='Report API'
      >
        Report API
      </a>
    </li>
</ul>

    </li>
    <li class="sidebar-item ">
      <a href="../reports/quickbooks.html" class=" "
        
         aria-label='Export account activity to QuickBooks' title='Export account activity to QuickBooks'
      >
        QuickBooks
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../reports/custom-reports.html" class=" "
        
        title='Custom reports' aria-label='Custom reports'
      >
        Custom reports
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../reports/balance-transaction-types.html" class=" "
        
        title='Balance transaction types' aria-label='Balance transaction types'
      >
        Balance transaction types
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../reporting/reporting-categories.html" class=" "
        
        title='Reporting categories' aria-label='Reporting categories'
      >
        Reporting categories
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../reports/netsuite-connector.html" class=" "
        
        title='Stripe Connector for NetSuite' aria-label='Stripe Connector for NetSuite'
      >
        Stripe Connector for NetSuite
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/partners">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header partners">
          <a class="">
            Partners
          </a>
        </h1>
        <ul class=" always-expanded">
    <li class="sidebar-item ">
      <a href="../partners.html" class=" "
        
         aria-label='Understanding the Stripe Partner Program' title='Understanding the Stripe Partner Program'
      >
        Partner Program basics
      </a>
    </li>
    <li class="category ">Verified Partner
    </li>
    <li class="sidebar-item ">
      <a href="../partners/requirements.html" class=" "
        
         aria-label='Verified partner requirements' title='Verified partner requirements'
      >
        Verified partner requirements
      </a>
    </li>
    <li class="sidebar-item ">
      <a href="../partners/apps-and-extensions.html" class=" "
        
         aria-label='Partner gallery listing' title='Partner gallery listing'
      >
        Partner gallery listing
      </a>
    </li>
    <li class="category ">Verification
    </li>
    <li class="sidebar-item ">
      <a href="../partners/verification.html" class=" "
        
         aria-label='Learn About the Stripe Service Partner Verification Program' title='Learn About the Stripe Service Partner Verification Program'
      >
        Service Partner Verification
      </a>
    </li>
</ul>

      </div>
      <div class="section " data-section-id="/docs/api">
        <a href="../recipes/switching-to-stripe.html" class="back">Home</a>
        <h1 class="section-header references">
          <a class="external">
            API Reference
          </a>
        </h1>
        
      </div>
  </div>
</nav>


  <div class="countries-container">
          <h1 class="country-selected">
  <a href="javascript:void(0);" class="item-country-selected">United States</a>
  <div class="popup available-country-list">
    <ul class='optionList'>
      <li>
        <a class=""
          href="https://stripe.com/country?country=AU&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--au"></div>
          <div>
            <span class="country-name">
              Australia
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=AT&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--at"></div>
          <div>
            <span class="country-name">
              Austria
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=BE&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--be"></div>
          <div>
            <span class="country-name">
              Belgium
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=BG&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--bg"></div>
          <div>
            <span class="country-name">
              Bulgaria
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=CA&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--ca"></div>
          <div>
            <span class="country-name">
              Canada
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=CY&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--cy"></div>
          <div>
            <span class="country-name">
              Cyprus
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=CZ&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--cz"></div>
          <div>
            <span class="country-name">
              Czech Republic
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=DK&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--dk"></div>
          <div>
            <span class="country-name">
              Denmark
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=EE&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--ee"></div>
          <div>
            <span class="country-name">
              Estonia
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=FI&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--fi"></div>
          <div>
            <span class="country-name">
              Finland
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=FR&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--fr"></div>
          <div>
            <span class="country-name">
              France
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=DE&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--de"></div>
          <div>
            <span class="country-name">
              Germany
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=GR&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--gr"></div>
          <div>
            <span class="country-name">
              Greece
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=HK&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--hk"></div>
          <div>
            <span class="country-name">
              Hong Kong
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=IN&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--in"></div>
          <div>
            <span class="country-name">
              India
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=IE&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--ie"></div>
          <div>
            <span class="country-name">
              Ireland
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=IT&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--it"></div>
          <div>
            <span class="country-name">
              Italy
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=JP&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--jp"></div>
          <div>
            <span class="country-name">
              Japan
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=LV&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--lv"></div>
          <div>
            <span class="country-name">
              Latvia
            </span>
          </div>
        </a>
      </li>
    </ul>
    <ul class='optionList'>
      <li>
        <a class=""
          href="https://stripe.com/country?country=LT&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--lt"></div>
          <div>
            <span class="country-name">
              Lithuania
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=LU&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--lu"></div>
          <div>
            <span class="country-name">
              Luxembourg
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=MY&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--my"></div>
          <div>
            <span class="country-name">
              Malaysia
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=MT&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--mt"></div>
          <div>
            <span class="country-name">
              Malta
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=MX&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--mx"></div>
          <div>
            <span class="country-name">
              Mexico
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=NL&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--nl"></div>
          <div>
            <span class="country-name">
              Netherlands
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=NZ&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--nz"></div>
          <div>
            <span class="country-name">
              New Zealand
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=NO&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--no"></div>
          <div>
            <span class="country-name">
              Norway
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=PL&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--pl"></div>
          <div>
            <span class="country-name">
              Poland
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=PT&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--pt"></div>
          <div>
            <span class="country-name">
              Portugal
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=RO&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--ro"></div>
          <div>
            <span class="country-name">
              Romania
            </span>
              <em class="badge">Preview</em>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=SG&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--sg"></div>
          <div>
            <span class="country-name">
              Singapore
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=SK&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--sk"></div>
          <div>
            <span class="country-name">
              Slovakia
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=SI&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--si"></div>
          <div>
            <span class="country-name">
              Slovenia
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=ES&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--es"></div>
          <div>
            <span class="country-name">
              Spain
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=SE&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--se"></div>
          <div>
            <span class="country-name">
              Sweden
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=CH&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--ch"></div>
          <div>
            <span class="country-name">
              Switzerland
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=""
          href="https://stripe.com/country?country=GB&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--gb"></div>
          <div>
            <span class="country-name">
              United Kingdom
            </span>
          </div>
        </a>
      </li>
      <li>
        <a class=" selected"
          href="https://stripe.com/country?country=US&amp;redirect=/docs/connect/enable-payment-acceptance-guide"
          rel="nofollow"
        >
          <div class="common-FlagIcon common-FlagIcon--us"></div>
          <div>
            <span class="country-name">
              United States
            </span>
          </div>
        </a>
      </li>
    </ul>
  </div>
</h1>

        <h1 class="language js-language-selector">
  <a href="javascript:void(0);" class="item-language">English</a>
  <div class="popup language-list">
    <ul class='optionList'>
        <li>
          <a
            data-language="de"
            href="enable-payment-acceptance-guide.html#"
            rel="nofollow"
            
          ><span>Deutsch</span
          >
          </a>
        </li>
        <li>
          <a
            data-language="en"
            href="enable-payment-acceptance-guide.html#"
            rel="nofollow"
            class="selected"
          ><span>English</span
          >
          </a>
        </li>
        <li>
          <a
            data-language="es"
            href="enable-payment-acceptance-guide.html#"
            rel="nofollow"
            
          ><span>Español (España)</span
          >
          </a>
        </li>
        <li>
          <a
            data-language="fr"
            href="enable-payment-acceptance-guide.html#"
            rel="nofollow"
            
          ><span>Français</span
          >
          </a>
        </li>
        <li>
          <a
            data-language="it"
            href="enable-payment-acceptance-guide.html#"
            rel="nofollow"
            
          ><span>Italiano</span
          >
          </a>
        </li>
        <li>
          <a
            data-language="ja"
            href="enable-payment-acceptance-guide.html#"
            rel="nofollow"
            
          ><span>日本語</span
          >
          </a>
        </li>
        <li>
          <a
            data-language="zh-CN"
            href="enable-payment-acceptance-guide.html#"
            rel="nofollow"
            
          ><span>简体中文</span
          >
          </a>
        </li>
    </ul>
  </div>
</h1>

    
  <h1 class="account"><a id="docs-sidebar-dashboard-link" href="https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fstripe.com%2Fdocs%2Fconnect%2Fenable-payment-acceptance-guide">Sign In →</a></h1>

  </div>


        </div>
        <div id="content-wrapper" tabindex="0" class=" ">
          <div class="overlay"></div>
            <div class="search-results">
              <ul class="results"></ul>
            </div>
            <form class="search">
              <input type="search" placeholder="Search documentation...">
              <div class="search-after">
                <span class="search-text"></span>
                <span class="search-after-text--no-results">— No Results</span>
              </div>
            </form>
          
<header id="main-header">
  <nav>
    <ul class="external">
        <li>
          <a
            href="https://dashboard.stripe.com/register"
            class="docs-header-cta"
            data-analytics-action='sign_up' data-analytics-source='docs_header_cta' data-convert-cta='dashboard_register'
          >
            Start now
          </a>
        </li>

      <li><a href="https://support.stripe.com" class="common-Link">Support</a></li>

      <li id="apis-sdks-dropdown">
  <a class="apis-sdks-dropdown-trigger common-Link">APIs & SDKs</a>
  <ul class="apis-sdks-dropdown-menu">
    <li><a href="../api/index.html">API Reference</a></li>
    <li><a href="../stripe-js/reference.html">Stripe.js</a></li>
    <li><a href="../cli.html">Stripe CLI</a></li>
    <hr class="apis-sdks-dropdown-separator" />
      <li>
        <a href="https://stripe.dev/stripe-ios/docs" target="_blank" rel="noopener noreferrer" class="apis-sdks-dropdown-link">
          iOS
          <span class="apis-sdks-dropdown-external-icon"></span>
        </a>
      </li>
      <li>
        <a href="https://stripe.dev/stripe-android" target="_blank" rel="noopener noreferrer" class="apis-sdks-dropdown-link">
          Android
          <span class="apis-sdks-dropdown-external-icon"></span>
        </a>
      </li>
  </ul>
</li>


      <li class="button">
        <a
          id="docs-header-dashboard-link"
          data-adroll-segment='submit_two'
          href="https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fstripe.com%2Fdocs%2Fconnect%2Fenable-payment-acceptance-guide"
          class="common-Link"
        >Sign in</a>
      </li>
    </ul>
  </nav>
</header>

          <div class="article-container">
            <article id="content">
                
  <header>
  <h1 id="enable-other-businesses-to-accept-payments-directly">Enable other businesses to accept payments directly</h1>

  <p>Facilitate direct payments between other businesses and their own customers.</p>
</header>
  <p>This guide walks you through how to enable your users to accept payments, move a portion of their earnings into your balance, and pay out the remainder to your users’ bank accounts. We’ll illustrate these concepts with an example of a store builder platform that enables businesses to set up their own Internet stores.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ol>
  <li><a href="https://dashboard.stripe.com/connect/tasklist">Register your platform</a>.</li>
  <li><a href="https://dashboard.stripe.com/account/details/">Activate your account</a>.</li>
  <li>Fill out your <a href="https://dashboard.stripe.com/connect/settings/profile">platform profile</a>.</li>
</ol>
<div class="expando" aria-expanded="true">
  <a id="setup" href="enable-payment-acceptance-guide.html#setup" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Set up Stripe">
        <span class="expando-left-text">1</span>
      Set up Stripe
        <span class="tag optional">Server-side</span>
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>Install Stripe’s official libraries so you can access the API from your application:</p>
<div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="java">Java</a>
<a data-language="node">Node</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="ruby">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered" ><div class="file-content-wrapper"><code># Available as a gem
sudo gem install stripe</code></div></pre>
<nav class="nav-filename icon-file">
<span>
Gemfile
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-ruby not-numbered" ><div class="file-content-wrapper"><code># If you use bundler, you can add this line to your Gemfile
gem &#39;stripe&#39;</code></div></pre>

</div>
  
<div class="code" data-language="python">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered" ><div class="file-content-wrapper"><code># Install through pip
pip install --upgrade stripe</code></div></pre>
<nav class="nav-filename icon-false">
<span>
PyPI
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered" ><div class="file-content-wrapper"><code># Or find the Stripe package on http://pypi.python.org/pypi/stripe/</code></div></pre>

</div>
  
<div class="code" data-language="php">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered" ><div class="file-content-wrapper"><code># Install the PHP library via Composer
composer require stripe/stripe-php</code></div></pre>
<nav class="nav-filename icon-false">
<span>
Source
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered" ><div class="file-content-wrapper"><code># Or download the source directly: https://github.com/stripe/stripe-php/releases</code></div></pre>

</div>
  
<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
build.gradle
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-java not-numbered" ><div class="file-content-wrapper"><code>/*
 For Gradle, add the following dependency to your build.gradle and replace {VERSION} with
 the version number you want to use from
 - https://mvnrepository.com/artifact/com.stripe/stripe-java or
 - https://github.com/stripe/stripe-java/releases/latest
*/
implementation &quot;com.stripe:stripe-java:{VERSION}&quot;</code></div></pre>
<nav class="nav-filename icon-file">
<span>
pom.xml
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-xml not-numbered" ><div class="file-content-wrapper"><code>&lt;!--
  For Maven, add the following dependency to your POM and replace {VERSION} with the
  version number you want to use from
  - https://mvnrepository.com/artifact/com.stripe/stripe-java or
  - https://github.com/stripe/stripe-java/releases/latest
--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.stripe&lt;/groupId&gt;
  &lt;artifactId&gt;stripe-java&lt;/artifactId&gt;
  &lt;version&gt;{VERSION}&lt;/version&gt;
&lt;/dependency&gt;</code></div></pre>
<nav class="nav-filename icon-false">
<span>
Other environments
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered" ><div class="file-content-wrapper"><code># For other environments, manually install the following JARs:
# - The Stripe JAR from https://github.com/stripe/stripe-java/releases/latest
# - Google Gson from https://github.com/google/gson</code></div></pre>

</div>
  
<div class="code" data-language="node">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered" ><div class="file-content-wrapper"><code># Install via npm
npm install --save stripe</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered" ><div class="file-content-wrapper"><code># Install stripe-go
go get -u github.com/stripe/stripe-go</code></div></pre>
<nav class="nav-filename icon-file">
<span>
app.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-go not-numbered" ><div class="file-content-wrapper"><code>// Then import the package
import (
  &quot;github.com/stripe/stripe-go/v71&quot;
)</code></div></pre>

</div>
  
<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered" ><div class="file-content-wrapper"><code># Install via dotnet
dotnet add package Stripe.net
dotnet restore</code></div></pre>
<nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-bash not-numbered" ><div class="file-content-wrapper"><code># Or install via NuGet
PM&gt; Install-Package Stripe.net</code></div></pre>

</div>


</div>
</div>


  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="create-account" href="enable-payment-acceptance-guide.html#create-account" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Create a connected account">
        <span class="expando-left-text">2</span>
      Create a connected account
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>When a user (seller or service provider) signs up on your platform, create a user <a href="../api/accounts.html">Account</a> (referred to as a <em>connected account</em>) so you can accept payments and move funds to their bank account. Connected accounts represent your user in Stripe’s API and help facilitate the collection of onboarding requirements so Stripe can verify the user’s identity. In our store builder example, the connected account represents the business setting up their Internet store.</p>
<div id="connect-oauth-onboarding-demo">
  <div class="sr-sample ">
    <div class="sr-header sample"><h4>What you're building</h4>
        <div>
          <button class="sr-pill" id="oauth-github-btn">Clone from GitHub</button>
          <button class="sr-pill" id="oauth-cli-btn">Clone with CLI</button>
        </div>
    </div>
    <div class="sr-root ">
      <div class="sr-main">
        <a target="_blank" href="https://connect.stripe.com/oauth/authorize?response_type=code&amp;client_id=ca_32D88BD1qLklliziD7gYQvctJIhWBSQ7&amp;scope=read_write" class="connect-button"><span>Connect with Stripe</span></a>
      </div>
      <div class="brand-assets">
        <p class="sr-subtext">The Connect button logo is available in our <a href="https://stripe.com/newsroom/brand-assets" target="_blank">brand assets</a>.</p>
      </div>
    </div>
  </div>
  <div class="sr-clone cli hidden">
    <button class="close-sample-btn"></button>
    <p>Install the <a href="../stripe-cli.html#install">Stripe CLI</a>, then run the following in your terminal:</p>
    <div class="sr-terminal"><div>$</div>
      <div>stripe samples create connect-standard-oauth</div>
    </div>
    <p class="sr-subtext">Contains examples in PHP, Node.js, Ruby, Java, Python. The sample will be configured with your Stripe test key if you have set up the CLI with your Stripe account</p>
  </div>
  <div class="sr-clone github hidden">
    <button class="close-sample-btn"></button>
    <p>We have a set of samples on <a href="https://github.com/stripe-samples">GitHub</a> to help you get started.</p>
    <div class="sr-terminal"><div>$</div>
      <div>git clone https://github.com/stripe-samples/connect-standard-oauth</div>
    </div>
    <p class="sr-subtext">Contains examples in PHP, Node.js, Ruby, Java, Python.</p>
  </div>
</div>



<h3>
<span class="step">Step 2.1: </span>Add an authentication button
<span class="tag optional">Client-side</span>
</h3>
<p>Add an OAuth link to your website so the user can sign up for your platform:</p>

<div class="code" data-language="url">
  <pre class="language-url not-numbered wrap" ><div class="file-content-wrapper"><code>https://connect.stripe.com/oauth/authorize?client_id=ca_32D88BD1qLklliziD7gYQvctJIhWBSQ7&amp;state={STATE_VALUE}&amp;scope=read_write&amp;response_type=code&amp;stripe_user[email]=user@example.com&amp;stripe_user[url]=example.com</code></div></pre>

</div>


<ul>
  <li><code>client_id</code> - This can be found in your <a href="https://dashboard.stripe.com/settings/applications">platform settings</a>. If you’re testing your integration, enable <strong>View test data</strong> in the Dashboard.</li>
  <li><code>state</code> - Use this argument to prevent CSRF attacks. It should be a unique, not guessable value that’s generated and saved on your server. Stripe passes it back to your redirect after the user finishes the onboarding flow.</li>
  <li><code>scope</code> - Set this argument to read_write to allow charges and other writes for the connected account.</li>
  <li><code>response_type</code> - Use <code>code</code> to specify that we’ll send you an authorization code back in the redirect.</li>
  <li><code>stripe_user</code> - Use these arguments to prefill fields with information that you’ve already collected from the user. For example, if you have collected the business’s email and website URL, you can provide this information to Stripe with the stripe_user[email] and stripe_user[url] arguments.</li>
</ul>
<h3>
<span class="step">Step 2.2: </span>Save the account ID
<span class="tag optional">Server-side</span>
</h3>

<p>In <a href="https://dashboard.stripe.com/settings/applications">platform settings</a>, specify where the user should be redirected to after they’ve completed the OAuth flow with <code>redirect_uri</code>.</p>

<p><a href="../../img/docs/connect/redirect-settings.png" class="zoomable">
  <img width="100%" src="../../img/docs/connect/redirect-settings.png" />
</a></p>

<p>For example, if your redirect URI is <code>https://www.example.com/connect/oauth</code>, Stripe might redirect to <code>https://www.example.com/connect/oauth?state=s_987654321&amp;code=ac_123456789</code>.</p>

<aside class="important neutral">
  <p>
If there’s an error, the URI contains the <code>error</code> and <code>error_description</code> parameters instead.
</p>
</aside>

<p>Write a GET handler to extract the parameters from the URI, verify the <code>state</code> against the state you saved on your server, and send the token to Stripe’s API:</p>








<div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="curl">curl</a>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="node">Node</a>
<a data-language="java">Java</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="curl">
  <pre class="language-curl numbered" ><div class="file-content-wrapper"><code>curl https://connect.stripe.com/oauth/token \
  -u sk_test_4eC39HqLyjWDarjtT1zdp7dc: \
  -d code=ac_123456789 \
  -d grant_type=authorization_code
</code></div></pre>

</div>

<div class="code" data-language="ruby">
  <nav class="nav-filename icon-file">
<span>
server.rb
</span>
<div>
<a href="https://github.com/stripe-samples/connect-standard-oauth/blob/b60e77070a625e64c6dcbcb75ddbdc8f20b713c9/server/ruby/server.rb#L44-L73" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-ruby numbered highlighted-line" data-highlight-lines=20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43><div class="file-content-wrapper"><code># Using Sinatra.
require &#39;sinatra&#39;
require &#39;stripe&#39;

set :port, 4242

# Set your secret key. Remember to switch to your live secret key in production!
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;

get &#39;/&#39; do
  # Display landing page.
  content_type &#39;text/html&#39;
  send_file File.join(&#39;./index.html&#39;)
end

get &#39;/connect/oauth&#39; do
  content_type &#39;application/json&#39;

  # Assert the state matches the state you provided in the OAuth link (optional).
  state = params[:state]
  if !state_matches?(state)
    status 403
    return {error: &#39;Incorrect state parameter: &#39; + state}.to_json
  end

  # Send the authorization code to Stripe&#39;s API.
  code = params[:code]
  begin
    response = Stripe::OAuth.token({
      grant_type: &#39;authorization_code&#39;,
      code: code,
    })
  rescue Stripe::OAuth::InvalidGrantError
    status 400
    return {error: &#39;Invalid authorization code: &#39; + code}.to_json
  rescue Stripe::StripeError
    status 500
    return {error: &#39;An unknown error occurred.&#39;}.to_json
  end

  connected_account_id = response.stripe_user_id
  save_account_id(connected_account_id)

  # Render some HTML or redirect to a different page.
  status 200
  {success: true}.to_json
end

def state_matches?(state_parameter)
  # Load the same state value that you randomly generated for your OAuth link.
  saved_state = &#39;{{ STATE }}&#39;

  saved_state == state_parameter
end

def save_account_id(id)
  # Save the connected account ID from the response to your database.
  puts &#39;Connected account ID: &#39; + id
end</code></div></pre>

</div>

<div class="code" data-language="python">
  <nav class="nav-filename icon-file">
<span>
server.py
</span>
<div>
<a href="https://github.com/stripe-samples/connect-standard-oauth/blob/b60e77070a625e64c6dcbcb75ddbdc8f20b713c9/server/python/server.py#L51-L69" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-python numbered highlighted-line" data-highlight-lines=25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41><div class="file-content-wrapper"><code>import stripe
import json

# Using Flask.
from flask import (
    Flask,
    render_template,
    request,
)

app = Flask(__name__, static_folder=&quot;.&quot;,
            static_url_path=&quot;&quot;, template_folder=&quot;.&quot;)

@app.route(&#39;/&#39;, methods=[&#39;GET&#39;])
def get_example():
  # Display landing page.
  return render_template(&#39;index.html&#39;)

# Set your secret key. Remember to switch to your live secret key in production!
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;

@app.route(&quot;/connect/oauth&quot;, methods=[&quot;GET&quot;])
def handle_oauth_redirect():
  # Assert the state matches the state you provided in the OAuth link (optional).
  state = request.args.get(&quot;state&quot;)

  if not state_matches(state):
    return json.dumps({&quot;error&quot;: &quot;Incorrect state parameter: &quot; + state}), 403

  # Send the authorization code to Stripe&#39;s API.
  code = request.args.get(&quot;code&quot;)
  try:
    response = stripe.OAuth.token(grant_type=&quot;authorization_code&quot;, code=code,)
  except stripe.oauth_error.OAuthError as e:
    return json.dumps({&quot;error&quot;: &quot;Invalid authorization code: &quot; + code}), 400
  except Exception as e:
    return json.dumps({&quot;error&quot;: &quot;An unknown error occurred.&quot;}), 500

  connected_account_id = response[&quot;stripe_user_id&quot;]
  save_account_id(connected_account_id)

  # Render some HTML or redirect to a different page.
  return json.dumps({&quot;success&quot;: True}), 200

def state_matches(state_parameter):
  # Load the same state value that you randomly generated for your OAuth link.
  saved_state = &quot;{{ STATE }}&quot;

  return saved_state == state_parameter

def save_account_id(id):
  # Save the connected account ID from the response to your database.
  print(&quot;Connected account ID: &quot;, id)

if __name__ == &quot;__main__&quot;:
    app.run(port=4242)</code></div></pre>

</div>

<div class="code" data-language="php">
  <nav class="nav-filename icon-file">
<span>
server.php
</span>
<div>
<a href="https://github.com/stripe-samples/connect-standard-oauth/blob/b60e77070a625e64c6dcbcb75ddbdc8f20b713c9/server/php/index.php#L46-L73" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-php numbered highlighted-line" data-highlight-lines=23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42><div class="file-content-wrapper"><code>&lt;?php
// Using Slim.
use Slim\Http\Request;
use Slim\Http\Response;
use Stripe\Stripe;

require_once(&#39;vendor/autoload.php&#39;);

$app = new \Slim\App;

// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;);

$app-&gt;get(&#39;/&#39;, function (Request $request, Response $response, array $args) {
  // Display landing page.
  return $response-&gt;write(file_get_contents(&#39;./index.html&#39;));
});

$app-&gt;get(&#39;/connect/oauth&#39;, function ($request, $response, $next) {
  extract($request-&gt;getQueryParams());

  // Assert the state matches the state you provided in the OAuth link (optional).
  if (!stateMatches($state))
    return $response-&gt;withStatus(403)-&gt;withJson(array(&#39;error&#39; =&gt; &#39;Incorrect state parameter: &#39; . $state));

  // Send the authorization code to Stripe&#39;s API.
  $code = $request-&gt;getQueryParam(&#39;code&#39;);

  try {
    $stripeResponse = \Stripe\OAuth::token([
      &#39;grant_type&#39; =&gt; &#39;authorization_code&#39;,
      &#39;code&#39; =&gt; $code,
    ]);
  } catch (\Stripe\Error\OAuth\InvalidGrant $e) {
    return $response-&gt;withStatus(400)-&gt;withJson(array(&#39;error&#39; =&gt; &#39;Invalid authorization code: &#39; . $code));
  } catch (Exception $e) {
    return $response-&gt;withStatus(500)-&gt;withJson(array(&#39;error&#39; =&gt; &#39;An unknown error occurred.&#39;));
  }

  $connectedAccountId = $stripeResponse-&gt;stripe_user_id;
  saveAccountId($connectedAccountId);

  // Render some HTML or redirect to a different page.
  return $response-&gt;withStatus(200)-&gt;withJson(array(&#39;success&#39; =&gt; true));
});

function stateMatches($stateParameter) {
  // Load the same state value that you randomly generated for your OAuth link.
  $savedState = &#39;{{ STATE }}&#39;;

  return $savedState == $stateParameter;
};

function saveAccountId($id) {
  // Save the connected account ID from the response to your database.
  echo &#39;Connected account ID: &#39; . $id;
};

$app-&gt;run();</code></div></pre>

</div>

<div class="code" data-language="node">
  <nav class="nav-filename icon-file">
<span>
server.js
</span>
<div>
<a href="https://github.com/stripe-samples/connect-standard-oauth/blob/b60e77070a625e64c6dcbcb75ddbdc8f20b713c9/server/node/server.js#L47-L75" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered highlighted-line" data-highlight-lines=20,21,22,23,24,25,26,27,28,29,30,31,32><div class="file-content-wrapper"><code>// Using Express
const express = require(&#39;express&#39;);
const app = express();
app.use(express.json());
const { resolve } = require(&quot;path&quot;);

// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
const stripe = require(&#39;stripe&#39;)(&#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;);

app.get(&quot;/&quot;, (req, res) =&gt; {
  // Display landing page.
  const path = resolve(&quot;./index.html&quot;);
  res.sendFile(path);
});

app.get(&quot;/connect/oauth&quot;, async (req, res) =&gt; {
  const { code, state } = req.query;

  // Assert the state matches the state you provided in the OAuth link (optional).
  if(!stateMatches(state)) {
    return res.status(403).json({ error: &#39;Incorrect state parameter: &#39; + state });
  }

  // Send the authorization code to Stripe&#39;s API.
  stripe.oauth.token({
    grant_type: &#39;authorization_code&#39;,
    code
  }).then(
    (response) =&gt; {
      var connected_account_id = response.stripe_user_id;
      saveAccountId(connected_account_id);

      // Render some HTML or redirect to a different page.
      return res.status(200).json({success: true});
    },
    (err) =&gt; {
      if (err.type === &#39;StripeInvalidGrantError&#39;) {
        return res.status(400).json({error: &#39;Invalid authorization code: &#39; + code});
      } else {
        return res.status(500).json({error: &#39;An unknown error occurred.&#39;});
      }
    }
  );
});

const stateMatches = (state_parameter) =&gt; {
  // Load the same state value that you randomly generated for your OAuth link.
  const saved_state = &#39;sv_53124&#39;;

  return saved_state == state_parameter;
}

const saveAccountId = (id) =&gt; {
  // Save the connected account ID from the response to your database.
  console.log(&#39;Connected account ID: &#39; + id);
}

app.listen(4242, () =&gt; console.log(`Node server listening on port ${4242}!`));</code></div></pre>

</div>


<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
server.java
</span>
<div>
<a href="https://github.com/stripe-samples/connect-standard-oauth/blob/b60e77070a625e64c6dcbcb75ddbdc8f20b713c9/server/java/src/main/java/com/stripe/sample/Server.java#L76-L111" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-java numbered highlighted-line" data-highlight-lines=33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51><div class="file-content-wrapper"><code>package com.stripe.sample;

import com.google.gson.Gson;
import com.stripe.Stripe;
import com.stripe.net.OAuth;
import com.stripe.model.oauth.TokenResponse;
import com.stripe.exception.StripeException;
import com.stripe.exception.oauth.InvalidGrantException;
import spark.Response;

import java.nio.file.Paths;
import java.util.HashMap;
import java.util.Map;

// Using Spark.
import static spark.Spark.*;

import io.github.cdimascio.dotenv.Dotenv;

public class Server {
  private static Gson gson = new Gson();

  public static void main(String[] args) {
    port(4242);

    // Set your secret key. Remember to switch to your live secret key in production!
    // See your keys here: https://dashboard.stripe.com/account/apikeys
    Stripe.apiKey = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;;

    staticFiles.externalLocation(&quot;../client&quot;);

    get(&quot;/connect/oauth&quot;, (request, response) -&gt; {
      // Assert the state matches the state you provided in the OAuth link (optional).
      String state = request.queryParams(&quot;state&quot;);
      if (!stateMatches(state)) {
        return buildResponse(
          response, 403, &quot;error&quot;, &quot;Incorrect state parameter: &quot; + state
        );
      }

      // Send the authorization code to Stripe&#39;s API.
      String code = request.queryParams(&quot;code&quot;);
      Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();
      params.put(&quot;grant_type&quot;, &quot;authorization_code&quot;);
      params.put(&quot;code&quot;, code);

      try {
        TokenResponse stripeResponse = OAuth.token(params, null);
        // Save the connected account ID from the response to your database.
        String connectedAccountId = stripeResponse.getStripeUserId();
        saveAccountId(connectedAccountId);

        // Render some HTML or redirect to a different page.
        return buildResponse(response, 200, &quot;success&quot;, &quot;Request succeeded.&quot;);
      } catch (InvalidGrantException e) {
        // There&#39;s a problem with the authorization code.
        return buildResponse(
          response, 400, &quot;error&quot;, &quot;Invalid authorization code: &quot; + code
        );
      } catch (StripeException e) {
        // All other errors.
        return buildResponse(
          response, 500, &quot;error&quot;, &quot;An unknown error occurred.&quot;
        );
      }
    });
  }

  private static boolean stateMatches(String parameterState) {
    // Load the same state value that you randomly generated for your OAuth link.
    String savedState = &quot;{{ STATE }}&quot;;

    return savedState.equals(parameterState);
  }

  private static void saveAccountId(String id) {
    System.out.println(&quot;Connected account ID: &quot; + id);
  }

  private static String buildResponse(
    Response response, int statusCode, String type, String message
  ) {
    response.status(statusCode);
    Map&lt;String, String&gt; errorResponse = new HashMap&lt;&gt;();
    errorResponse.put(type, message);
    return gson.toJson(errorResponse);
  }
}</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-file">
<span>
server.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-go numbered highlighted-line" data-highlight-lines=38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64><div class="file-content-wrapper"><code>package main

import (
  &quot;encoding/json&quot;
  &quot;log&quot;
  &quot;fmt&quot;
  &quot;net/http&quot;

  &quot;github.com/stripe/stripe-go/v71&quot;
  &quot;github.com/stripe/stripe-go/v71/oauth&quot;

  &quot;os&quot;
)

type CreateOAuthResponse struct {
  Success      bool   `json:&quot;success&quot;`
}

func main() {
  // Set your secret key. Remember to switch to your live secret key in production!
  // See your keys here: https://dashboard.stripe.com/account/apikeys
  stripe.Key = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;

  // Display landing page.
  fs := http.FileServer(http.Dir(&quot;static&quot;))
  http.Handle(&quot;/&quot;, fs)

  http.HandleFunc(&quot;/connect/oauth&quot;, handleOauthRedirect)
  addr := &quot;localhost:4242&quot;

  log.Printf(&quot;Listening on %s ...&quot;, addr)
  log.Fatal(http.ListenAndServe(addr, nil))
}

func handleOauthRedirect(w http.ResponseWriter, r *http.Request) {
  query := r.URL.Query()

  // Assert the state matches the state you provided in the OAuth link (optional).
  state := query.Get(&quot;state&quot;)
  if !stateMatches(state, w) {
    http.Error(w, fmt.Sprintf(&quot;Invalid state parameter: %s&quot;, state), http.StatusForbidden)
    return
  }

  // Send the authorization code to Stripe&#39;s API.
  code := query.Get(&quot;code&quot;)
  params := &amp;stripe.OAuthTokenParams{
    GrantType: stripe.String(&quot;authorization_code&quot;),
    Code:      &amp;code,
  }
  token, err := oauth.New(params)

  if  err != nil {
    stripeErr := err.(*stripe.Error)
    if (stripeErr.OAuthError == &quot;invalid_grant&quot;) {
      http.Error(w, fmt.Sprintf(&quot;Invalid authorization code: %s&quot;, code), http.StatusBadRequest)
    } else {
      http.Error(w, &quot;An unknown error occurred.&quot;, http.StatusInternalServerError)
    }
    return
  }

  connectedAccountId := token.StripeUserID
  saveAccountId(connectedAccountId)

      // Render some HTML or redirect to a different page.
  json.NewEncoder(w).Encode(CreateOAuthResponse{
    Success:      true,
  })
}

func stateMatches(state_parameter string, w http.ResponseWriter) bool {
  // Load the same state value that you randomly generated for your OAuth link.
  saved_state := &quot;{{ STATE }}&quot;

	return saved_state == state_parameter
}

func saveAccountId(id string) {
  // Save the connected account ID from the response to your database.
  log.Println(&quot;Connected account ID: &quot; + id)
}</code></div></pre>

</div>

<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-file">
<span>
Controllers.cs
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-dotnet numbered highlighted-line" data-highlight-lines=37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75><div class="file-content-wrapper"><code>
using System;
using Microsoft.AspNetCore.Mvc;
using Microsoft.Extensions.Logging;
using Microsoft.Extensions.Options;
using Microsoft.AspNetCore.Http;

using Stripe;
using Newtonsoft.Json;

namespace Controllers
{
  public class ConnectController : Controller
  {
    private readonly StripeClient client;
    private readonly IOptions&lt;StripeOptions&gt; options;
    private readonly ILogger&lt;ConnectController&gt; logger;

    public ConnectController(
      IOptions&lt;StripeOptions&gt; options,
      ILogger&lt;ConnectController&gt; logger,
    ) {
      // Set your secret key: remember to switch to your live secret key in production
      // See your keys here: https://dashboard.stripe.com/account/apikeys
      this.client = new StripeClient(&quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;);
      this.options = options;
      this.logger = logger;
    }

    [HttpGet(&quot;/connect/oauth&quot;)]
    public IActionResult HandleOAuthRedirect(
      [FromQuery] string state,
      [FromQuery] string code
    ) {
      var service = new OAuthTokenService(client);

      // Assert the state matches the state you provided in the OAuth link (optional).
      if (!StateMatches(state))
      {
        return StatusCode(
          StatusCodes.Status403Forbidden,
          Json(new { Error = String.Format(&quot;Incorrect state parameter: {0}&quot;, state) })
        );
      }

      // Send the authorization code to Stripe&#39;s API.
      var options = new OAuthTokenCreateOptions
      {
        GrantType = &quot;authorization_code&quot;,
        Code = code,
      };

      OAuthToken response = null;

      try
      {
        response = service.Create(options);
      }
      catch (StripeException e)
      {
        if (e.StripeError != null &amp;&amp; e.StripeError.Error == &quot;invalid_grant&quot;) {
          return StatusCode(
            StatusCodes.Status400BadRequest,
            Json(new { Error = String.Format(&quot;Invalid authorization code: {0}&quot;, code) })
          );
        } else {
          return StatusCode(
            StatusCodes.Status500InternalServerError,
            Json(new { Error = &quot;An unknown error occurred.&quot; })
          );
        }
      }

      var connectedAccountId = response.StripeUserId;
      SaveAccountId(connectedAccountId);

      // Render some HTML or redirect to a different page.
      return new OkObjectResult(Json(new { Success = true }));
    }

    private bool StateMatches(string stateParameter)
    {
      // Load the same state value that you randomly generated for your OAuth link.
      var savedState = &quot;{{ STATE }}&quot;;

      return savedState == stateParameter;
    }

    private void SaveAccountId(string id)
    {
      // Save the connected account ID from the response to your database.
      logger.LogInformation($&quot;Connected account ID: {id}&quot;);
    }
  }
}</code></div></pre>

</div>


</div>
</div>


<p>Make sure to save the <code>stripe_user_id</code> parameter that’s returned to your database. This is your connected account’s ID and begins with <code>acct_</code>. You will need it later to accept payments directly on the account.</p>
  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="accept-payment" href="enable-payment-acceptance-guide.html#accept-payment" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Accept a payment">
        <span class="expando-left-text">3</span>
      Accept a payment
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p><a href="../stripe-js.html">Stripe Elements</a> is a set of prebuilt UI components, like inputs and buttons, for building your checkout flow. If you’d rather not build your own payment form, consider <a href="https://stripe.com/payments/checkout">Checkout</a>, a Stripe-hosted page to accept payments for one-time purchases and subscriptions.</p>

<div class='tabs tabs-regular  animated persists' data-group='elements-or-checkout'>
    
      <nav class="nav-tabs">
      
        <a>Elements</a>
        <a>Checkout</a>
  </nav>
  <div class="tabs-content">
    <div class="tabs-tab" id='elements'>

<div id="take-a-payment-demo" class="connect-direct-charge">
  <div class="sr-sample ">
    <div class="sr-header completed hidden"><h3>Payment completed</h3><div><button class="sr-pill" id="restart-btn">Restart demo</button></div></div>
    <div class="sr-header sample"><h4>What you're building</h4>
        <div>
          <button class="sr-pill" id="github-btn">Clone from GitHub</button>
          <button class="sr-pill" id="cli-btn">Clone with CLI</button>
        </div>
    </div>
    <div class="sr-root ">
      <div class="sr-main">
        <div class="sr-payment-form">
          <div class="sr-combo-inputs-row">
            <div class="sr-input sr-card-element" id="card-element"></div>
          </div>
          <div class="sr-field-error" id="card-errors" role="alert"></div>
          <button class="submit" id="submit">
            <div class="spinner hidden" id="spinner"></div>
            <span id="button-text">Pay Now</span><span id="order-amount"></span>
          </button>
          <button class="sr-pill fill-card" disabled><i></i><span>Prefill card details</span></button>
        </div>
        <div class="sr-result hidden">
          <p>
            Success! Here's the <code>PaymentIntent</code> that was returned by the Stripe API.
            The <code>status</code> of <code>succeeded</code> indicates that the payment was completed successfully.
          </p>
          <pre class="language-javascript"><code class="language-javascript"></code></pre>
        </div>
      </div>
    </div>
  </div>
  <div class="sr-clone cli hidden">
    <button class="close-sample-btn"></button>
    <p>Install the <a href="../stripe-cli.html#install">Stripe CLI</a>, then run the following in your terminal:</p>
    <div class="sr-terminal"><div>$</div>
      <div>stripe samples create connect-direct-charge</div>
    </div>
    <p class="sr-subtext">Contains examples in PHP, Node.js, Ruby, Java, Python. The sample will be configured with your Stripe test key if you have set up the CLI with your Stripe account</p>
  </div>
  <div class="sr-clone github hidden">
    <button class="close-sample-btn"></button>
    <p>We have a set of samples on <a href="https://github.com/stripe-samples">GitHub</a> to help you get started.</p>
    <div class="sr-terminal"><div>$</div>
      <div>git clone https://github.com/stripe-samples/connect-direct-charge</div>
    </div>
    <p class="sr-subtext">Contains examples in PHP, Node.js, Ruby, Java, Python.</p>
  </div>
</div>



<h3>
<span class="step">Step 3.1: </span>Create a PaymentIntent
<span class="tag optional">Server-side</span>
</h3>  <p>Stripe uses a <a href="../api/payment_intents.html">PaymentIntent</a> object to represent your intent to collect payment
from a customer, tracking charge attempts and payment state changes throughout
the process.</p>

<p>Create a PaymentIntent on your server with an amount and currency. Always decide
how much to charge on the server side, a trusted environment, as opposed to the
client. This prevents malicious customers from being able to choose their own
prices.</p>



<div class="tabs tabs-code animated" data-callback="codeTabsChanged"  data-platform=server>
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="curl" class="selected">curl</a>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="java">Java</a>
<a data-language="node">Node</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="curl">
  <pre class="language-curl numbered selected" ><div class="file-content-wrapper"><code>curl https://api.stripe.com/v1/payment_intents \
  -u sk_test_4eC39HqLyjWDarjtT1zdp7dc: \
  -d &quot;payment_method_types[]&quot;=card \
  -d amount=1000 \
  -d currency=usd \
  -d application_fee_amount=123 \
  -H &quot;Stripe-Account: {{CONNECTED_STRIPE_ACCOUNT_ID}}&quot;
</code></div></pre>

</div>
<div class="code" data-language="ruby">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/server/ruby/server.rb#L39-L53" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-ruby numbered" ><div class="file-content-wrapper"><code># Set your secret key. Remember to switch to your live secret key in production!
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;

payment_intent = Stripe::PaymentIntent.create({
  payment_method_types: [&#39;card&#39;],
  amount: 1000,
  currency: &#39;usd&#39;,
  application_fee_amount: 123,
}, stripe_account: &#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;)
</code></div></pre>

</div>
<div class="code" data-language="python">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/server/python/server.py#L48-L65" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-python numbered" ><div class="file-content-wrapper"><code># Set your secret key. Remember to switch to your live secret key in production!
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;

payment_intent = stripe.PaymentIntent.create(
  payment_method_types=[&#39;card&#39;],
  amount=1000,
  currency=&#39;usd&#39;,
  application_fee_amount=123,
  stripe_account=&#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;,
)
</code></div></pre>

</div>
<div class="code" data-language="php">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/server/php/index.php#L41-L55" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-php numbered" ><div class="file-content-wrapper"><code>// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;);

$payment_intent = \Stripe\PaymentIntent::create([
  &#39;payment_method_types&#39; =&gt; [&#39;card&#39;],
  &#39;amount&#39; =&gt; 1000,
  &#39;currency&#39; =&gt; &#39;usd&#39;,
  &#39;application_fee_amount&#39; =&gt; 123,
], [&#39;stripe_account&#39; =&gt; &#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;]);
</code></div></pre>

</div>
<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/server/java/src/main/java/com/stripe/sample/Server.java#L91-L109" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-java numbered" ><div class="file-content-wrapper"><code>// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.apiKey = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;;

ArrayList paymentMethodTypes = new ArrayList();
paymentMethodTypes.add(&quot;card&quot;);

Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();
params.put(&quot;payment_method_types&quot;, paymentMethodTypes);
params.put(&quot;amount&quot;, 1000);
params.put(&quot;currency&quot;, &quot;usd&quot;);
params.put(&quot;application_fee_amount&quot;, 123);

RequestOptions requestOptions = RequestOptions.builder().setStripeAccount({{CONNECTED_STRIPE_ACCOUNT_ID}}).build();
PaymentIntent paymentIntent = PaymentIntent.create(params, requestOptions);
</code></div></pre>

</div>
<div class="code" data-language="node">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/server/node/server.js#L42-L65" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
const stripe = require(&#39;stripe&#39;)(&#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;);

const paymentIntent = await stripe.paymentIntents.create({
  payment_method_types: [&#39;card&#39;],
  amount: 1000,
  currency: &#39;usd&#39;,
  application_fee_amount: 123,
}, {
  stripeAccount: &#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;,
});
</code></div></pre>

</div>
<div class="code" data-language="go">
  <pre class="language-go numbered" ><div class="file-content-wrapper"><code>// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.Key = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;

params := &amp;stripe.PaymentIntentParams{
  PaymentMethodTypes: stripe.StringSlice([]string{
    &quot;card&quot;,
  }),
  Amount: stripe.Int64(1000),
  Currency: stripe.String(string(stripe.CurrencyUSD)),
  ApplicationFeeAmount: stripe.Int64(123),
}
params.SetStripeAccount(&quot;{{CONNECTED_STRIPE_ACCOUNT_ID}}&quot;)
pi, _ := paymentintent.New(params)
</code></div></pre>

</div>
<div class="code" data-language="dotnet">
  <pre class="language-dotnet numbered" ><div class="file-content-wrapper"><code>// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
StripeConfiguration.ApiKey = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;;

var service = new PaymentIntentService();
var createOptions = new PaymentIntentCreateOptions
{
  PaymentMethodTypes = new List&lt;string&gt;
  {
    &quot;card&quot;,
  },
  Amount = 2000,
  Currency = &quot;usd&quot;,
  ApplicationFeeAmount = 123,
};

var requestOptions = new RequestOptions();
requestOptions.StripeAccount = &quot;{{CONNECTED_STRIPE_ACCOUNT_ID}}&quot;;
service.Create(createOptions, requestOptions);
</code></div></pre>

</div>

</div>
</div>
  <p>In our store builder example, we want to build an experience where customers pay businesses directly. To set this experience up:</p>

<ul>
  <li>Indicate a purchase from the business is a direct charge with the <code>Stripe-Account</code> header.</li>
  <li>Specify how much of the purchase from the business will go to the platform with <code>application_fee_amount</code>.</li>
</ul>

<p>When a sale occurs, Stripe transfers the <code>application_fee_amount</code> from the connected account to the platform and deducts the Stripe fee from the connected account’s share. An illustration of this funds flow is below:</p>

<p><a href="../../img/docs/connect/direct_charges.svg" class="zoomable">
  <img width="100%" src="../../img/docs/connect/direct_charges.svg" />
</a></p>



<p>Included in the returned PaymentIntent is a <span class="tooltip-wrapper"><span class="tooltip-content definition"><a href="../api/payment_intents/object.html#payment_intent_object-client_secret">client secret</a></span><template class="tooltip"><span class="definition">The <em>client secret</em> is a unique key returned from Stripe as part of a PaymentIntent. This string lets the client access important fields from the PaymentIntent (e.g., <code>status</code>) while hiding sensitive ones (e.g., <code>amount</code>).</span></template></span>, which is used on the client side to securely complete the payment process instead of passing the entire PaymentIntent object. There are different approaches that you can use to pass the client secret to the client side.</p>


<div class='tabs tabs-regular  animated' >
    
      <nav class="nav-tabs">
      
        <a>Single-page application</a>
        <a>Server-side rendering</a>
  </nav>
  <div class="tabs-content">
    <div class="tabs-tab"><p>You can retrieve the client secret from an endpoint on your server using the browser’s <code>fetch</code> function on the client side. This approach is generally most suitable when your client side is a single-page application, particularly one built with a modern frontend framework such as React. This example shows how to create the server endpoint that serves the client secret:</p>    
<div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="java">Java</a>
<a data-language="node">Node</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">

<div class="code" data-language="ruby">
  <nav class="nav-filename icon-file">
<span>
main.rb
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-ruby numbered" ><div class="file-content-wrapper"><code>get &#39;/secret&#39; do
  intent = # ... Create or retrieve the PaymentIntent
  {client_secret: intent.client_secret}.to_json
end</code></div></pre>

</div>

<div class="code" data-language="python">
  <nav class="nav-filename icon-file">
<span>
app.py
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-python numbered" ><div class="file-content-wrapper"><code>from flask import jsonify

@app.route(&#39;/secret&#39;)
def secret():
  intent = # ... Create or retrieve the PaymentIntent
  return jsonify(client_secret=intent.client_secret)</code></div></pre>

</div>

<div class="code" data-language="php">
  <nav class="nav-filename icon-file">
<span>
secret.php
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-php numbered" ><div class="file-content-wrapper"><code>&lt;?php
    $intent = # ... Create or retrieve the PaymentIntent
    echo json_encode(array(&#39;client_secret&#39; =&gt; $intent-&gt;client_secret));
?&gt;</code></div></pre>

</div>

<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
app.java
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-java numbered" ><div class="file-content-wrapper"><code>import java.util.HashMap;
import java.util.Map;

import com.stripe.model.PaymentIntent;

import com.google.gson.Gson;

import static spark.Spark.get;

public class StripeJavaQuickStart {
    public static void main(String[] args) {
      Gson gson = new Gson();

      get(&quot;/secret&quot;, (request, response) -&gt; {
        PaymentIntent intent = // ... Fetch or create the PaymentIntent

        Map&lt;String, String&gt; map = new HashMap();
        map.put(&quot;client_secret&quot;, intent.getClientSecret());

        return map;
      }, gson::toJson);
    }
}</code></div></pre>

</div>

<div class="code" data-language="node">
  <nav class="nav-filename icon-file">
<span>
app.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>const express = require(&#39;express&#39;);
const app = express();

app.get(&#39;/secret&#39;, async (req, res) =&gt; {
  const intent = // ... Fetch or create the PaymentIntent
  res.json({client_secret: intent.client_secret});
});

app.listen(3000, () =&gt; {
  console.log(&#39;Running on port 3000&#39;);
});</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-file">
<span>
app.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-go numbered" ><div class="file-content-wrapper"><code>package main

import (
  &quot;encoding/json&quot;
  &quot;net/http&quot;

  stripe &quot;github.com/stripe/stripe-go/v71&quot;
)

type CheckoutData struct {
  ClientSecret string `json:&quot;client_secret&quot;`
}

func main() {
  http.HandleFunc(&quot;/secret&quot;, func(w http.ResponseWriter, r *http.Request) {
    intent := // ... Fetch or create the PaymentIntent
    data := CheckoutData{
      ClientSecret: intent.ClientSecret,
    }
    w.Header().Set(&quot;Content-Type&quot;, &quot;application/json&quot;)
    w.WriteHeader(http.StatusOK)
    json.NewEncoder(w).Encode(data)
  })

  http.ListenAndServe(&quot;:3000&quot;, nil)
}</code></div></pre>

</div>

<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-file">
<span>
Controllers/CheckoutApiController.cs
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-dotnet numbered" ><div class="file-content-wrapper"><code>using System;
using Microsoft.AspNetCore.Mvc;
using Stripe;

namespace StripeExampleApi.Controllers
{
    [Route(&quot;secret&quot;)]
    [ApiController]
    public class CheckoutApiController : Controller
    {
        [HttpGet]
        public ActionResult Get()
        {
            var intent = // ... Fetch or create the PaymentIntent
            return Json(new {client_secret = intent.ClientSecret});
        }
    }
}</code></div></pre>

</div>


</div>
</div>

<p>This example demonstrates how to fetch the client secret with JavaScript on the client side:</p>
<div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="javascript">JavaScript</a>
<a data-language="javascript_esnext">JavaScript (ESNext)</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="javascript">
  <pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>var response = fetch(&#39;/secret&#39;).then(function(response) {
  return response.json();
}).then(function(responseJson) {
  var clientSecret = responseJson.client_secret;
  // Call stripe.confirmCardPayment() with the client secret.
});</code></div></pre>

</div>
<div class="code" data-language="javascript_esnext">
  <pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>(async () =&gt; {
  const response = await fetch(&#39;/secret&#39;);
  const {client_secret: clientSecret} = await response.json();
  // Call stripe.confirmCardPayment() with the client secret.
})();</code></div></pre>

</div>

</div>
</div>
</div><div class="tabs-tab"><p>If your application uses server-side rendering, you may wish to use your template framework to embed the client secret in the HTML output of your checkout page during rendering. You can embed it in a <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes">data attribute</a> or hidden HTML element and then extract it with JavaScript in order to use it to complete payment.</p>    
<div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="java">Java</a>
<a data-language="node">Node</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="ruby">
  <nav class="nav-filename icon-file">
<span>
views/checkout.erb
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-ruby numbered" ><div class="file-content-wrapper"><code>&lt;input id=&quot;card-name&quot; type=&quot;text&quot;&gt;
&lt;!-- placeholder for Elements --&gt;
&lt;div id=&quot;card-element&quot;&gt;&lt;/div&gt;
&lt;button id=&quot;card-button&quot; data-secret=&quot;&lt;%= @intent.client_secret %&gt;&quot;&gt;Submit Payment&lt;/button&gt;</code></div></pre>
<nav class="nav-filename icon-file">
<span>
main.rb
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-ruby numbered" ><div class="file-content-wrapper"><code>get &#39;/checkout&#39; do
  @intent = # ... Fetch or create the PaymentIntent
  erb :checkout
end</code></div></pre>

</div>

<div class="code" data-language="python">
  <nav class="nav-filename icon-file">
<span>
checkout.html
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-python numbered" ><div class="file-content-wrapper"><code>&lt;input id=&quot;card-name&quot; type=&quot;text&quot;&gt;
&lt;!-- placeholder for Elements --&gt;
&lt;div id=&quot;card-element&quot;&gt;&lt;/div&gt;
&lt;button id=&quot;card-button&quot; data-secret=&quot;{{ client_secret }}&quot;&gt;
  Submit Payment
&lt;/button&gt;</code></div></pre>

<nav class="nav-filename icon-file">
<span>
app.py
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-python numbered" ><div class="file-content-wrapper"><code>@app.route(&#39;/checkout&#39;)
def checkout():
  intent = # ... Fetch or create the PaymentIntent
  return render_template(&#39;checkout.html&#39;, client_secret=intent.client_secret)</code></div></pre>

</div>

<div class="code" data-language="php">
  <nav class="nav-filename icon-file">
<span>
checkout.php
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-php numbered" ><div class="file-content-wrapper"><code>&lt;?php
    $intent = # ... Fetch or create the PaymentIntent;
?&gt;
...
&lt;input id=&quot;card-name&quot; type=&quot;text&quot;&gt;
&lt;!-- placeholder for Elements --&gt;
&lt;div id=&quot;card-element&quot;&gt;&lt;/div&gt;
&lt;button id=&quot;card-button&quot; data-secret=&quot;&lt;?= $intent-&gt;client_secret ?&gt;&quot;&gt;
    Submit Payment
&lt;/button&gt;
...</code></div></pre>

</div>

<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
resources/templates/checkout.hbs
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-java numbered" ><div class="file-content-wrapper"><code>&lt;input id=&quot;card-name&quot; type=&quot;text&quot;&gt;
&lt;!-- placeholder for Elements --&gt;
&lt;div id=&quot;card-element&quot;&gt;&lt;/div&gt;
&lt;button id=&quot;card-button&quot; data-secret=&quot;{{ client_secret }}&quot;&gt;
  Submit Payment
&lt;/button&gt;</code></div></pre>

<nav class="nav-filename icon-file">
<span>
main.java
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-java numbered" ><div class="file-content-wrapper"><code>import java.util.HashMap;
import java.util.Map;

import com.stripe.model.PaymentIntent;

import spark.ModelAndView;

import static spark.Spark.get;

public class StripeJavaQuickStart {
    public static void main(String[] args) {
        get(&quot;/checkout&quot;, (request, response) -&gt; {
          PaymentIntent intent = // ... Fetch or create the PaymentIntent

          Map map = new HashMap();
          map.put(&quot;client_secret&quot;, intent.getClientSecret());

          return new ModelAndView(map, &quot;checkout.hbs&quot;);
        }, new HandlebarsTemplateEngine());
    }
}</code></div></pre>

</div>

<div class="code" data-language="node">
  <nav class="nav-filename icon-file">
<span>
views/checkout.hbs
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>&lt;input id=&quot;card-name&quot; type=&quot;text&quot;&gt;
&lt;!-- placeholder for Elements --&gt;
&lt;div id=&quot;card-element&quot;&gt;&lt;/div&gt;
&lt;button id=&quot;card-button&quot; data-secret=&quot;{{ client_secret }}&quot;&gt;
  Submit Payment
&lt;/button&gt;</code></div></pre>

<nav class="nav-filename icon-file">
<span>
app.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>const express = require(&#39;express&#39;);
const expressHandlebars = require(&#39;express-handlebars&#39;);
const app = express();

app.engine(&#39;.hbs&#39;, expressHandlebars({ extname: &#39;.hbs&#39; }));
app.set(&#39;view engine&#39;, &#39;.hbs&#39;);
app.set(&#39;views&#39;, &#39;./views&#39;);

app.get(&#39;/checkout&#39;, async (req, res) =&gt; {
  const intent = // ... Fetch or create the PaymentIntent
  res.render(&#39;checkout&#39;, { client_secret: intent.client_secret });
});

app.listen(3000, () =&gt; {
  console.log(&#39;Running on port 3000&#39;);
});</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-file">
<span>
views/checkout.html
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-go numbered" ><div class="file-content-wrapper"><code>&lt;input id=&quot;card-name&quot; type=&quot;text&quot;&gt;
&lt;!-- placeholder for Elements --&gt;
&lt;div id=&quot;card-element&quot;&gt;&lt;/div&gt;
&lt;button id=&quot;card-button&quot; data-secret=&quot;{{ .ClientSecret }}&quot;&gt;
  Submit Payment
&lt;/button&gt;</code></div></pre>

<nav class="nav-filename icon-file">
<span>
app.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-go numbered" ><div class="file-content-wrapper"><code>package main

import (
  &quot;html/template&quot;
  &quot;net/http&quot;

  stripe &quot;github.com/stripe/stripe-go/v71&quot;
)

type CheckoutData struct {
  ClientSecret string
}

func main() {
  checkoutTmpl := template.Must(template.ParseFiles(&quot;views/checkout.html&quot;))

  http.HandleFunc(&quot;/checkout&quot;, func(w http.ResponseWriter, r *http.Request) {
    intent := // ... Fetch or create the PaymentIntent
    data := CheckoutData{
      ClientSecret: intent.ClientSecret,
    }
    checkoutTmpl.Execute(w, data)
  })

  http.ListenAndServe(&quot;:3000&quot;, nil)
}</code></div></pre>

</div>

<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-file">
<span>
Views/Checkout/Index.cshtml
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-dotnet numbered" ><div class="file-content-wrapper"><code>&lt;input id=&quot;card-name&quot; type=&quot;text&quot;&gt;
&lt;!-- placeholder for Elements --&gt;
&lt;div id=&quot;card-element&quot;&gt;&lt;/div&gt;
&lt;button id=&quot;card-button&quot; data-secret=&quot;@ViewData[&quot;ClientSecret&quot;]&quot;&gt;
  Submit Payment
&lt;/button&gt;</code></div></pre>

<nav class="nav-filename icon-file">
<span>
Controllers/CheckoutController.cs
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-dotnet numbered" ><div class="file-content-wrapper"><code>using System;
using Microsoft.AspNetCore.Mvc;
using Stripe;

namespace StripeExampleApi.Controllers
{
    [Route(&quot;/[controller]&quot;)]
    public class CheckoutController : Controller
    {
        public IActionResult Index()
        {
          var intent = // ... Fetch or create the PaymentIntent
          ViewData[&quot;ClientSecret&quot;] = intent.ClientSecret;
          return View();
        }
    }
}</code></div></pre>

</div>

</div>
</div>
</div>
  </div>
</div>

<h3>
<span class="step">Step 3.2: </span>Collect card details
<span class="tag optional">Client-side</span>
</h3>  <p>You’re ready to collect card
information on the client with <a href="../stripe-js.html">Stripe Elements</a>. Elements is a set of prebuilt UI
components for collecting and validating card number, ZIP code,
and expiration date.</p>

<p>A Stripe Element contains an iframe that securely sends the payment information to Stripe over a HTTPS connection. The checkout page address must also start with https:// rather than http:// for your integration to work.</p>

<p>You can test your integration without using HTTPS. <a href="../security.html#tls">Enable it</a> when you’re ready to accept live payments. </p>

<h4 id="set-up-stripe-elements">Set up Stripe Elements</h4>
<span id="html"></span>
<span id="react"></span>


<div class='tabs tabs-regular  animated persists syncs' data-callback='integrationChanged' data-group='html-or-react'>
    
      <nav class="nav-tabs">
      
        <a>HTML + JS</a>
        <a>React</a>
  </nav>
  <div class="tabs-content">
    
<div class="tabs-tab" id='html'><p>Stripe Elements is automatically available as a feature of Stripe.js. Include the Stripe.js script on your checkout page by adding it to the <code>head</code> of your HTML file. Always load Stripe.js directly from js.stripe.com to remain PCI compliant. Do not include the script in a bundle or host a copy of it yourself.</p>
<div class="code" data-language="html">
  <nav class="nav-filename icon-file">
<span>
checkout.html
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-html numbered" ><div class="file-content-wrapper"><code>&lt;head&gt;
  &lt;title&gt;Checkout&lt;/title&gt;
  &lt;script src=&quot;https://js.stripe.com/v3/&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
</code></div></pre>

</div>

<p>Create an instance of Elements with the following JavaScript on your checkout page:</p>
<div class="code" data-language="javascript">
  <nav class="nav-filename icon-file">
<span>
script.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>// Initialize Stripe.js with the same connected account ID used when creating
// the PaymentIntent.
var stripe = Stripe(&#39;pk_test_TYooMQauvdEDq54NiTphI7jx&#39;, {
  stripeAccount: &#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;
});
</code></div></pre>

</div>

<h4 id="add-elements-to-your-payment-page">Add Elements to your payment page</h4>

<p>Elements needs a place to live in your payment form. Create empty DOM
nodes (containers) with unique IDs in your payment form and then pass those
IDs to Elements.</p>
<div class="code" data-language="html">
  <nav class="nav-filename icon-file">
<span>
checkout.html
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/client/index.html#L42-L58" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-html numbered" ><div class="file-content-wrapper"><code>&lt;form id=&quot;payment-form&quot;&gt;
  &lt;div id=&quot;card-element&quot;&gt;
    &lt;!-- Elements will create input elements here --&gt;
  &lt;/div&gt;

  &lt;!-- We&#39;ll put the error messages in this element --&gt;
  &lt;div id=&quot;card-errors&quot; role=&quot;alert&quot;&gt;&lt;/div&gt;

  &lt;button id=&quot;submit&quot;&gt;Pay&lt;/button&gt;
&lt;/form&gt;
</code></div></pre>

</div>

<p>When the form above has loaded, <a href="../stripe-js/reference.html#elements-create">create an instance</a> of an Element and mount it to the Element container:</p>
<div class="code" data-language="javascript">
  <nav class="nav-filename icon-file">
<span>
client.js
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/client/script.js#L13-L43" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>// Set up Stripe.js and Elements to use in checkout form
var style = {
  base: {
    color: &quot;#32325d&quot;,
  }
};

var card = elements.create(&quot;card&quot;, { style: style });
card.mount(&quot;#card-element&quot;);
</code></div></pre>

</div>

<aside class="note">
  <h3>More examples</h3>
  <p>See <a href="https://stripe.com/payments/elements/examples">additional payment forms</a> created with Elements on GitHub.</p>
</aside>

<p>The <code>card</code> Element simplifies the form and minimizes the number of required fields by inserting a single, flexible input field that securely collects all necessary card and billing details.
Otherwise, combine <code>cardNumber</code>, <code>cardExpiry</code>, and <code>cardCvc</code> Elements for a flexible, multi-input card form.</p>

<aside class="important info">
  <p>Always collect a postal code to increase card acceptance rates and reduce fraud.</p>

  <p>The single input <code>card</code> Element automatically collects and sends the customer’s postal code to Stripe.
If you build your payment form with multi-input card Elements (<code>cardNumber</code>, <code>cardExpiry</code>, <code>cardCvc</code>), add a separate input field for the customer’s postal code. </p>
</aside>

<p>For a full list of supported Element types, refer to our <a href="../stripe-js/reference.html#element-types">Stripe.js reference</a> documentation.</p>

<p>Elements validates user input as it is typed. To help your customers catch mistakes, listen to <code>change</code> events on the <code>card</code> Element and display any errors:</p><div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="javascript_esnext">JavaScript (ESNext)</a>
<a data-language="javascript">JavaScript</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="javascript_esnext">
  <pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>card.on(&#39;change&#39;, ({error}) =&gt; {
  const displayError = document.getElementById(&#39;card-errors&#39;);
  if (error) {
    displayError.textContent = error.message;
  } else {
    displayError.textContent = &#39;&#39;;
  }
});</code></div></pre>

</div>

  <div class="code" data-language="javascript">
  <pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>cardElement.on(&#39;change&#39;, function(event) {
  var displayError = document.getElementById(&#39;card-errors&#39;);
  if (event.error) {
    displayError.textContent = event.error.message;
  } else {
    displayError.textContent = &#39;&#39;;
  }
});
</code></div></pre>

</div>


</div>
</div>
<p><a href="../stripe-js/reference.html#postal-code-formatting">Postal code validation</a> depends on your customer’s billing country. Use our <a href="../testing.html#international-cards">international test cards</a> to experiment with other postal code formats.</p>
</div>
<div class="tabs-tab" id='react'>  

<div class='tabs tabs-regular  animated' >
    
      <nav class="nav-tabs">
      
        <a>npm</a>
        <a>umd</a>
  </nav>
  <div class="tabs-content">
    <div class="tabs-tab" id='npm'><p>Install React Stripe.js and the Stripe.js loader from the <a href="https://www.npmjs.com/package/@stripe/react-stripe-js">npm public registry</a>.</p><div class="code" data-language="html">
  <nav class="nav-filename icon-terminal">
<span>
Terminal
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-html numbered" ><div class="file-content-wrapper"><code>npm install --save @stripe/react-stripe-js @stripe/stripe-js</code></div></pre>

</div>
</div><div class="tabs-tab" id='umd'><p>We also provide a UMD build for sites that are not using npm or modules.</p>

<p>Include the Stripe.js script which exports a global <code>Stripe</code> function and the UMD build of React Stripe.js which exports a global <code>ReactStripe</code> object. Always load the Stripe.js script directly from <strong>js.stripe.com</strong> to remain PCI compliant. Do not include the script in a bundle or host a copy of it yourself.</p><div class="code" data-language="html">
  <pre class="language-html numbered" ><div class="file-content-wrapper"><code>&lt;!-- Stripe.js --&gt;
&lt;script src=&quot;https://js.stripe.com/v3/&quot;&gt;&lt;/script&gt;

&lt;!-- React Stripe.js development build --&gt;
&lt;script src=&quot;https://unpkg.com/@stripe/react-stripe-js@latest/dist/react-stripe.umd.js&quot;&gt;&lt;/script&gt;

&lt;!-- When you are ready to deploy your site to production, remove the
     above development script, and include the following production build. --&gt;
&lt;script src=&quot;https://unpkg.com/@stripe/react-stripe-js@latest/dist/react-stripe.umd.min.js&quot;&gt;&lt;/script&gt;</code></div></pre>

</div>
</div>
  </div>
</div>

<aside class="important neutral">
<p>If you are looking for a quick way to try out React Stripe.js without needing to scaffold a new project, start with this <a href="https://codesandbox.io/s/react-stripe-official-q1loc?fontsize=14&amp;hidenavigation=1&amp;theme=dark">demo in CodeSandbox</a>.</p></aside>




<h3 id="add-stripejs-and-elements-to-your-page">Add Stripe.js and Elements to your page</h3>

<p>To use Element components, wrap the root of your React app in an <a href="../stripe-js/react.html#elements-provider">Elements provider</a>. Call <code>loadStripe</code> with your publishable key and pass the returned <code>Promise</code> to the <code>Elements</code> provider.</p>
<div class="code" data-language="jsx">
  <nav class="nav-filename icon-file">
<span>
index.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-jsx numbered" ><div class="file-content-wrapper"><code>import React from &#39;react&#39;;
import ReactDOM from &#39;react-dom&#39;;
import {Elements} from &#39;@stripe/react-stripe-js&#39;;
import {loadStripe} from &#39;@stripe/stripe-js&#39;;

import CheckoutForm from &#39;./CheckoutForm&#39;;

// Make sure to call `loadStripe` outside of a component’s render to avoid
// recreating the `Stripe` object on every render.
// Call `loadStripe` with the same connected account ID used when creating
// the PaymentIntent.
const stripePromise = loadStripe(&quot;pk_test_TYooMQauvdEDq54NiTphI7jx&quot;,
  {stripeAccount: &quot;{{CONNECTED_STRIPE_ACCOUNT_ID}}&quot;});

function App() {
  return (
    &lt;Elements stripe={stripePromise}&gt;
      &lt;CheckoutForm /&gt;
    &lt;/Elements&gt;
  );
};

ReactDOM.render(&lt;App /&gt;, document.getElementById(&#39;root&#39;));
</code></div></pre>

</div>

  
<h3 id="add-and-configure-a-cardelement-component">Add and configure a <code>CardElement</code> component</h3>

<p>Use individual Element components, such as <code>CardElement</code>, to
build your form.</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="jsx">JSX</a>
<a data-language="css">CSS</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="jsx">
  <nav class="nav-filename icon-file">
<span>
CardSection.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-jsx numbered" ><div class="file-content-wrapper"><code>/**
* Use the CSS tab above to style your Element&#39;s container.
*/
import React from &#39;react&#39;;
import {CardElement} from &#39;@stripe/react-stripe-js&#39;;
import &#39;./CardSectionStyles.css&#39;

const CARD_ELEMENT_OPTIONS = {
  style: {
    base: {
      color: &quot;#32325d&quot;,
      fontFamily: &#39;&quot;Helvetica Neue&quot;, Helvetica, sans-serif&#39;,
      fontSmoothing: &quot;antialiased&quot;,
      fontSize: &quot;16px&quot;,
      &quot;::placeholder&quot;: {
        color: &quot;#aab7c4&quot;,
      },
    },
    invalid: {
      color: &quot;#fa755a&quot;,
      iconColor: &quot;#fa755a&quot;,
    },
  },
};

function CardSection() {
  return (
    &lt;label&gt;
      Card details
      &lt;CardElement options={CARD_ELEMENT_OPTIONS} /&gt;
    &lt;/label&gt;
  );
};

export default CardSection;
</code></div></pre>

</div>
<div class="code" data-language="css">
  <nav class="nav-filename icon-file">
<span>
CardSectionStyles.css
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-css numbered" ><div class="file-content-wrapper"><code>/**
* Shows how you can use CSS to style your Element&#39;s container.
* These classes are added to your Stripe Element by default.
* You can override these classNames by using the options passed
* to the CardElement component.
* https://stripe.com/docs/js/elements_object/create_element?type=card#elements_create-options-classes
*/

.StripeElement {
  height: 40px;
  padding: 10px 12px;
  width: 100%;
  color: #32325d;
  background-color: white;
  border: 1px solid transparent;
  border-radius: 4px;

  box-shadow: 0 1px 3px 0 #e6ebf1;
  -webkit-transition: box-shadow 150ms ease;
  transition: box-shadow 150ms ease;
}

.StripeElement--focus {
  box-shadow: 0 1px 3px 0 #cfd7df;
}

.StripeElement--invalid {
  border-color: #fa755a;
}

.StripeElement--webkit-autofill {
  background-color: #fefde5 !important;
}
</code></div></pre>

</div>

</div>
</div>

<p>Elements are completely customizable. You can <a href="../js/elements_object/create_element%3Ftype=card.html#elements_create-options">style Elements</a> to match the look and feel of your site,
providing a seamless checkout experience for your customers.
It’s also possible to style various input states, for example when the Element has focus.</p>

<p>The <code>CardElement</code> simplifies the form and minimizes the number of required fields by inserting a single, flexible input field that securely collects all necessary card and billing details.
Otherwise, combine <code>CardNumberElement</code>, <code>CardExpiryElement</code>, and <code>CardCvcElement</code> elements for a flexible, multi-input card form.</p>

<aside class="important info">
  <p>Always collect a postal code to increase card acceptance rates and reduce fraud.</p>

  <p>The single input <code>CardElement</code> automatically collects and sends the customer’s postal code to Stripe.
If you build your payment form with multi-input card Elements, add a separate <code>&lt;input&gt;</code> field for the customer’s postal code.</p>
</aside>
</div>


  </div>
</div>


<h3>
<span class="step">Step 3.3: </span>Submit the payment to Stripe
<span class="tag optional">Client-side</span>
</h3>  
<p>Rather than sending the entire PaymentIntent object to the client, use its <a href="../api/payment_intents/object.html#payment_intent_object-client_secret">client secret</a> from <a href="enable-payment-acceptance-guide.html#step-31-create-a-paymentintentserver-side">Step 3.1</a>. This is different from your API keys that authenticate Stripe API requests.</p>

<p>The client secret should still be handled carefully because it can complete the charge. Do not log it, embed it in URLs, or expose it to anyone but the customer.</p><span id="html"></span>
<span id="react"></span>

<div class='tabs tabs-regular  animated persists syncs' data-callback='integrationChanged' data-group='html-or-react'>
    
      <nav class="nav-tabs">
      
        <a>HTML + JS</a>
        <a>React</a>
  </nav>
  <div class="tabs-content">
    <div class="tabs-tab" id='html'>
<p>To complete the payment when the user clicks, retrieve the client secret from the PaymentIntent you created in step 3.1 and call <a href="../stripe-js/reference.html#stripe-confirm-card-payment">stripe.confirmCardPayment</a> with the client secret.</p>

<p>Pass additional billing details, such as the cardholder name and address, to the <code>billing_details</code> hash. The <code>card</code> Element automatically sends the customer’s postal code information. However, combining <code>cardNumber</code>, <code>cardCvc</code>, and <code>cardExpiry</code> Elements requires you to pass the postal code to <code>billing_details[address][postal_code]</code>.</p><div class="code" data-language="javascript">
  <nav class="nav-filename icon-file">
<span>
client.js
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/client/script.js#L46-L70" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>var form = document.getElementById(&#39;payment-form&#39;);

form.addEventListener(&#39;submit&#39;, function(ev) {
  ev.preventDefault();
  stripe.confirmCardPayment(clientSecret, {
    payment_method: {
      card: card,
      billing_details: {
        name: &#39;Jenny Rosen&#39;
      }
    }
  }).then(function(result) {
    if (result.error) {
      // Show error to your customer (e.g., insufficient funds)
      console.log(result.error.message);
    } else {
      // The payment has been processed!
      if (result.paymentIntent.status === &#39;succeeded&#39;) {
        // Show a success message to your customer
        // There&#39;s a risk of the customer closing the window before callback
        // execution. Set up a webhook or plugin to listen for the
        // payment_intent.succeeded event that handles any business critical
        // post-payment actions.
      }
    }
  });
});
</code></div></pre>

</div>

<aside class="important neutral">
  <p><code>stripe.confirmCardPayment</code> may take several seconds to complete. During that time, disable your form from being resubmitted and show a waiting indicator like a spinner. If you receive an error, show it to the customer, re-enable the form, and hide the waiting indicator.</p>
</aside>

<p>If the customer must authenticate the card, Stripe.js walks them through that process by showing them a modal. You can see an example of this modal experience by using the test card number <code>4000 0025 0000 3155</code> with any CVC, future expiration date, and postal code in the <a href="enable-payment-acceptance-guide.html#demo">demo</a> at the top of the page.</p>

<p>When the payment completes successfully, the value of the returned PaymentIntent’s <code>status</code> property is succeeded. Check the status of a PaymentIntent in the <a href="https://dashboard.stripe.com/test/payments">Dashboard</a> or by inspecting the status property on the object. If the payment is not successful, inspect the returned <code>error</code> to determine the cause.</p></div>
<div class="tabs-tab" id='react'><p>To complete the payment when the user clicks, retrieve the client secret from the PaymentIntent you created in step two and call <a href="../stripe-js/reference.html#stripe-confirm-card-payment">stripe.confirmCardPayment</a> with the client secret and the Element. Pass additional billing details, such as the cardholder name and address, to the <code>billing_details</code> hash.</p>


<p>To call <code>stripe.confirmCardPayment</code> from your payment form component, use the <a href="../stripe-js/react.html#usestripe-hook">useStripe</a> and <a href="../stripe-js/react.html#useelements-hook">useElements</a> hooks.</p>

<p>If you prefer traditional class components over hooks, you can instead use an <a href="../stripe-js/react.html#elements-consumer">ElementsConsumer</a>.</p>

<div class='tabs tabs-regular  animated persists' >
    
      <nav class="nav-tabs">
      
        <a>Hooks</a>
        <a>Class Components</a>
  </nav>
  <div class="tabs-content">
    <div class="tabs-tab" id='hooks'><div class="code" data-language="jsx">
  <nav class="nav-filename icon-file">
<span>
CheckoutForm.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-jsx numbered" ><div class="file-content-wrapper"><code>import React from &#39;react&#39;;
import {useStripe, useElements, CardElement} from &#39;@stripe/react-stripe-js&#39;;

import CardSection from &#39;./CardSection&#39;;

export default function CheckoutForm() {
  const stripe = useStripe();
  const elements = useElements();

  const handleSubmit = async (event) =&gt; {
    // We don&#39;t want to let default form submission happen here,
    // which would refresh the page.
    event.preventDefault();

    if (!stripe || !elements) {
      // Stripe.js has not yet loaded.
      // Make sure to disable form submission until Stripe.js has loaded.
      return;
    }

    const result = await stripe.confirmCardPayment(&#39;{CLIENT_SECRET}&#39;, {
      payment_method: {
        card: elements.getElement(CardElement),
        billing_details: {
          name: &#39;Jenny Rosen&#39;,
        },
      }
    });

    if (result.error) {
      // Show error to your customer (e.g., insufficient funds)
      console.log(result.error.message);
    } else {
      // The payment has been processed!
      if (result.paymentIntent.status === &#39;succeeded&#39;) {
        // Show a success message to your customer
        // There&#39;s a risk of the customer closing the window before callback
        // execution. Set up a webhook or plugin to listen for the
        // payment_intent.succeeded event that handles any business critical
        // post-payment actions.
      }
    }
  };

  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;CardSection /&gt;
      &lt;button disabled={!stripe}&gt;Confirm order&lt;/button&gt;
    &lt;/form&gt;
  );
}
</code></div></pre>

</div>
</div><div class="tabs-tab" id='class-components'><div class="code" data-language="jsx">
  <nav class="nav-filename icon-file">
<span>
CheckoutForm.js
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-jsx numbered" ><div class="file-content-wrapper"><code>import React from &#39;react&#39;;
import {ElementsConsumer, CardElement} from &#39;@stripe/react-stripe-js&#39;;

import CardSection from &#39;./CardSection&#39;;

class CheckoutForm extends React.Component {
  handleSubmit = async (event) =&gt; {
    // We don&#39;t want to let default form submission happen here,
    // which would refresh the page.
    event.preventDefault();

    const {stripe, elements} = this.props

    if (!stripe || !elements) {
      // Stripe.js has not yet loaded.
      // Make  sure to disable form submission until Stripe.js has loaded.
      return;
    }

    const result = await stripe.confirmCardPayment(&#39;{CLIENT_SECRET}&#39;, {
      payment_method: {
        card: elements.getElement(CardElement),
        billing_details: {
          name: &#39;Jenny Rosen&#39;,
        },
      }
    });

    if (result.error) {
      // Show error to your customer (e.g., insufficient funds)
      console.log(result.error.message);
    } else {
      // The payment has been processed!
      if (result.paymentIntent.status === &#39;succeeded&#39;) {
        // Show a success message to your customer
        // There&#39;s a risk of the customer closing the window before callback
        // execution. Set up a webhook or plugin to listen for the
        // payment_intent.succeeded event that handles any business critical
        // post-payment actions.
      }
    }
  };

  render() {
    return (
      &lt;form onSubmit={this.handleSubmit}&gt;
        &lt;CardSection /&gt;
        &lt;button disabled={!this.props.stripe}&gt;Confirm order&lt;/button&gt;
      &lt;/form&gt;
    );
  }
}

export default function InjectedCheckoutForm() {
  return (
    &lt;ElementsConsumer&gt;
      {({stripe, elements}) =&gt; (
        &lt;CheckoutForm  stripe={stripe} elements={elements} /&gt;
      )}
    &lt;/ElementsConsumer&gt;
  );
}
</code></div></pre>

</div>
</div>
  </div>
</div>


<aside class="important check">
  <p><code>stripe.confirmCardPayment</code> may take several seconds to complete. During that time, disable your form from being resubmitted and show a waiting indicator like a spinner. If you receive an error, show it to the customer, re-enable the form, and hide the waiting indicator.</p>
</aside>

<p>If the customer must authenticate the card, Stripe.js walks them through that process by showing them a modal. You can see an example of this modal experience by using the test card number <code>4000 0025 0000 3155</code> with any CVC, future expiration date, and postal code in the <a href="enable-payment-acceptance-guide.html#demo">demo</a> at the top of the page.</p>

<p>When the payment completes successfully, the value of the returned PaymentIntent’s <code>status</code> property is succeeded. Check the status of a PaymentIntent in the <a href="https://dashboard.stripe.com/test/payments">Dashboard</a> or by inspecting the status property on the object. If the payment is not successful, inspect the returned <code>error</code> to determine the cause.</p></div>
  </div>
</div>


<h3>
<span class="step">Step 3.4: </span>Fulfillment
<span class="tag optional">Server-side</span>
</h3>  
<p>After payment is completed, you must handle any necessary fulfillment. For example, a store builder must alert the business to send the purchased item to the customer.</p>

<p>If you’re using Checkout, configure a webhook endpoint <a href="https://dashboard.stripe.com/account/webhooks">in your dashboard</a> (for events <em>from your Connect applications</em>).</p>

<p><a href="../../img/docs/connect/connect_webhooks.png" class="zoomable">
  <img width="100%" src="../../img/docs/connect/connect_webhooks.png" />
</a></p>

<p>Then create an HTTP endpoint on your server to monitor for completed payments to then enable your users (connected accounts) to fulfill purchases.</p>

  





<div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="node">Node</a>
<a data-language="java">Java</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">

<div class="code" data-language="ruby">
  <nav class="nav-filename icon-file">
<span>
server.rb
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/server/ruby/server.rb#L66-L99" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-ruby numbered highlighted-line" data-highlight-lines=21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41><div class="file-content-wrapper"><code># Using Sinatra.
require &#39;sinatra&#39;
require &#39;stripe&#39;

set :port, 4242

# Set your secret key. Remember to switch to your live secret key in production!
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;

# Uncomment and replace with a real secret. You can find your endpoint&#39;s
# secret in your webhook settings.
# webhook_secret = &#39;whsec_...&#39;

post &#39;/webhook&#39; do
  payload = request.body.read
  sig_header = request.env[&#39;HTTP_STRIPE_SIGNATURE&#39;]

  event = nil

  # Verify webhook signature and extract the event.
  # See https://stripe.com/docs/webhooks/signatures for more information.
  begin
    event = Stripe::Webhook.construct_event(
      payload, sig_header, webhook_secret
    )
  rescue JSON::ParserError =&gt; e
    # Invalid payload.
    status 400
    return
  rescue Stripe::SignatureVerificationError =&gt; e
    # Invalid Signature.
    status 400
    return
  end

  if event[&#39;type&#39;] == &#39;payment_intent.succeeded&#39;
    payment_intent = event[&#39;data&#39;][&#39;object&#39;]
    connected_account_id = event[&#39;account&#39;]
    handle_successful_payment_intent(connected_account_id, payment_intent)
  end

  status 200
end

def handle_successful_payment_intent(connected_account_id, payment_intent)
  # Fulfill the purchase.
  puts &#39;Connected account ID: &#39; + connected_account_id
  puts &#39;PaymentIntent: &#39; + payment_intent.to_s
end</code></div></pre>

</div>

<div class="code" data-language="python">
  <nav class="nav-filename icon-file">
<span>
server.py
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/server/python/server.py#L81-L106" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-python numbered highlighted-line" data-highlight-lines=28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44><div class="file-content-wrapper"><code>import stripe
import json

# Using Flask.
from flask import (
    Flask,
    render_template,
    request,
    Response,
)

app = Flask(__name__, static_folder=&quot;.&quot;,
            static_url_path=&quot;&quot;, template_folder=&quot;.&quot;)

# Set your secret key. Remember to switch to your live secret key in production!
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;

# Uncomment and replace with a real secret. You can find your endpoint&#39;s
# secret in your webhook settings.
# webhook_secret = &#39;whsec_...&#39;

@app.route(&quot;/webhook&quot;, methods=[&quot;POST&quot;])
def webhook_received():
  request_data = json.loads(request.data)
  signature = request.headers.get(&quot;stripe-signature&quot;)

  # Verify webhook signature and extract the event.
  # See https://stripe.com/docs/webhooks/signatures for more information.
  try:
    event = stripe.Webhook.construct_event(
        payload=request.data, sig_header=signature, secret=webhook_secret
    )
  except ValueError as e:
    # Invalid payload.
    return Response(status=400)
  except stripe.error.SignatureVerificationError as e:
    # Invalid Signature.
    return Response(status=400)

  if event[&quot;type&quot;] == &quot;payment_intent.succeeded&quot;:
    payment_intent = event[&quot;data&quot;][&quot;object&quot;]
    connected_account_id = event[&quot;account&quot;]
    handle_successful_payment_intent(connected_account_id, payment_intent)

  return json.dumps({&quot;success&quot;: True}), 200

def handle_successful_payment_intent(connected_account_id, payment_intent):
  # Fulfill the purchase.
  print(&#39;Connected account ID: &#39; + connected_account_id)
  print(&#39;PaymentIntent: &#39; + str(payment_intent))

if __name__ == &quot;__main__&quot;:
  app.run(port=4242)</code></div></pre>

</div>

<div class="code" data-language="php">
  <nav class="nav-filename icon-file">
<span>
server.php
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/server/php/index.php#L71-L98" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-php numbered highlighted-line" data-highlight-lines=25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43><div class="file-content-wrapper"><code>&lt;?php
// Using Slim.
use Slim\Http\Request;
use Slim\Http\Response;
use Stripe\Stripe;

require_once(&#39;vendor/autoload.php&#39;);

$app = new \Slim\App;

// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;);

// Uncomment and replace with a real secret. You can find your endpoint&#39;s
// secret in your webhook settings.
// $webhook_secret = &#39;whsec_...&#39;;

$app-&gt;post(&#39;/webhook&#39;, function ($request, $response, $next) {
  $payload = $request-&gt;getBody();
  $sig_header = $request-&gt;getHeaderLine(&#39;stripe-signature&#39;);

  $event = null;

  // Verify webhook signature and extract the event.
  // See https://stripe.com/docs/webhooks/signatures for more information.
  try {
    $event = \Stripe\Webhook::constructEvent(
      $payload, $sig_header, $webhook_secret
    );
  } catch(\UnexpectedValueException $e) {
    // Invalid payload.
    return $response-&gt;withStatus(400);
  } catch(\Stripe\Exception\SignatureVerificationException $e) {
    // Invalid Signature.
    return $response-&gt;withStatus(400);
  }

  if ($event-&gt;type == &#39;payment_intent.succeeded&#39;) {
    $paymentIntent = $event-&gt;data-&gt;object;
    $connectedAccountId = $event-&gt;account;
    handleSuccessfulPaymentIntent($connectedAccountId, $paymentIntent);
  }

  return $response-&gt;withStatus(200);
});

function handleSuccessfulPaymentIntent($connectedAccountId, $paymentIntent) {
  // Fulfill the purchase.
  echo &#39;Connected account ID: &#39; . $connectedAccountId;
  echo &#39;PaymentIntent: &#39; . $paymentIntent;
};

$app-&gt;run();</code></div></pre>

</div>

<div class="code" data-language="node">
  <nav class="nav-filename icon-file">
<span>
server.js
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/server/node/server.js#L96-L116" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered highlighted-line" data-highlight-lines=29,30,31,32,33,34,35,36,37,38,39,40,41><div class="file-content-wrapper"><code>// Using Express
const express = require(&#39;express&#39;);
const bodyParser = require(&quot;body-parser&quot;);
const app = express();
app.use(express.json());

// Use JSON parser for all non-webhook routes
app.use((req, res, next) =&gt; {
  if (req.originalUrl === &quot;/webhook&quot;) {
    next();
  } else {
    bodyParser.json()(req, res, next);
  }
});

// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
const stripe = require(&#39;stripe&#39;)(&#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;);

// Uncomment and replace with a real secret. You can find your endpoint&#39;s
// secret in your webhook settings.
// const webhook_secret = &#39;whsec_...&#39;&#39;

app.post(&#39;/webhook&#39;, bodyParser.raw({type: &#39;application/json&#39;}), (request, response) =&gt; {
  const sig = request.headers[&#39;stripe-signature&#39;];

  let event;

  // Verify webhook signature and extract the event.
  // See https://stripe.com/docs/webhooks/signatures for more information.
  try {
    event = stripe.webhooks.constructEvent(request.body, sig, webhook_secret);
  } catch (err) {
    return response.status(400).send(`Webhook Error: ${err.message}`);
  }

  if (event.type === &#39;payment_intent.succeeded&#39;) {
    const paymentIntent = event.data.object;
    const connectedAccountId = event.account;
    handleSuccessfulPaymentIntent(connectedAccountId, paymentIntent);
  }

  response.json({received: true});
});

const handleSuccessfulPaymentIntent = (connectedAccountId, paymentIntent) =&gt; {
    // Fulfill the purchase.
  console.log(&#39;Connected account ID: &#39; + connectedAccountId);
  console.log(&#39;PaymentIntent: &#39; + JSON.stringify(paymentIntent));
}

app.listen(4242, () =&gt; console.log(`Node server listening on port ${4242}!`));</code></div></pre>

</div>


<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
server.java
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge/blob/8f932c3c2c093c3212391c017d923f410856d391/server/java/src/main/java/com/stripe/sample/Server.java#L126-L170" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-java numbered highlighted-line" data-highlight-lines=32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61><div class="file-content-wrapper"><code>package com.stripe.sample;

import com.stripe.Stripe;
import com.stripe.model.PaymentIntent;
import com.stripe.model.Event;
import com.stripe.model.EventDataObjectDeserializer;
import com.stripe.exception.SignatureVerificationException;
import com.stripe.net.Webhook;
import com.google.gson.JsonSyntaxException;
import spark.Response;

// Using Spark.
import static spark.Spark.*;

public class Server {
  public static void main(String[] args) {
    port(4242);

    // Set your secret key. Remember to switch to your live secret key in production!
    // See your keys here: https://dashboard.stripe.com/account/apikeys
    Stripe.apiKey = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;;
    post(&quot;/webhook&quot;, (request, response) -&gt; {
      String payload = request.body();
      String sigHeader = request.headers(&quot;Stripe-Signature&quot;);

      // Uncomment and replace with a real secret. You can find your endpoint&#39;s
      // secret in your webhook settings.
      // String webhookSecret = &quot;whsec_...&quot;

      Event event = null;

      // Verify webhook signature and extract the event.
      // See https://stripe.com/docs/webhooks/signatures for more information.
      try {
        event = Webhook.constructEvent(
          payload, sigHeader, webhookSecret
        );
      } catch (JsonSyntaxException e) {
      // Invalid payload.
        response.status(400);
        return &quot;&quot;;
      } catch (SignatureVerificationException e) {
      // Invalid Signature.
        response.status(400);
        return &quot;&quot;;
      }

      if (&quot;payment_intent.succeeded&quot;.equals(event.getType())) {
        // Deserialize the nested object inside the event
        EventDataObjectDeserializer dataObjectDeserializer = event.getDataObjectDeserializer();
        PaymentIntent paymentIntent = null;
        if (dataObjectDeserializer.getObject().isPresent()) {
          paymentIntent = (PaymentIntent) dataObjectDeserializer.getObject().get();
          String connectedAccountId = event.getAccount();
          handleSuccessfulPaymentIntent(connectedAccountId, paymentIntent);
        } else {
          // Deserialization failed, probably due to an API version mismatch.
          // Refer to the Javadoc documentation on `EventDataObjectDeserializer` for
          // instructions on how to handle this case, or return an error here.
        }
      }

      response.status(200);
      return &quot;&quot;;
    });
  }

  private static void handleSuccessfulPaymentIntent(String connectedAccountId, PaymentIntent paymentIntent) {
    // Fulfill the purchase.
    System.out.println(&quot;Connected account ID: &quot; + connectedAccountId);
    System.out.println(&quot;PaymentIntent ID: &quot; + paymentIntent.getId());
  }
}</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-file">
<span>
server.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-go numbered highlighted-line" data-highlight-lines=42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62><div class="file-content-wrapper"><code>package main

import (
  &quot;encoding/json&quot;
  &quot;log&quot;
  &quot;fmt&quot;
  &quot;net/http&quot;
  &quot;io/ioutil&quot;

  &quot;github.com/stripe/stripe-go/v71&quot;
  &quot;github.com/stripe/stripe-go/v71/webhook&quot;

  &quot;os&quot;
)

func main() {
  // Set your secret key. Remember to switch to your live secret key in production!
  // See your keys here: https://dashboard.stripe.com/account/apikeys
  stripe.Key = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;

  http.HandleFunc(&quot;/webhook&quot;, handleWebhook)
  addr := &quot;localhost:4242&quot;

  log.Printf(&quot;Listening on %s ...&quot;, addr)
  log.Fatal(http.ListenAndServe(addr, nil))
}

func handleWebhook(w http.ResponseWriter, req *http.Request) {
  const MaxBodyBytes = int64(65536)
  req.Body = http.MaxBytesReader(w, req.Body, MaxBodyBytes)
  body, err := ioutil.ReadAll(req.Body)
  if err != nil {
      fmt.Fprintf(os.Stderr, &quot;Error reading request body: %v\n&quot;, err)
      w.WriteHeader(http.StatusServiceUnavailable)
      return
  }

  // Uncomment and replace with a real secret. You can find your endpoint&#39;s
  // secret in your webhook settings.
  // webhookSecret := &quot;whsec_...&quot;

  // Verify webhook signature and extract the event.
  // See https://stripe.com/docs/webhooks/signatures for more information.
  event, err := webhook.ConstructEvent(body, req.Header.Get(&quot;Stripe-Signature&quot;), webhookSecret)

  if err != nil {
      fmt.Fprintf(os.Stderr, &quot;Error verifying webhook signature: %v\n&quot;, err)
      w.WriteHeader(http.StatusBadRequest) // Return a 400 error on a bad signature.
      return
  }

  if event.Type == &quot;payment_intent.succeeded&quot; {
      var paymentIntent stripe.PaymentIntent
      err := json.Unmarshal(event.Data.Raw, &amp;paymentIntent)
      if err != nil {
          fmt.Fprintf(os.Stderr, &quot;Error parsing webhook JSON: %v\n&quot;, err)
          w.WriteHeader(http.StatusBadRequest)
          return
      }
      var connectedAccountId = event.Account;
      handleSuccessfulPaymentIntent(connectedAccountId, paymentIntent)
  }

  w.WriteHeader(http.StatusOK)
}

func handleSuccessfulPaymentIntent(connectedAccountId string, paymentIntent stripe.PaymentIntent) {
  // Fulfill the purchase.
  log.Println(&quot;Connected account ID: &quot; + connectedAccountId)
  log.Println(&quot;PaymentIntent ID: &quot; + paymentIntent.ID)
}</code></div></pre>

</div>

<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-file">
<span>
Controllers.cs
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-dotnet numbered highlighted-line" data-highlight-lines=35,36,37,38,39,40,41,42,43,44,45><div class="file-content-wrapper"><code>
// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
StripeConfiguration.ApiKey = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;;

using System;
using System.IO;
using System.Threading.Tasks;
using Microsoft.AspNetCore.Mvc;
using Microsoft.Extensions.Logging;

using Stripe;

namespace Controllers
{
  public class ConnectController : Controller
  {
    private readonly ILogger&lt;ConnectController&gt; logger;

    public ConnectController(
      ILogger&lt;ConnectController&gt; logger,
    ) {
      this.logger = logger;
    }

    [HttpPost(&quot;webhook&quot;)]
    public async Task&lt;IActionResult&gt; ProcessWebhookEvent()
    {
      var json = await new StreamReader(HttpContext.Request.Body).ReadToEndAsync();

      // Uncomment and replace with a real secret. You can find your endpoint&#39;s
      // secret in your webhook settings.
      // const string webhookSecret = &quot;whsec_...&quot;

      // Verify webhook signature and extract the event.
      // See https://stripe.com/docs/webhooks/signatures for more information.
      try
      {
        var stripeEvent = EventUtility.ConstructEvent(json, Request.Headers[&quot;Stripe-Signature&quot;], webhookSecret);

        if (stripeEvent.Type == Events.PaymentIntentSucceeded) {
          var paymentIntent = stripeEvent.Data.Object as PaymentIntent;
          var connectedAccountId = stripeEvent.Account;
          handleSuccessfulPaymentIntent(connectedAccountId, paymentIntent);
        }

        return Ok();
      }
      catch (Exception e)
      {
        logger.LogInformation(e.ToString());
        return BadRequest();
      }
    }

    private void handleSuccessfulPaymentIntent(string connectedAccountId, PaymentIntent paymentIntent) {
      // Fulfill the purchase.
      logger.LogInformation($&quot;Connected account ID: {connectedAccountId}&quot;);
      logger.LogInformation($&quot;PaymentIntent: {paymentIntent}&quot;);
    }
  }
}</code></div></pre>

</div>


</div>
</div>


<p>Learn more in our <a href="../payments/handling-payment-events.html">fulfillment guide for payments</a>.</p>

<h3 id="testing-webhooks-locally">Testing webhooks locally</h3>

<p>Testing webhooks locally is easy with the Stripe CLI.</p>

<ol>
  <li>
    <p>First, <a href="../stripe-cli.html#install">install the Stripe CLI</a> on your machine if you haven’t already.</p>
  </li>
  <li>
    <p>Then, to log in run <code>stripe login</code> in the command line, and follow the instructions.</p>
  </li>
  <li>
    <p>Finally, to allow your local host to receive a simulated event on your connected account run <code>stripe listen --forward-connect-to localhost:{PORT}/webhook</code> in one terminal window, and run <code>stripe trigger --stripe-account={{CONNECTED_STRIPE_ACCOUNT_ID}} payment_intent.succeeded</code> (or trigger any other <a href="https://github.com/stripe/stripe-cli/wiki/trigger-command#supported-events">supported event</a>) in another.</p>
  </li>
</ol>

</div><div class="tabs-tab" id='checkout'>  <div id="connect-checkout-demo" class="connect-direct-charge-checkout">
  <div class="sr-sample ">
    <div class="sr-header sample"><h4>What you're building</h4>
        <div>
          <button class="sr-pill" id="checkout-github-btn">Clone from GitHub</button>
          <button class="sr-pill" id="checkout-cli-btn">Clone with CLI</button>
        </div>
    </div>
    <div class="sr-root ">
      <div class="row">
        <button class="submit" id="preview-button" type="submit">Checkout</button>
        <p id="preview-message"></p>
      </div>
      <div class="sample-integration">
        <p class="sr-subtext">This sample integration is running in test mode, which means that it won’t create a real charge. Use <code>4242 4242 4242 4242</code> as your card number, any three-digit CVC code, and an expiration date in the future to simulate a successful payment.</p>
      </div>
    </div>
  </div>
  <div class="sr-clone cli hidden">
    <button class="close-sample-btn"></button>
    <p>Install the <a href="../stripe-cli.html#install">Stripe CLI</a>, then run the following in your terminal:</p>
    <div class="sr-terminal"><div>$</div>
      <div>stripe samples create connect-direct-charge-checkout</div>
    </div>
    <p class="sr-subtext">Contains examples in PHP, Node.js, Ruby, Java, Python. The sample will be configured with your Stripe test key if you have set up the CLI with your Stripe account</p>
  </div>
  <div class="sr-clone github hidden">
    <button class="close-sample-btn"></button>
    <p>We have a set of samples on <a href="https://github.com/stripe-samples">GitHub</a> to help you get started.</p>
    <div class="sr-terminal"><div>$</div>
      <div>git clone https://github.com/stripe-samples/connect-direct-charge-checkout</div>
    </div>
    <p class="sr-subtext">Contains examples in PHP, Node.js, Ruby, Java, Python.</p>
  </div>
</div>



<h3>
<span class="step">Step 3.1: </span>
Create a Checkout session
<span class="tag optional">Server-side</span>
</h3>
<p>On your server, make the following call to Stripe’s API:</p>

<div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="curl">curl</a>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="java">Java</a>
<a data-language="node">Node</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">
  <!-- CURL -->
<div class="code" data-language="curl">
  <pre class="language-curl not-numbered" ><div class="file-content-wrapper"><code>curl https://api.stripe.com/v1/checkout/sessions \
  -u sk_test_4eC39HqLyjWDarjtT1zdp7dc: \
  -d &quot;payment_method_types[]&quot;=card \
  -d &quot;line_items[][name]&quot;=&quot;Stainless Steel Water Bottle&quot; \
  -d &quot;line_items[][amount]&quot;=1000 \
  -d &quot;line_items[][currency]&quot;=usd \
  -d &quot;line_items[][quantity]&quot;=1 \
  -d &quot;payment_intent_data[application_fee_amount]&quot;=123 \
  -d success_url=&quot;https://example.com/success&quot; \
  -d cancel_url=&quot;https://example.com/cancel&quot; \
  -H &quot;Stripe-Account: {{CONNECTED_STRIPE_ACCOUNT_ID}}&quot;
</code></div></pre>

</div>

  <!-- Ruby -->
<div class="code" data-language="ruby">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/828e51e818889e5020d895e23dc03aacbc78b94b/server/ruby/server.rb#L31-L60" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-ruby not-numbered" ><div class="file-content-wrapper"><code>session = Stripe::Checkout::Session.create({
  payment_method_types: [&#39;card&#39;],
  line_items: [{
    name: &quot;Stainless Steel Water Bottle&quot;,
    amount: 1000,
    currency: &#39;usd&#39;,
    quantity: 1,
  }],
  payment_intent_data: {
    application_fee_amount: 123,
  },
  success_url: &#39;https://example.com/success&#39;,
  cancel_url: &#39;https://example.com/cancel&#39;,
}, {stripe_account: &#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;})</code></div></pre>

</div>

  <!-- Python -->
<div class="code" data-language="python">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/828e51e818889e5020d895e23dc03aacbc78b94b/server/python/server.py#L41-L72" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-python not-numbered" ><div class="file-content-wrapper"><code>session = stripe.checkout.Session.create(
  payment_method_types=[&#39;card&#39;],
  line_items=[{
    &#39;name&#39;: &quot;Stainless Steel Water Bottle&quot;,
    &#39;amount&#39;: 1000,
    &#39;currency&#39;: &#39;usd&#39;,
    &#39;quantity&#39;: 1,
  }],
  payment_intent_data={
    &#39;application_fee_amount&#39;: 123,
  },
  success_url=&#39;https://example.com/success&#39;,
  cancel_url=&#39;https://example.com/cancel&#39;,
  stripe_account=&#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;,
)</code></div></pre>

</div>

  <!-- PHP -->
<div class="code" data-language="php">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/828e51e818889e5020d895e23dc03aacbc78b94b/server/php/index.php#L42-L68" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-php not-numbered" ><div class="file-content-wrapper"><code>$session = \\Stripe\\Checkout\\Session::create([
  &#39;payment_method_types&#39; =&gt; [&#39;card&#39;],
  &#39;line_items&#39; =&gt; [[
    &#39;name&#39; =&gt; &quot;Stainless Steel Water Bottle&quot;,
    &#39;amount&#39; =&gt; 1000,
    &#39;currency&#39; =&gt; &#39;usd&#39;,
    &#39;quantity&#39; =&gt; 1,
  ]],
  &#39;payment_intent_data&#39; =&gt; [
    &#39;application_fee_amount&#39; =&gt; 123,
  ],
  &#39;success_url&#39; =&gt; &#39;https://example.com/success&#39;,
  &#39;cancel_url&#39; =&gt; &#39;https://example.com/cancel&#39;,
], [&#39;stripe_account&#39; =&gt; &#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;]);</code></div></pre>

</div>

  <!-- Java -->
<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/828e51e818889e5020d895e23dc03aacbc78b94b/server/java/src/main/java/com/stripe/sample/Server.java#L70-L115" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-java not-numbered" ><div class="file-content-wrapper"><code>Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();

ArrayList&lt;String&gt; paymentMethodTypes = new ArrayList&lt;&gt;();
paymentMethodTypes.add(&quot;card&quot;);
params.put(&quot;payment_method_types&quot;, paymentMethodTypes);

ArrayList&lt;HashMap&lt;String, Object&gt;&gt; lineItems = new ArrayList&lt;&gt;();
HashMap&lt;String, Object&gt; lineItem = new HashMap&lt;String, Object&gt;();
lineItem.put(&quot;name&quot;, &quot;Stainless Steel Water Bottle&quot;);
lineItem.put(&quot;amount&quot;, 1000);
lineItem.put(&quot;currency&quot;, &quot;usd&quot;);
lineItem.put(&quot;quantity&quot;, 1);
lineItems.add(lineItem);
params.put(&quot;line_items&quot;, lineItems);

HashMap&lt;String, Object&gt; paymentIntentData = new HashMap&lt;String, Object&gt;();
paymentIntentData.put(&quot;application_fee_amount&quot;, 123);
params.put(&quot;payment_intent_data&quot;, paymentIntentData);

params.put(&quot;success_url&quot;, &quot;https://example.com/success&quot;);
params.put(&quot;cancel_url&quot;, &quot;https://example.com/cancel&quot;);

RequestOptions requestOptions = RequestOptions.builder().setStripeAccount(&quot;{{CONNECTED_STRIPE_ACCOUNT_ID}}&quot;).build();
Session session = Session.create(params, requestOptions);</code></div></pre>

</div>

  <!-- Node -->
<div class="code" data-language="node">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/828e51e818889e5020d895e23dc03aacbc78b94b/server/node/server.js#L35-L66" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript not-numbered" ><div class="file-content-wrapper"><code>const session = await stripe.checkout.sessions.create({
  payment_method_types: [&#39;card&#39;],
  line_items: [{
    name: &#39;Stainless Steel Water Bottle&#39;,
    amount: 1000,
    currency: &#39;usd&#39;,
    quantity: 1,
  }],
  payment_intent_data: {
    application_fee_amount: 123,
  },
  success_url: &#39;https://example.com/success&#39;,
  cancel_url: &#39;https://example.com/cancel&#39;,
}, {
  stripeAccount: &#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;,
});</code></div></pre>

</div>

  <!-- Go -->
<div class="code" data-language="go">
  <pre class="language-go not-numbered" ><div class="file-content-wrapper"><code>params := &amp;stripe.CheckoutSessionParams{
    PaymentMethodTypes: stripe.StringSlice([]string{
        &quot;card&quot;,
    }),
    LineItems: []*stripe.CheckoutSessionLineItemParams{
        &amp;stripe.CheckoutSessionLineItemParams{
            Name: stripe.String(&quot;Stainless Steel Water Bottle&quot;),
            Amount: stripe.Int64(1000),
            Currency: stripe.String(string(stripe.CurrencyUSD)),
            Quantity: stripe.Int64(1),
        },
    },
    PaymentIntentData: &amp;stripe.CheckoutSessionPaymentIntentDataParams{
        ApplicationFeeAmount: stripe.Int64(123),
    },
    SuccessURL: stripe.String(&quot;https://example.com/success&quot;),
    CancelURL: stripe.String(&quot;https://example.com/cancel&quot;),
}

params.SetStripeAccount(&quot;{{CONNECTED_STRIPE_ACCOUNT_ID}}&quot;)
session, err := session.New(params)</code></div></pre>

</div>

  <!-- .NET -->
<div class="code" data-language="dotnet">
  <pre class="language-dotnet not-numbered" ><div class="file-content-wrapper"><code>var options = new SessionCreateOptions
{
    PaymentMethodTypes = new List&lt;string&gt;
    {
        &quot;card&quot;,
    },
    LineItems = new List&lt;SessionLineItemOptions&gt;
    {
        new SessionLineItemOptions
        {
            Name = &quot;Stainless Steel Water Bottle&quot;,
            Amount = 1000,
            Currency = &quot;usd&quot;,
            Quantity = 1,
        },
    },
    PaymentIntentData = new SessionPaymentIntentDataOptions
    {
        ApplicationFeeAmount = 123,
    },
    SuccessUrl = &quot;https://example.com/success&quot;,
    CancelUrl = &quot;https://example.com/cancel&quot;,
};

var requestOptions = new RequestOptions
{
    StripeAccount = &quot;{{CONNECTED_STRIPE_ACCOUNT_ID}}&quot;,
};
var service = new SessionService();
Session session = service.Create(options, requestOptions);</code></div></pre>

</div>

</div>
</div>


<p>This returns a <a href="../api/checkout/sessions.html">Checkout Session</a> object with an <code>id</code> attribute that’s needed on the client side.</p>

<ul>
  <li><code>Stripe-Account</code> - This header indicates a <a href="direct-charges.html">direct charge</a> for your connected account. With direct charges, the connected account is responsible for Stripe fees, refunds, and chargebacks. The connected account’s branding is used in Checkout, which allows their customers to feel like they’re interacting directly with the merchant instead of your platform.</li>
  <li><code>line_items</code> - This argument represents items that your customer is purchasing and that will show up in the hosted user interface.</li>
  <li><code>success_url</code> - This argument redirects a user after they complete a payment.</li>
  <li><code>cancel_url</code>  - This argument redirects a user after they click cancel.</li>
  <li>(Optional) <code>payment_intent_data[application_fee_amount]</code> - This argument specifies the amount your platform plans to take from the transaction. After the payment is processed on the connected account, the <code>application_fee_amount</code> is transferred to the platform and the Stripe fee is deducted from the connected account’s balance.</li>
</ul>

<p><a href="../../img/docs/connect/direct_charges.svg" class="zoomable">
  <img width="100%" src="../../img/docs/connect/direct_charges.svg" />
</a></p>

<h3 id="span-classstepstep-32-span-add-a-checkout-button-span-classtag-optionalclient-sidespan"><span class="step">Step 3.2: </span> Add a checkout button <span class="tag optional">Client-side</span></h3>

<p>On your checkout page, include the <strong>Stripe.js</strong> script by adding it to the <code>head</code> of your HTML file.</p>

<div class="code" data-language="html">
  <nav class="nav-filename icon-file">
    <p><span>
checkout.html
</span></p>
    <div>
      <div class="code-copy-btn ">
        <svg height="15" viewbox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd" /></svg>
      </div>
    </div>
  </nav>
  <pre class="language-html numbered"><div class="file-content-wrapper"><code>&lt;head&gt;
  &lt;title&gt;Checkout&lt;/title&gt;
  &lt;script src=&quot;https://js.stripe.com/v3/&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
</code></div></pre>

</div>

<p>Fetch the Session ID from your server. Add a button to your client with a click handler that calls Stripe’s <a href="../js/checkout/redirect_to_checkout.html">frontend API</a>:</p>


<div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="javascript">JavaScript</a>
<a data-language="javascript_esnext">JavaScript (ESNext)</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">
<div class="code" data-language="javascript">
  <nav class="nav-filename icon-file">
<span>

</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/828e51e818889e5020d895e23dc03aacbc78b94b/client/script.js#L99-L120" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>// Initialize Stripe.js with the same connected account ID used when creating
// the Checkout Session.
var stripe = Stripe(&#39;pk_test_TYooMQauvdEDq54NiTphI7jx&#39;, {
  stripeAccount: &#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;
});

stripe.redirectToCheckout({
  // Make the id field from the Checkout Session creation API response
  // available to this file, so you can provide it as parameter here
  // instead of the {{CHECKOUT_SESSION_ID}} placeholder.
  sessionId: &#39;{{CHECKOUT_SESSION_ID}}&#39;
}).then(function (result) {
  // If `redirectToCheckout` fails due to a browser or network
  // error, display the localized error message to your customer
  // using `result.error.message`.
});</code></div></pre>

</div>

<div class="code" data-language="javascript_esnext">
  <pre class="language-javascript numbered" ><div class="file-content-wrapper"><code>// Initialize Stripe.js with the same connected account ID used when creating
// the Checkout Session.
const stripe = Stripe(&#39;pk_test_TYooMQauvdEDq54NiTphI7jx&#39;, {
  stripeAccount: &#39;{{CONNECTED_STRIPE_ACCOUNT_ID}}&#39;
});

const {error} = await stripe.redirectToCheckout({
  // Make the id field from the Checkout Session creation API response
  // available to this file, so you can provide it as parameter here
  // instead of the {{CHECKOUT_SESSION_ID}} placeholder.
  sessionId: &#39;{{CHECKOUT_SESSION_ID}}&#39;
})
// If `redirectToCheckout` fails due to a browser or network
// error, display the localized error message to your customer
// using `error.message`.</code></div></pre>

</div>

</div>
</div>


<p>Your connected accounts can set up their branding settings at: <a href="https://dashboard.stripe.com/account/branding">https://dashboard.stripe.com/account/branding</a>.</p>

<h3>
<span class="step">Step 3.3: </span>
Fulfillment
<span class="tag optional">Server-side</span>
</h3>
  
<p>After payment is completed, you must handle any necessary fulfillment. For example, a store builder must alert the business to send the purchased item to the customer.</p>

<aside class="important amber">
  <p>Do not rely on the redirect to the <code>success_url</code> param alone for fulfilling purchases as:</p>

  <ul>
    <li>Malicious users could directly access the <code>success_url</code> without paying and
gain access to your goods or services.</li>
    <li>Customers may not always reach the <code>success_url</code> after a successful payment.
It is possible they close their browser tab before the redirect occurs.</li>
  </ul>

</aside>

<p>If you’re using Checkout, configure a webhook endpoint <a href="https://dashboard.stripe.com/account/webhooks">in your dashboard</a> (for events <em>from your Connect applications</em>).</p>

<p><a href="../../img/docs/connect/connect_webhooks.png" class="zoomable">
  <img width="100%" src="../../img/docs/connect/connect_webhooks.png" />
</a></p>

<p>Then create an HTTP endpoint on your server to monitor for completed payments to then enable your users (connected accounts) to fulfill purchases.</p>

  





<div class="tabs tabs-code animated" data-callback="codeTabsChanged" >
<nav class="nav-languages has-copy-btn">
<div>
<a data-language="ruby">Ruby</a>
<a data-language="python">Python</a>
<a data-language="php">PHP</a>
<a data-language="node">Node</a>
<a data-language="java">Java</a>
<a data-language="go">Go</a>
<a data-language="dotnet">.NET</a>
</div>
<div class="code-copy-btn code-copy-btn-tab-nav">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</nav>
<div class="tabs-content">

<div class="code" data-language="ruby">
  <nav class="nav-filename icon-file">
<span>
server.rb
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/master/server/ruby/server.rb#L79-L112" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-ruby numbered highlighted-line" data-highlight-lines=21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41><div class="file-content-wrapper"><code># Using Sinatra.
require &#39;sinatra&#39;
require &#39;stripe&#39;

set :port, 4242

# Set your secret key. Remember to switch to your live secret key in production!
# See your keys here: https://dashboard.stripe.com/account/apikeys
Stripe.api_key = &#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;

# Uncomment and replace with a real secret. You can find your endpoint&#39;s
# secret in your webhook settings.
# webhook_secret = &#39;whsec_...&#39;

post &#39;/webhook&#39; do
  payload = request.body.read
  sig_header = request.env[&#39;HTTP_STRIPE_SIGNATURE&#39;]

  event = nil

  # Verify webhook signature and extract the event.
  # See https://stripe.com/docs/webhooks/signatures for more information.
  begin
    event = Stripe::Webhook.construct_event(
      payload, sig_header, webhook_secret
    )
  rescue JSON::ParserError =&gt; e
    # Invalid payload.
    status 400
    return
  rescue Stripe::SignatureVerificationError =&gt; e
    # Invalid Signature.
    status 400
    return
  end

  if event[&#39;type&#39;] == &#39;checkout.session.completed&#39;
    session = event[&#39;data&#39;][&#39;object&#39;]
    connected_account_id = event[&#39;account&#39;]
    handle_checkout_session(connected_account_id, session)
  end

  status 200
end

def handle_checkout_session(connected_account_id, session)
  # Fulfill the purchase.
  puts &#39;Connected account ID: &#39; + connected_account_id
  puts &#39;Session: &#39; + session.to_s
end</code></div></pre>

</div>

<div class="code" data-language="python">
  <nav class="nav-filename icon-file">
<span>
server.py
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/master/server/python/server.py#L93-L124" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-python numbered highlighted-line" data-highlight-lines=28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44><div class="file-content-wrapper"><code>import stripe
import json

# Using Flask.
from flask import (
    Flask,
    render_template,
    request,
    Response,
)

app = Flask(__name__, static_folder=&quot;.&quot;,
            static_url_path=&quot;&quot;, template_folder=&quot;.&quot;)

# Set your secret key. Remember to switch to your live secret key in production!
# See your keys here: https://dashboard.stripe.com/account/apikeys
stripe.api_key = &#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;

# Uncomment and replace with a real secret. You can find your endpoint&#39;s
# secret in your webhook settings.
# webhook_secret = &#39;whsec_...&#39;

@app.route(&quot;/webhook&quot;, methods=[&quot;POST&quot;])
def webhook_received():
  request_data = json.loads(request.data)
  signature = request.headers.get(&quot;stripe-signature&quot;)

  # Verify webhook signature and extract the event.
  # See https://stripe.com/docs/webhooks/signatures for more information.
  try:
    event = stripe.Webhook.construct_event(
        payload=request.data, sig_header=signature, secret=webhook_secret
    )
  except ValueError as e:
    # Invalid payload.
    return Response(status=400)
  except stripe.error.SignatureVerificationError as e:
    # Invalid Signature.
    return Response(status=400)

  if event[&quot;type&quot;] == &quot;checkout.session.completed&quot;:
    session = event[&quot;data&quot;][&quot;object&quot;]
    connected_account_id = event[&quot;account&quot;]
    handle_checkout_session(connected_account_id, session)

  return json.dumps({&quot;success&quot;: True}), 200

def handle_checkout_session(connected_account_id, session):
  # Fulfill the purchase.
  print(&#39;Connected account ID: &#39; + connected_account_id)
  print(&#39;Session: &#39; + str(session))

if __name__ == &quot;__main__&quot;:
  app.run(port=4242)</code></div></pre>

</div>

<div class="code" data-language="php">
  <nav class="nav-filename icon-file">
<span>
server.php
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/master/server/php/index.php#L92-L119" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-php numbered highlighted-line" data-highlight-lines=25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43><div class="file-content-wrapper"><code>&lt;?php
// Using Slim.
use Slim\Http\Request;
use Slim\Http\Response;
use Stripe\Stripe;

require_once(&#39;vendor/autoload.php&#39;);

$app = new \Slim\App;

// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
\Stripe\Stripe::setApiKey(&#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;);

// Uncomment and replace with a real secret. You can find your endpoint&#39;s
// secret in your webhook settings.
// $webhook_secret = &#39;whsec_...&#39;;

$app-&gt;post(&#39;/webhook&#39;, function ($request, $response, $next) {
  $payload = $request-&gt;getBody();
  $sig_header = $request-&gt;getHeaderLine(&#39;stripe-signature&#39;);

  $event = null;

  // Verify webhook signature and extract the event.
  // See https://stripe.com/docs/webhooks/signatures for more information.
  try {
    $event = \Stripe\Webhook::constructEvent(
      $payload, $sig_header, $webhook_secret
    );
  } catch(\UnexpectedValueException $e) {
    // Invalid payload.
    return $response-&gt;withStatus(400);
  } catch(\Stripe\Exception\SignatureVerificationException $e) {
    // Invalid Signature.
    return $response-&gt;withStatus(400);
  }

  if ($event-&gt;type == &#39;checkout.session.completed&#39;) {
    $session = $event-&gt;data-&gt;object;
    $connectedAccountId = $event-&gt;account;
    handleCheckoutSession($connectedAccountId, $session);
  }

  return $response-&gt;withStatus(200);
});

function handleCheckoutSession($connectedAccountId, $session) {
  // Fulfill the purchase.
  echo &#39;Connected account ID: &#39; . $connectedAccountId;
  echo &#39;Session: &#39; . $session;
};

$app-&gt;run();</code></div></pre>

</div>

<div class="code" data-language="node">
  <nav class="nav-filename icon-file">
<span>
server.js
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/master/server/node/server.js#L102-L122" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-javascript numbered highlighted-line" data-highlight-lines=29,30,31,32,33,34,35,36,37,38,39,40,41><div class="file-content-wrapper"><code>// Using Express
const express = require(&#39;express&#39;);
const bodyParser = require(&quot;body-parser&quot;);
const app = express();
app.use(express.json());

// Use JSON parser for all non-webhook routes
app.use((req, res, next) =&gt; {
  if (req.originalUrl === &quot;/webhook&quot;) {
    next();
  } else {
    bodyParser.json()(req, res, next);
  }
});

// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
const stripe = require(&#39;stripe&#39;)(&#39;sk_test_4eC39HqLyjWDarjtT1zdp7dc&#39;);

// Uncomment and replace with a real secret. You can find your endpoint&#39;s
// secret in your webhook settings.
// const webhook_secret = &#39;whsec_...&#39;&#39;

app.post(&#39;/webhook&#39;, bodyParser.raw({type: &#39;application/json&#39;}), (request, response) =&gt; {
  const sig = request.headers[&#39;stripe-signature&#39;];

  let event;

  // Verify webhook signature and extract the event.
  // See https://stripe.com/docs/webhooks/signatures for more information.
  try {
    event = stripe.webhooks.constructEvent(request.body, sig, webhook_secret);
  } catch (err) {
    return response.status(400).send(`Webhook Error: ${err.message}`);
  }

  if (event.type === &#39;checkout.session.completed&#39;) {
    const session = event.data.object;
    const connectedAccountId = event.account;
    handleCheckoutSession(connectedAccountId, session);
  }

  response.json({received: true});
});

const handleCheckoutSession = (connectedAccountId, session) =&gt; {
    // Fulfill the purchase.
  console.log(&#39;Connected account ID: &#39; + connectedAccountId);
  console.log(&#39;Session: &#39; + JSON.stringify(session));
}

app.listen(4242, () =&gt; console.log(`Node server listening on port ${4242}!`));</code></div></pre>

</div>


<div class="code" data-language="java">
  <nav class="nav-filename icon-file">
<span>
server.java
</span>
<div>
<a href="https://github.com/stripe-samples/connect-direct-charge-checkout/blob/master/server/java/src/main/java/com/stripe/sample/Server.java#L143-L187" target="_blank" class="github">View full sample</a>
<div class="code-copy-btn left-border">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-java numbered highlighted-line" data-highlight-lines=32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61><div class="file-content-wrapper"><code>package com.stripe.sample;

import com.stripe.Stripe;
import com.stripe.model.checkout.Session;
import com.stripe.model.Event;
import com.stripe.model.EventDataObjectDeserializer;
import com.stripe.exception.SignatureVerificationException;
import com.stripe.net.Webhook;
import com.google.gson.JsonSyntaxException;
import spark.Response;

// Using Spark.
import static spark.Spark.*;

public class Server {
  public static void main(String[] args) {
    port(4242);

    // Set your secret key. Remember to switch to your live secret key in production!
    // See your keys here: https://dashboard.stripe.com/account/apikeys
    Stripe.apiKey = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;;
    post(&quot;/webhook&quot;, (request, response) -&gt; {
      String payload = request.body();
      String sigHeader = request.headers(&quot;Stripe-Signature&quot;);

      // Uncomment and replace with a real secret. You can find your endpoint&#39;s
      // secret in your webhook settings.
      // String webhookSecret = &quot;whsec_...&quot;

      Event event = null;

      // Verify webhook signature and extract the event.
      // See https://stripe.com/docs/webhooks/signatures for more information.
      try {
        event = Webhook.constructEvent(
          payload, sigHeader, webhookSecret
        );
      } catch (JsonSyntaxException e) {
      // Invalid payload.
        response.status(400);
        return &quot;&quot;;
      } catch (SignatureVerificationException e) {
      // Invalid Signature.
        response.status(400);
        return &quot;&quot;;
      }

      if (&quot;checkout.session.completed&quot;.equals(event.getType())) {
        // Deserialize the nested object inside the event
        EventDataObjectDeserializer dataObjectDeserializer = event.getDataObjectDeserializer();
        Session session = null;
        if (dataObjectDeserializer.getObject().isPresent()) {
          session = (Session) dataObjectDeserializer.getObject().get();
          String connectedAccountId = event.getAccount();
          handleCheckoutSession(connectedAccountId, session);
        } else {
          // Deserialization failed, probably due to an API version mismatch.
          // Refer to the Javadoc documentation on `EventDataObjectDeserializer` for
          // instructions on how to handle this case, or return an error here.
        }
      }

      response.status(200);
      return &quot;&quot;;
    });
  }

  private static void handleCheckoutSession(String connectedAccountId, Session session) {
    // Fulfill the purchase.
    System.out.println(&quot;Connected account ID: &quot; + connectedAccountId);
    System.out.println(&quot;Session ID: &quot; + session.getId());
  }
}</code></div></pre>

</div>

<div class="code" data-language="go">
  <nav class="nav-filename icon-file">
<span>
server.go
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-go numbered highlighted-line" data-highlight-lines=42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62><div class="file-content-wrapper"><code>package main

import (
  &quot;encoding/json&quot;
  &quot;log&quot;
  &quot;fmt&quot;
  &quot;net/http&quot;
  &quot;io/ioutil&quot;

  &quot;github.com/stripe/stripe-go/v71&quot;
  &quot;github.com/stripe/stripe-go/v71/webhook&quot;

  &quot;os&quot;
)

func main() {
  // Set your secret key. Remember to switch to your live secret key in production!
  // See your keys here: https://dashboard.stripe.com/account/apikeys
  stripe.Key = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;

  http.HandleFunc(&quot;/webhook&quot;, handleWebhook)
  addr := &quot;localhost:4242&quot;

  log.Printf(&quot;Listening on %s ...&quot;, addr)
  log.Fatal(http.ListenAndServe(addr, nil))
}

func handleWebhook(w http.ResponseWriter, req *http.Request) {
  const MaxBodyBytes = int64(65536)
  req.Body = http.MaxBytesReader(w, req.Body, MaxBodyBytes)
  body, err := ioutil.ReadAll(req.Body)
  if err != nil {
      fmt.Fprintf(os.Stderr, &quot;Error reading request body: %v\n&quot;, err)
      w.WriteHeader(http.StatusServiceUnavailable)
      return
  }

  // Uncomment and replace with a real secret. You can find your endpoint&#39;s
  // secret in your webhook settings.
  // webhookSecret := &quot;whsec_...&quot;

  // Verify webhook signature and extract the event.
  // See https://stripe.com/docs/webhooks/signatures for more information.
  event, err := webhook.ConstructEvent(body, req.Header.Get(&quot;Stripe-Signature&quot;), webhookSecret)

  if err != nil {
      fmt.Fprintf(os.Stderr, &quot;Error verifying webhook signature: %v\n&quot;, err)
      w.WriteHeader(http.StatusBadRequest) // Return a 400 error on a bad signature.
      return
  }

  if event.Type == &quot;checkout.session.completed&quot; {
      var session stripe.CheckoutSession
      err := json.Unmarshal(event.Data.Raw, &amp;session)
      if err != nil {
          fmt.Fprintf(os.Stderr, &quot;Error parsing webhook JSON: %v\n&quot;, err)
          w.WriteHeader(http.StatusBadRequest)
          return
      }
      var connectedAccountId = event.Account;
      handleCheckoutSession(connectedAccountId, session)
  }

  w.WriteHeader(http.StatusOK)
}

func handleCheckoutSession(connectedAccountId string, session stripe.CheckoutSession) {
  // Fulfill the purchase.
  log.Println(&quot;Connected account ID: &quot; + connectedAccountId)
  log.Println(&quot;Session ID: &quot; + session.ID)
}</code></div></pre>

</div>

<div class="code" data-language="dotnet">
  <nav class="nav-filename icon-file">
<span>
Controllers.cs
</span>
<div>
<div class="code-copy-btn ">
<svg height="15" viewBox="0 0 16 16" width="15" xmlns="http://www.w3.org/2000/svg"><path d="m7 5h2c1.6568542 0 3-1.34314575 3-3 1.1045695 0 2 .8954305 2 2v10c0 1.1045695-.8954305 2-2 2h-8c-1.1045695 0-2-.8954305-2-2v-10c0-1.1045695.8954305-2 2-2 0 1.65685425 1.34314575 3 3 3zm-1-3c0-1.1045695.8954305-2 2-2s2 .8954305 2 2c0 .55228475-.44771525 1-1 1h-2c-.55228475 0-1-.44771525-1-1z" fill-rule="evenodd"/></svg>
</div>
</div>
</nav>
<pre class="language-dotnet numbered highlighted-line" data-highlight-lines=36,37,38,39,40,41,42,43,44,45,46><div class="file-content-wrapper"><code>
// Set your secret key. Remember to switch to your live secret key in production!
// See your keys here: https://dashboard.stripe.com/account/apikeys
StripeConfiguration.ApiKey = &quot;sk_test_4eC39HqLyjWDarjtT1zdp7dc&quot;;

using System;
using System.IO;
using System.Threading.Tasks;
using Microsoft.AspNetCore.Mvc;
using Microsoft.Extensions.Logging;

using Stripe;
using Stripe.Checkout;

namespace Controllers
{
  public class ConnectController : Controller
  {
    private readonly ILogger&lt;ConnectController&gt; logger;

    public ConnectController(
      ILogger&lt;ConnectController&gt; logger,
    ) {
      this.logger = logger;
    }

    [HttpPost(&quot;webhook&quot;)]
    public async Task&lt;IActionResult&gt; ProcessWebhookEvent()
    {
      var json = await new StreamReader(HttpContext.Request.Body).ReadToEndAsync();

      // Uncomment and replace with a real secret. You can find your endpoint&#39;s
      // secret in your webhook settings.
      // const string webhookSecret = &quot;whsec_...&quot;

      // Verify webhook signature and extract the event.
      // See https://stripe.com/docs/webhooks/signatures for more information.
      try
      {
        var stripeEvent = EventUtility.ConstructEvent(json, Request.Headers[&quot;Stripe-Signature&quot;], webhookSecret);

        if (stripeEvent.Type == Events.CheckoutSessionCompleted) {
          var session = stripeEvent.Data.Object as Session;
          var connectedAccountId = stripeEvent.Account;
          HandleCheckoutSession(connectedAccountId, session);
        }

        return Ok();
      }
      catch (Exception e)
      {
        logger.LogInformation(e.ToString());
        return BadRequest();
      }
    }

    private void HandleCheckoutSession(string connectedAccountId, Session session) {
      // Fulfill the purchase.
      logger.LogInformation($&quot;Connected account ID: {connectedAccountId}&quot;);
      logger.LogInformation($&quot;Session: {session}&quot;);
    }
  }
}</code></div></pre>

</div>


</div>
</div>


<p>Learn more in our <a href="../payments/checkout/accept-a-payment.html#payment-success">fulfillment guide for Checkout</a>.</p>

<h3 id="testing-webhooks-locally">Testing webhooks locally</h3>

<p>Testing webhooks locally is easy with the Stripe CLI.</p>

<ol>
  <li>
    <p>First, <a href="../stripe-cli.html#install">install the Stripe CLI</a> on your machine if you haven’t already.</p>
  </li>
  <li>
    <p>Then, to log in run <code>stripe login</code> in the command line, and follow the instructions.</p>
  </li>
  <li>
    <p>Finally, to allow your local host to receive a simulated event on your connected account run <code>stripe listen --forward-connect-to localhost:{PORT}/webhook</code> in one terminal window, and run <code>stripe trigger --stripe-account={{CONNECTED_STRIPE_ACCOUNT_ID}} checkout.session.completed</code> (or trigger any other <a href="https://github.com/stripe/stripe-cli/wiki/trigger-command#supported-events">supported event</a>) in another.</p>
  </li>
</ol>
</div>
  </div>
</div>

  </div>
</div>

<div class="expando" aria-expanded="true">
  <a id="complete-integration" href="enable-payment-acceptance-guide.html#complete-integration" class="expando-trigger">
    <h2 class="expando-title" data-no-anchor data-custom-toc-title="Complete and customize your integration">
        <span class="expando-left-text">4</span>
      Complete and customize your integration
    </h2>
  </a>
  <div class="expando-content" tabindex="-1">
    <p>You now have a working integration. From your <a href="https://dashboard.stripe.com/test/connect/accounts/overview">account dashboard</a>, you can view an account and its balance.</p>

<p><a href="../../img/docs/connect/dashboard-account-standard.png" class="zoomable">
  <img width="100%" src="../../img/docs/connect/dashboard-account-standard.png" />
</a></p>

<h3>Payouts</h3>
<p>By default, any charge that you create for a connected account accumulates in the connected account’s <a href="account-balances.html">Stripe balance</a> and is paid out on a daily rolling basis. Standard accounts manage their own payout schedules in their Stripe dashboards at <a href="https://dashboard.stripe.com/settings/payouts">https://dashboard.stripe.com/settings/payouts</a>.</p>

<h3>Testing</h3>
<p>Test your account creation flow by <a href="testing.html#creating-accounts">creating accounts</a> and <a href="testing.html#using-oauth">using OAuth</a>. You can use <a href="../testing.html">the available test cards</a> to test your payments flow and simulate various payment outcomes.</p>

<h3>Other resources</h3>
<p>You have completed the steps required to build a working Connect integration. Based on your business needs, you can also do the following:</p>

<h4>Manage connected accounts</h4>
<ul class="next-steps">
    <li><a href="dashboard.html"><span>Manage connected accounts in the dashboard</span></a></li>
    <li><a href="webhooks.html"><span>Detect when a connected account disconnects from your platform</span></a></li>
</ul>

<h4>Customize payments</h4>
<ul class="next-steps">
    <li><a href="direct-charges.html#issuing-refunds"><span>Issue refunds</span></a></li>
    <li><a href="statement-descriptors.html"><span>Customize statement descriptors</span></a></li>
    <li><a href="subscriptions.html"><span>Create subscriptions</span></a></li>
    <li><a href="cloning-saved-payment-methods.html"><span>Share customers across connected accounts</span></a></li>
    <li><a href="currencies.html"><span>Work with multiple currencies</span></a></li>
</ul>
  </div>
</div>



  <section class="csat">
  <span data-csat-step="poll" class="csat-widget">
    
    <h4 class="csat-widget-cta" data-no-anchor>Was this page helpful?</h4>
    <button data-csat-poll="yes" class="csat-button csat-button-yes common-Button">Yes</button>
    <button data-csat-poll="no" class="csat-button csat-button-no common-Button">No</button>
  </span>

  <div data-csat-step="input" class="csat-widget">
    <div class="csat-input">
      <span id="csat-input-prompt">Feedback about this page?</span>
      <input id="csat-input-text" placeholder="Feedback about this page?" class="common-Input">
      <button id="csat-input-submit" class="csat-button common-Button">Send</button>
    </div>
  </div>

  <p data-csat-step="reply" class="csat-widget">
    <span class="csat-reply-main">
      Thank you for helping improve Stripe's documentation.
    </span>
    <span class="csat-reply-extended">
      If you need help or have any questions, please consider <a href="https://support.stripe.com/contact">contacting support</a>.
    </span>
  </p>

</section>

<footer>
  <section class="footer-questions">
    <div>
      <h4 data-no-anchor class="footer-contact">Questions? <a href="https://stripe.com/contact">Contact us</a>.</h4>
      <h4 data-no-anchor class="footer-youtube">Developer tutorials on <a href="https://www.youtube.com/stripedevelopers" target="blank">YouTube</a>.</h4>     
    </div>
  </section>  
  <section class="collect-email-guide footer-signup" id="footer-digest-signup">
        <div class="mask-container container-lg">
    <div class="collect-email-partial">
      <div class="intro-copy column">
        <form class='collect-form'
          action='https://stripemail.createsend.com/t/d/s/zuliju'
          
        >

          <h4 data-no-anchor >
            Get developer news:
          </h4>

          <div class='collect-input email'>
            <input id='collect-email-input-email' class='email-field' required="required" type='email'
              name='cm-zuliju-zuliju'
              placeholder='Email'
              value=''
              pattern='[\s\S]+@[\s\S]+\.[\s\S]+$'
            >
            <input id='collect-email-input-list' type='hidden' name='list' value='developerdigest' />
            <input type='hidden' name='csrf-token' value='1' />
            <button id='collect-email-input-submit' class='submit-button' type='submit'>Sign up</button>
          </div>
          <p class='collect-error email'>Please enter a valid email address.</p>
          <p class='collect-error connection'>
            You might have had an internet hiccup. Try again?
          </p>
            <div class="email-privacy-notice">
              <p>
                You can unsubscribe at any time.
                Read our <a href="https://stripe.com/privacy">privacy policy</a>.
              </p>
            </div>
        </form>
      </div>

      <div class='collect-success column'>
        <p>
            Thank you, we’ll let you know when we publish our next guide.         </p>
      </div>
    </div>
  </div>


  </section>
</footer>



            </article>
            <div class="docs-aside">
              <div class="docs-toc empty">
                <h4>On this page</h4>
                <ul class="docs-toc-list">
                </ul>
              </div>
              <div class="docs-definitions"></div>
            </div>
          </div>
        </div>
        <div class="right-spacer"></div>
      </div>
      <div id="loading-bar"></div>
  
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-v3/external/stickyfill.min-c4628abd129170fdc733.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-external/jquery.min-8a871487f6552205397a.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-clipboard-43d35918025abd2954b0.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-prism-95d192fd615981aca964.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-external/dynamics.min-1d7a9e501c23b51d538d.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-js.cookie-3f4952378dad1304640b.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-documentation-70ad1ecb761625b2103d.min.js"></script>
  <script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-external/algoliasearch-15ba610e0c3d11bd4fa8.min.js"></script>
  <script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-documentation-search-236ec6212a280a940d7b.min.js"></script>
<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/docsApps-1ac17a1b82a22ffe751c.min.js"></script>

<script type="text/javascript"  nonce="dvr2MAMFlP+WU1XH3b+90g==">  parseKey("sk_test_4eC39HqLyjWDarjtT1zdp7dc", "secret-key", null);
  parseKey("pk_test_TYooMQauvdEDq54NiTphI7jx", "publishable-key", null);
</script>  <script type="text/javascript" src="https://js.stripe.com/v3/"></script>

  <script src="../../js/connect-oauth-demo.js"></script>
  <script type="text/javascript">
      window.sampleName = "connect-direct-charge";
  </script>
  <script src="../../js/payments/take-a-payment-demo.js"></script>
<script type="text/javascript"  nonce="dvr2MAMFlP+WU1XH3b+90g==">  if (document.location.hash.slice(1) == 'create-setup-intent') {
    document.location = '/docs/payments/save-and-reuse';
  }
  if (document.location.hash.slice(1) == 'saving-card-without-payment') {
    document.location = '/docs/payments/save-and-reuse';
  }
</script><script type="text/javascript"  nonce="dvr2MAMFlP+WU1XH3b+90g==">    function integrationChanged(integration) {

      $('.html').hide();
      $('.react').hide();
      $(integration).show();
    }

    document.addEventListener("DOMContentLoaded", function() {
      integrationChanged('ruby');
    });
</script><script type="text/javascript"  nonce="dvr2MAMFlP+WU1XH3b+90g==">  function integrationChanged(integration) {
    $('.html').hide();
    $('.react').hide();
    $(integration).show();
  }

  document.addEventListener("DOMContentLoaded", function() {
    integrationChanged('ruby');
  });
</script>  <script type="text/javascript">
      window.successUrl = "https://stripe.com/docs/connect/enable-payment-acceptance-guide?success=true#accept-payment"
      window.cancelUrl = "https://stripe.com/docs/connect/enable-payment-acceptance-guide?cancel=true#accept-payment"
      window.sampleName = "connect-direct-charge-checkout"
  </script>
  <script src="../../js/connect-checkout-demo.js"></script>
<script defer src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-v3/shared/collect_email-4800c74c31cb737d05a3.min.js"></script>


  <script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-v3/shared/same-site-fdd20fe544351827462c.min.js"></script>



<script type="application/json" id="site-analytics-config">{&quot;generalAnalyticsConfig&quot;:{&quot;ga&quot;:{},&quot;flags&quot;:{&quot;test_experiment_0&quot;:false,&quot;docs_integration_checkers&quot;:true,&quot;site_role_aware&quot;:false,&quot;site_enriched_contact_sales&quot;:false,&quot;analytics_id_holdback&quot;:false,&quot;merchant_token_holdback&quot;:false,&quot;served_locale&quot;:&quot;en&quot;,&quot;authoring_tool&quot;:&quot;erb&quot;},&quot;locale&quot;:&quot;en&quot;,&quot;treatments&quot;:{&quot;test_experiment_0&quot;:&quot;control&quot;,&quot;docs_integration_checkers&quot;:&quot;treatment&quot;,&quot;site_role_aware&quot;:&quot;control&quot;,&quot;site_enriched_contact_sales&quot;:&quot;control&quot;}},&quot;siteSpecificAnalyticsConfig&quot;:{&quot;pageId&quot;:null,&quot;trackPageViewed&quot;:false,&quot;gtmConfig&quot;:{&quot;event&quot;:&quot;dataLayer-initialized&quot;,&quot;user-id&quot;:null,&quot;account-id&quot;:null,&quot;merchant-id&quot;:null,&quot;user-role&quot;:null,&quot;products-enabled&quot;:null,&quot;page-category&quot;:null,&quot;language&quot;:&quot;en&quot;,&quot;country&quot;:&quot;US&quot;,&quot;signed-in&quot;:false,&quot;signup-type&quot;:null}}}</script>



<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8NSNKQ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


<script src="../../../b.stripecdn.com/site-srv/assets/compiled/js/site-analytics-ae84926d4539ea217f68.min.js"></script>
<script defer src="../../../js.stripe.com/internal/v2/analytics.min.js"></script>



<script defer src="../../../b.stripecdn.com/site-srv/assets/compiled/js/sprockets-js-documentation-analytics-ce2cc3a78e13f61d7b15.min.js"></script>


  </body>
</html>

