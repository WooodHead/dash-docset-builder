function tryItNow(){var e,t,n=$(".try-now"),i="card",a=0,o=0,s=0,r=60,d=!0,c="",u={name:"Jenny Rosen",number:"4242424242424242",exp_month:12,exp_year:(new Date).getFullYear()+1,cvc:"123",zip:"94301"};!function t(){if(void 0!==window.sessionStorage){var n=sessionStorage.getItem("quickstart_demo_timestamp");if(!n||n<(new Date).getTime()-36e5)return y(),!1;var a=sessionStorage.getItem("quickstart_demo_"+i);if(a)try{var o=JSON.parse(a);e=o,v(!0),w(i,!1),t(),"customer"==o.step&&l()}catch(e){}}}();var m=stripe.elements().create("card");m.mount("#card-element");document.getElementById("content-wrapper");window.addEventListener("scroll",h,!1),window.addEventListener("resize",h,!1),h();var f=n.find(".card-form button");function l(){if("finish"!=i){if("card"==i&&!t)return;$.getJSON("/docs/demos/quickstart",{step:i,query:encodeURIComponent(c)},function(t){t&&t.step&&t.step!=i&&(window.Analytics&&"function"==typeof Analytics.action&&Analytics.action("quickstart_demo",{step:i,object:t.object}),e=t,d&&v())}).always(function(){++s<r&&setTimeout(function(){l()},1e3)})}}function v(o){if(e){p(i,e.object),"card"==i&&t&&(e.object=t),o||function(e,t){void 0!==window.sessionStorage&&(sessionStorage.setItem("quickstart_demo_timestamp",(new Date).getTime()),sessionStorage.setItem("quickstart_demo_"+e,JSON.stringify(t)))}(i,e);if(i=e.step,c=e.query,a++,n.find('.try-now-header [data-step="'+i+'"] [data-description]').each(function(){$(this).text(e.description[$(this).attr("data-description")])}),"finish"!=i){var s=n.find('.tabs-tab[data-step="'+i+'"] code');s.html(e.request),Prism.highlightElement(s.get(0)),n.find(".usage .info").text("Copy and run this curl request in your Terminal."),n.find(".usage").show(),n.find(".tip").hide()}else n.find(".usage").hide(),n.find(".tip").show();setTimeout(function(){w(i)},o?100:2e3),e=null}}function p(e,t){n.find(".success.active").removeClass("active");var i=n.find('.success[data-step="'+e+'"]');t&&t.id?(i.find(".object").text(t.id),i.addClass("active completed")):i.hasClass("completed")&&i.addClass("active")}function w(e,t){var i=n.find('nav [data-step="'+e+'"]').index();if(i>a||i==o)return!1;n.find("nav .active").removeClass("active").addClass("completed"),n.find('nav [data-step="'+e+'"]').addClass("active"),n.find(".try-now-header .active").removeClass("active"),n.find('.try-now-header [data-step="'+e+'"]').addClass("active"),tabs.select(n.find(".tabs").get(0),n.find('.tabs-tab[data-step="'+e+'"]').get(0),t),p(e),o=i}f.click(function(){return"card"!=i&&y(),stripe.createToken(m).then(function(e){e.error||(f.text("Success!").attr("disabled","disabled"),t=e.token,p(i,t),c=t.id,l())}),!1}),n.find("nav li").click(function(){w($(this).attr("data-step"))}),n.find(".restart").click(function(){return w("card",!0),y(),!1});var g=!1;function h(){var e;!g&&function(e){if(!e)return;var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)&&t.width>0&&t.height>0}(document.getElementById("card-element"))&&(e=u,setTimeout(function(){b(n.find(".card-form .name"),"name",e.name)},100),setTimeout(function(){b(m,"cardNumber",e.number)},1e3),setTimeout(function(){b(m,"cardExpiry",e.exp_month+"/"+String(e.exp_year).substr(2))},2500),setTimeout(function(){b(m,"cardCvc",e.cvc)},3500),setTimeout(function(){b(m,"postalCode",e.zip)},4e3),g=!0,window.removeEventListener("scroll",h),window.removeEventListener("resize",h))}function b(e,t,n){var i=0,a=setInterval(function(){var o=String(n).substring(0,i++);if(e===m){var s={};s[t]=o,m.update({__privateValue:s})}else"INPUT"===$(e).prop("tagName")&&$(e).val(o);i>n.length&&clearInterval(a)},75)}function y(){if(i="card",a=0,t="",n.find(".card-form button").text("Submit").removeAttr("disabled"),n.find('nav li:not([data-step="card"])').removeClass("completed"),n.find(".success.completed").removeClass("completed active"),void 0!==window.sessionStorage)for(var e=sessionStorage.length-1;e>=0;e--)sessionStorage.key(e).indexOf("quickstart_demo")>-1&&sessionStorage.removeItem(sessionStorage.key(e))}function S(){d=!1}function C(){d=!0,s>=r&&(s=0,l()),setTimeout(v,100)}window.addEventListener("blur",S),window.addEventListener("focus",C),page.onPageChange(function(){window.removeEventListener("scroll",h),window.removeEventListener("resize",h),window.removeEventListener("blur",S),window.removeEventListener("focus",C)})}