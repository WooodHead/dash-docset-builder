!function(){"use strict";window.siteAnalytics=window.siteAnalytics||{},window.siteAnalyticsUtil=window.siteAnalyticsUtil||{};var t,e=!1,n="SITE_ANALYTICS_DEBUG",i=[],a=250,o=a,c=1.3;function r(){var t=[].slice.call(arguments);w()&&console.log.apply(console,t)}function s(){return window.readConfig("site-analytics-config")||{}}function l(){return s().generalAnalyticsConfig||{}}function u(){return s().siteSpecificAnalyticsConfig||{}}function d(){return u().gtmConfig||{}}function w(){return!!window[n]}function f(t,e){m("action",t,e)}function y(t,e){m("actionOnce",t,e)}function g(t,e){m("modal",t,e)}function A(t,e){m("viewed",t,e)}function m(t,e,n){window.Analytics?p(t,e,n):function(t,e,n){i.push([t,e,n]),k(),r("enqueue",t,e,n)}(t,e,n)}function p(t,e,n){v();var i=function(t){var e=l();return Object.keys(t||{}).forEach(function(n){e[n]=t[n]}),e}(n);window.Analytics[t](e,i),r("emit",t,e,i)}function h(){var t,e,n=d();t=n,e={},Object.keys(t).forEach(function(n){var i=t[n];e[n]=i||void 0}),n=e,window.dataLayer=window.dataLayer||[],window.dataLayer.push(n)}function v(){e||(window.Analytics.configure(l()),e=!0,r("Sent config data"))}function k(){t||(t=setTimeout(b,o),o*=c)}function b(){t=null,window.Analytics?(r("Flushing event queue"),v(),i.forEach(function(t){p.apply(this,t)}),o=a):(k(),r("Ready timer waiting "+o+"ms"))}function U(t){if(!window.ga)return window.siteAnalyticsUtil.enqueuedCalls=window.siteAnalyticsUtil.enqueuedCalls||[],void window.siteAnalyticsUtil.enqueuedCalls.push({fnName:"sendToGoogleAnalytics",args:[t]});window.ga.apply(this,t),r("ga",t)}function _(t){window.dataLayer.push(t),r("dataLayer",t)}function C(){window.ga&&window.siteAnalyticsUtil.generalAnalyticsConfig?window.siteAnalyticsUtil.enqueuedCalls&&(window.siteAnalyticsUtil.enqueuedCalls.forEach(function(t){var e=window.siteAnalyticsUtil[t.fnName];e?e.apply(window.siteAnalyticsUtil,t.args):setTimeout(function(){throw Error("siteAnalyticsUtil has no fn "+t.fnName)})}),window.siteAnalyticsUtil.enqueuedCalls=[]):setTimeout(C,100)}window.siteAnalyticsUtil.analyticsConfigData||(h(),k(),window.siteAnalyticsUtil.debugActive=w,window.siteAnalyticsUtil.emitAction=f,window.siteAnalyticsUtil.emitActionOnce=y,window.siteAnalyticsUtil.emitModal=g,window.siteAnalyticsUtil.emitViewed=A,window.siteAnalyticsUtil.siteAnalyticsConfig=u,window.siteAnalyticsUtil.siteGtmConfigData=d,window.siteAnalyticsUtil.sendToGoogleAnalytics=U,window.siteAnalyticsUtil.sendToDataLayer=_,window.siteAnalyticsUtil.generalAnalyticsConfig=l,C())}(),function(){var t="data-analytics-action",e="data-analytics-source",n="data-analytics-modal",i="data-analytics-ga";function a(e){return e&&e.getAttribute?e.getAttribute(t)||e.getAttribute(n)?e:e.parentNode&&"BODY"!==e.tagName?a(e.parentNode):null:(setTimeout(function(){window.Raven&&window.Raven.captureMessage("Tried to findAnalyticsAttributes on something without .getAttribute (old code)",{extra:{el:e}})},2e3),null)}function o(t){return!!a(t)}function c(o){var c=function(o){var c=a(o),r={};return c.getAttribute(t)&&(r.action=c.getAttribute(t)),c.getAttribute(n)&&(r.modal=c.getAttribute(n)),c.getAttribute(e)&&(r.params={source:c.getAttribute(e)}),c.getAttribute(i)&&(r.googleAnalyticsParams=JSON.parse(c.getAttribute(i))),c.getAttribute(e)&&-1!==c.getAttribute(e).indexOf("cta")&&(r.trackCta=!0),r}(o);c.modal&&window.siteAnalyticsUtil.emitModal(c.modal,c.params),c.action&&window.siteAnalyticsUtil.emitAction(c.action,c.params),c.googleAnalyticsParams&&window.siteAnalyticsUtil.sendToGoogleAnalytics(c.googleAnalyticsParams),c.trackCta&&r(o)}function r(n){var i=n.getAttribute(t)+"_"+n.getAttribute(e);window.siteAnalyticsUtil.sendToDataLayer({event:"cta-button-click","cta-type":i,"click-url":n.href})}window.siteAnalytics.hasAnalyticsAttributes=o,window.siteAnalytics.trackByAttributes=c,window.siteAnalytics.trackCtaClick=r}(),function(){var t,e,n,i,a,o,c="742650679237989";function r(t){window.fbq&&t&&(window.fbq("track",t),window.siteAnalyticsUtil.debugActive()&&console.log("FB track",t))}t=window,e=document,n="script",t.fbq||(i=t.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},t._fbq||(t._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[],(a=e.createElement(n)).async=!0,a.src="https://connect.facebook.net/en_US/fbevents.js",(o=e.getElementsByTagName(n)[0]).parentNode.insertBefore(a,o)),window.fbq&&window.fbq("init",c),window.siteAnalytics.trackFacebookEvent=r,r("PageView")}(),function(){function t(t){if(t.currentTarget.hasAttribute("data-language")){var e=t.currentTarget.getAttribute("data-language");window.siteAnalytics.trackLanguageChange(e)}}function e(t){if(t.currentTarget.hasAttribute("data-country")){var e=t.currentTarget.getAttribute("data-country");window.siteAnalytics.trackCountryChange(e)}}document.addEventListener("DOMContentLoaded",function(){[].slice.call(document.querySelectorAll(".languagePicker a[data-language]")).forEach(function(e){e.addEventListener("click",t)}),[].slice.call(document.querySelectorAll(".countryPicker a[data-country]")).forEach(function(t){t.addEventListener("click",e)})})}(),function(){var t="form_input",e="form_submit";function n(e){e.target.matches("form *")&&window.siteAnalyticsUtil.emitAction(t,{name:e.target.getAttribute("name"),value:e.target.value})}function i(t){"FORM"===t.target.tagName&&window.siteAnalyticsUtil.emitAction(e)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),document.addEventListener("change",n),document.addEventListener("submit",i)}(),function(){var t="nav_dropdown_open",e={};function n(n){e[n]||(e[n]=!0,window.siteAnalyticsUtil.emitAction(t,{dropdown:n}))}window.siteAnalytics.trackGlobalNavDropdownOpen=n}(),function(t,e,n,i,a){t[i]=t[i]||[],t[i].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var o=e.getElementsByTagName(n)[0],c=e.createElement(n);c.async=!0,c.src="https://www.googletagmanager.com/gtm.js?id=GTM-W8NSNKQ",o.parentNode.insertBefore(c,o)}(window,document,"script","dataLayer"),function(){var t="radar_icosahedron",e="radar_fraud_chart",n="home_page_notebook",i="connect_routing_diagram",a="billing_infra_diagram",o="billing_node_open",c="billing_interactive_invoice_section",r="query_category",s="pricing_slider",l={},u={},d={},w={},f={};function y(){window.siteAnalyticsUtil.emitActionOnce(t)}function g(){window.siteAnalyticsUtil.emitActionOnce(e)}function A(t){var e=t.innerText.trim().toLowerCase();l[e]||(l[e]=!0,window.siteAnalyticsUtil.emitAction(n,{text:e}))}function m(t){var e=t.innerText.trim().toLowerCase();u[e]||(l[e]=!0,window.siteAnalyticsUtil.emitAction(i,{text:e}))}function p(t){var e=t.innerText.trim().toLowerCase();d[e]||(d[e]=!0,window.siteAnalyticsUtil.emitAction(a,{text:e}))}function h(t,e){var n=t.dataset.nodeType,i=t.dataset.nodeDescription,a=t.querySelector(".infra-node__meta").textContent.trim().toLowerCase(),c=e+"-"+n+"-"+a;w[c]||(w[c]=!0,window.siteAnalyticsUtil.emitAction(o,{infra_selectedPlan:e,infra_node_type:n,infra_node_meta:a,infra_node_description:i}))}function v(t){var e=t.dataset.target;f[e]||(f[e]=!0,window.siteAnalyticsUtil.emitAction(c,{section:e}))}function k(t){window.siteAnalyticsUtil.emitAction(r,{category:t})}function b(t){window.siteAnalyticsUtil.emitAction(r,{query:t})}function U(){window.siteAnalyticsUtil.emitActionOnce(s)}function _(t){window.siteAnalyticsUtil.sendToDataLayer({event:"virtual-pageview",url:document.location.href,title:document.title,referrer:t})}function C(t){window.siteAnalyticsUtil.sendToDataLayer({event:"site-language-change",language:t})}function E(t){window.siteAnalyticsUtil.sendToDataLayer({event:"site-country-change",country:t})}function S(){window.siteAnalyticsUtil.sendToGoogleAnalytics(["send","event","Click","Try Demo","demo"])}function q(t,e){window.siteAnalyticsUtil.emitAction(`docs.integration_checkers.${t}`,e)}function L(t){const e=t.reduce((t,e)=>e.success?t+1:t,0);window.siteAnalyticsUtil.emitAction("docs.integration_checkers.run_test_results",{successCount:e})}window.siteAnalytics.trackBillingInfraDiagramPricingPlan=p,window.siteAnalytics.trackBillingInfraDiagramNode=h,window.siteAnalytics.trackBillingInteractiveInvoice=v,window.siteAnalytics.trackConnectExpressDemoCta=S,window.siteAnalytics.trackConnectRoutingDiagram=m,window.siteAnalytics.trackCountryChange=E,window.siteAnalytics.trackDocsPageView=_,window.siteAnalytics.trackHomePageNotebook=A,window.siteAnalytics.trackLanguageChange=C,window.siteAnalytics.trackRadarIcosahedron=y,window.siteAnalytics.trackRadarFraudChart=g,window.siteAnalytics.trackSigmaQueryCategory=k,window.siteAnalytics.trackSigmaQueryExample=b,window.siteAnalytics.trackSigmaPricingSlider=U,window.siteAnalytics.trackIntegrationCheckerAction=q,window.siteAnalytics.trackIntegrationCheckerResults=L}(),function(){var t="inline_link",e="button",n="pdf_link";function i(i){var a,o=function(i){var a=i.className.toLowerCase(),o=i.getAttribute("href");return/\.pdf$|\.pdf#|\.pdf\?/i.test(i.href)?n:-1!==a.indexOf("button")||"#"===o?e:t}(i),c={text:(a=i.innerText,a.trim().replace(/\s+/g," ")),referrer:window.docsAnalytics.getReferrer(),href:i.getAttribute("href"),classname:i.className,current_page:document.location.pathname};window.siteAnalyticsUtil.emitAction(o,c)}function a(t){if(window.siteAnalytics.hasAnalyticsAttributes(t.target))window.siteAnalytics.trackByAttributes(t.target);else{var e=function t(e){return"A"===e.tagName?e:e.parentNode?t(e.parentNode):null}(t.target);e&&function(t){return!!t.getAttribute("href")}(e)&&i(e)}}document.addEventListener("click",a)}(),function(){function t(){if(function(){if(!document.documentElement.id)return!1;return!!window.siteAnalyticsUtil.siteAnalyticsConfig().trackPageViewed}()){var t=window.siteAnalyticsUtil.generalAnalyticsConfig(),e=document.documentElement.id;window.siteAnalyticsUtil.emitViewed(e,t)}}window.siteAnalytics.pageLoadTracking||(window.siteAnalytics.pageLoadTracking={trackPageView:t},window.addEventListener("load",t))}(),function(){var t="video_expand",e="video_end",n="video_play";function i(e){return c(t,e)}function a(t){return c(n,t)}function o(t){return c(e,t)}function c(t,e){var n,i,a=e;"string"!=typeof e&&(n=function(t){return t.currentSrc||t.getAttribute("src")||t.querySelector("source").getAttribute("src")}(e),a=(i=n.slice(n.lastIndexOf("/")+1)).slice(0,i.lastIndexOf("."))),window.siteAnalyticsUtil.emitAction(t,{video:a})}function r(t){"VIDEO"===t.target.tagName&&a(t.target)}function s(t){"VIDEO"===t.target.tagName&&o(t.target)}document.addEventListener("play",r,!0),document.addEventListener("ended",s,!0),window.siteAnalytics.trackVideoExpand=i,window.siteAnalytics.trackVideoPlay=a,window.siteAnalytics.trackVideoEnd=o}();var docsAnalytics=function(){var t=[],e=!0,n=document.location.href,i=document.referrer;function a(){siteAnalyticsUtil.emitViewed("docs",{docs_version:"2",referrer:i}),t.forEach(function(t){e&&t.skipInitial||t.onChange()}),e||(i=n,n=document.location.href),e=!1}return{observers:t,init:function(){"siteAnalyticsUtil"in window&&"function"==typeof siteAnalyticsUtil.emitAction&&"object"==typeof hooks&&(hooks.push(a),a())},getReferrer:function(){return i}}}(),trackCodeCopies=function(){var t=[];function e(t,e){for(;null!==t&&(t=t.parentElement)&&!t.classList.contains(e););return t}function n(t,e){for(;null!==t&&(t=t.parentElement)&&t.tagName!==e;);return t}return document.addEventListener("copy",function(){var n=window.getSelection();if(0===n.rangeCount)return;var i=e(n.anchorNode.parentNode,"code"),a=e(n.focusNode.parentNode,"code");if(null===i||i!==a)return;var o=i,c=t.find(function(t){return t.divs.includes(o)}),r=null;o.dataset&&o.dataset.language&&(r=o.dataset.language);siteAnalyticsUtil.emitAction("copied_selection",{order:c.order,sectionId:c.sectionId,codeBlockRef:c.page+"-"+c.order,language:r})}),{onChange:function(){var e=document.querySelectorAll(".code");t=[];for(var i=0;i<e.length;i++){var a,o=n(e[i],"SECTION");if(null!==o){var c=o.querySelector("[id]");a=null===c?null:c.id}var r=e[i].parentElement,s=t.find(function(t){return r.classList.contains("tabs-content")&&t.parentEl===r});s?s.divs.push(e[i]):t.push({order:t.length,page:window.location.pathname,sectionId:a,parentEl:r,divs:[e[i]]})}}}}(),trackKeyCopies=function(){document.addEventListener("copy",function(){var t=window.getSelection().toString();(t.includes("sk_test_")||t.includes("pk_test_"))&&siteAnalyticsUtil.emitAction("copied_key",{livemode:!1})})}(),missingAnchorLink=function(){return{onChange:function(){var t=window.location.hash;t.length>1&&(document.querySelector(t)||siteAnalyticsUtil.emitAction("missing_anchor_link",{page:window.location.pathname,hash:t}))}}}(),searchResults=function(){var t=document.querySelector(".search-results ul.results"),e=document.querySelector(".search");e&&(new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.length>0&&t.querySelectorAll("li a").forEach(function(t){t.addEventListener("click",n)})})}).observe(t,{childList:!0}),e.addEventListener("openSearchResult",n));function n(){if(t.children.length>0){var n=e.querySelector('input[type="search"]').value,i=t.querySelector("li.selected"),a=i.querySelector("a");if(n.length>0){var o=Array.prototype.indexOf.call(t.children,i);siteAnalyticsUtil.emitAction("search",{searchQuery:n,resultHref:a.href,resultIndex:o,resultTitle:a.text,resultPage:a.pathname,resultHash:a.hash})}}}}(),trackCSAT=function(){return{onChange:function(){var t,e,n,i=document.querySelector(".search").querySelector('input[type="search"]').value,a=document.querySelectorAll("[data-csat-step]"),o=document.querySelectorAll("[data-csat-poll]"),c=document.querySelector("#csat-input-text"),r=document.querySelector("#csat-input-prompt"),s=document.querySelector("#csat-input-submit"),l=document.querySelector("#csat-contact-optin-checkbox");function u(t){[].forEach.call(a,function(e){var n=e.dataset.csatStep===t;e.style.display=n?"block":"none"})}function d(){var n={helpful:e,text:c.value,path:window.location.pathname,contact:l?l.checked:null,poll:t.event_id,referrer:window.docsAnalytics.getReferrer(),search:i};u("reply"),n.text.trim().length<1||(siteAnalyticsUtil.emitAction("docs_footer_csat_text",n),n.csrf_token=document.head.querySelector("meta[name='csrf-token']").content,$.post("/docs/api/csat",n))}o.length&&(u("poll"),[].forEach.call(o,function(i){i.addEventListener("click",function(i){e="yes"===i.target.dataset.csatPoll,t=Analytics.action("docs_footer_csat",{helpful:e}),n=e?"What was most helpful?":"What can we improve?",c.placeholder=n,r.innerHTML=n,u(Cookies.get("merchant")?"input":"reply"),c.focus()})}),c.addEventListener("keyup",function(t){"Enter"!==t.key||t.shiftKey||d()}),s.addEventListener("click",function(t){d()}))}}}(),analyticsDocsObserver=function(){return{onChange:function(){window.siteAnalytics.trackDocsPageView(docsAnalytics.getReferrer())},skipInitial:!0}}(),trackCollectEmail=function(){return{onChange:function(){var t=document.querySelector("#collect-email-input-email"),e=document.querySelector("#collect-email-input-list"),n=document.querySelector("#collect-email-input-submit");n&&e&&t&&n.addEventListener("click",function(n){var i={email:t.value,list:e.value};siteAnalyticsUtil.emitAction("collect_email_submit",i)})}}}();docsAnalytics.observers.push(analyticsDocsObserver),docsAnalytics.observers.push(trackCSAT),docsAnalytics.observers.push(trackCodeCopies),docsAnalytics.observers.push(missingAnchorLink),docsAnalytics.observers.push(trackCollectEmail),docsAnalytics.init();