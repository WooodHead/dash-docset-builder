!function(){var e=[].slice.call(document.querySelectorAll("aside.video")),t=document.querySelector(".video-overlay"),i=t.querySelector("video"),a=function(){t.classList.remove("visible"),i.pause()};e.forEach(function(e){e.addEventListener("click",function(){!function(e){var a=e.getAttribute("data-video-url-webm"),n=e.getAttribute("data-video-url-mp4"),c=e.getAttribute("data-video-url-ogg"),l=i.getAttribute("src");!l||l!==a&&l!==n&&l!==c?(e.classList.add("loading"),i.addEventListener("canplay",function(){e.classList.remove("loading"),t.classList.add("visible")}),null!=a&&i.canPlayType("video/webm")?i.setAttribute("src",a):null!=n&&i.canPlayType("video/mp4")?i.setAttribute("src",n):null!=c&&i.canPlayType("video/ogg")?i.setAttribute("src",c):i.setAttribute("src",n)):(t.classList.add("visible"),i.play())}(e)})}),t.addEventListener("click",function(e){e.target!=i&&a()}),document.addEventListener("keyup",function(e){27==e.keyCode&&a()})}();