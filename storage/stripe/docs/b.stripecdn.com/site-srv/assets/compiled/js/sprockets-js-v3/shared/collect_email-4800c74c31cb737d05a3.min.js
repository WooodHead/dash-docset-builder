"use strict";function findParent(t,e){for(;(t=t.parentElement)&&!(t.matches||t.matchesSelector).call(t,e););return t}function campaignMonitorCallback(t,e){200==t.Status||e||Strut.queryArray(".collect-email-partial.form-submitted form.collect-form").forEach(function(t){t.showErrorMessage(!0)})}function campaignMonitorError(t){Strut.queryArray(".collect-email-partial.form-submitted form.collect-form").forEach(function(t){t.showErrorMessage(!1)})}window.Strut={random:function(t,e){return Math.random()*(e-t)+t},arrayRandom:function(t){return t[Math.floor(Math.random()*t.length)]},interpolate:function(t,e,n){return t*(1-n)+e*n},rangePosition:function(t,e,n){return(n-t)/(e-t)},clamp:function(t,e,n){return Math.max(Math.min(t,n),e)},queryArray:function(t,e){return e||(e=document.body),Array.prototype.slice.call(e.querySelectorAll(t))},ready:function(t){"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)},debounce:function(t,e){let n;return function(){clearTimeout(n),n=setTimeout(function(){return t.apply(this,arguments)},e)}},throttle:function(t,e,n){var r=n||this,i=null,o=null,a=function(){t.apply(r,o),i=null};return function(){i||(o=arguments,i=setTimeout(a,e))}}},Strut.isRetina=window.devicePixelRatio>1.3,Strut.mobileViewportWidth=670,Strut.isMobileViewport=window.innerWidth<Strut.mobileViewportWidth,window.addEventListener("resize",function(){Strut.isMobileViewport=window.innerWidth<Strut.mobileViewportWidth}),Strut.touch={isSupported:"ontouchstart"in window||navigator.maxTouchPoints,isDragging:!1},document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("touchmove",function(){Strut.touch.isDragging=!0}),document.body.addEventListener("touchstart",function(){Strut.touch.isDragging=!1})}),Strut.load={images:function(t,e){"string"==typeof t&&(t=[t]);var n=-t.length;t.forEach(function(t){var r=new Image;r.src=t,r.onload=function(){0===++n&&e&&e()}})},css:function(t,e){var n=document.createElement("link"),r=(window.readConfig("strut_files")||{})[t];if(!r)throw new Error('CSS file "'+t+'" not found in strut_files config');n.href=r,n.rel="stylesheet",document.head.appendChild(n),e&&(n.onload=e)},js:function(t,e){var n=document.createElement("script"),r=(window.readConfig("strut_files")||{})[t];if(!r)throw new Error('Javascript file "'+t+'" not found in strut_files config');n.src=r,n.async=!1,document.head.appendChild(n),e&&(n.onload=e)}},Strut.supports={es6:!!window.Symbol&&!!window.Symbol.species,pointerEvents:function(){var t=document.createElement("a").style;return t.cssText="pointer-events:auto","auto"===t.pointerEvents}(),positionSticky:Boolean(window.CSS&&CSS.supports("(position: -webkit-sticky) or (position: sticky)")),masks:!/MSIE|Trident|Edge/i.test(navigator.userAgent)},function(t){window.Email={signupToList:function(t){const o=t.list,a=t.email,c=t.csrfToken,l=t.originalBehavior,s=t.onError;if(!e||i(o))return void l();const u={list:o,email:a,csrfToken:c};Object.keys(u).forEach(function(t){if(i(u[t]))throw new Error("Email.signupToList called with invalid params: "+JSON.stringify(u))});let d=!1;(function(t){const e=t.url,n=t.params,r=t.csrfToken;let i={method:"POST",headers:{"Content-Type":"application/json"}};if(!r)throw new Error("missing csrfToken");return i.headers=Object.assign({},{"x-stripe-csrf-token":r},i.headers),i=Object.assign({},{body:JSON.stringify(n)},i),fetch(e,i)})({method:"POST",url:r(o),params:{email:a},csrfToken:c}).then(function(t){if(t.status>=300)throw new Error(r(o)+" returned "+t.status);d=!0}).catch(function(t){throw n||s(),t}).finally(function(){n&&l(d)})}};const e=!0,n=!0;function r(t){return"/subscribe-to/"+t}function i(t){return!t||""===t.trim()}}(),Strut.ready(function(){Strut.queryArray("form.collect-form .email-field").forEach(function(t){t.addEventListener("focus",function(t){findParent(t.target,".email").classList.add("active")}),t.addEventListener("blur",function(t){findParent(t.target,".email").classList.remove("active")})}),Strut.queryArray("form.collect-form").forEach(function(t){t.showErrorMessage=function(t){this.querySelector(".collect-error").style.display="none";var e=findParent(this,".collect-email-partial").querySelector(".collected-email");e&&(e.innerHTML=""),Strut.queryArray(".submit-button",this).forEach(function(t){t.disabled=!1}),this.querySelector(".email-field").style.display="block",findParent(this,".collect-email-partial").classList.remove("form-submitted");var n=t?".collect-error.email":".collect-error.connection";this.querySelector(n).style.display="block",this.querySelector(".email-field").focus()}.bind(t),t.optimisticallyMarkFormSubmitted=function(){var t=this.querySelector(".email-field"),e=findParent(this,".collect-email-partial").querySelector(".collected-email");e&&(e.innerHTML=t.value),findParent(this,".collect-email-partial").classList.add("form-submitted"),this.querySelector(".submit-button").disabled=!0}.bind(t),t.addEventListener("submit",function(t){t.preventDefault();var e=this.querySelector(".email-field");e.style.display="none",e.value.length&&e.checkValidity()?(this.optimisticallyMarkFormSubmitted(),function(t){var e=[];e.add=function(t,e){return this.push([encodeURIComponent(t),encodeURIComponent(e)].join("=")),this},e.add("callback","campaignMonitorCallback"),t.querySelectorAll("input").forEach(function(t){e.add(t.name,t.value)});const n=t.querySelector('input[type="email"]').value,r=t.querySelector('input[name="list"]').value,i=t.querySelector('input[name="csrf-token"]').value;Email.signupToList({email:n,list:r,csrfToken:i,onError:campaignMonitorError,originalBehavior:function(n){if(!t.hasAttribute("data-disable-campaign-monitor")){var r=t.action+"?"+e.join("&"),i=new XMLHttpRequest;i.open(t.method,r,!0),i.onreadystatechange=function(){if(4===i.readyState&&i.responseText.includes("campaignMonitorCallback")){var t=i.responseText.match(/\(([^)]+)\)/)[1];campaignMonitorCallback(JSON.parse(t),n)}},i.timeout=3e3,i.onerror=function(){n||campaignMonitorError(this)},i.send()}}})}(this)):this.showErrorMessage(!0)}.bind(t))})});